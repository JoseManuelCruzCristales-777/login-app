import{$ as Cr,A as G,Aa as vt,B as pe,Ba as Pt,C as Zt,Ca as nn,D as w,Da as rn,E as It,Ea as on,F as _r,Fa as kt,G as f,Ga as sn,H as s,Ha as at,I as a,Ia as Mt,J as te,Ja as an,K as se,Ka as wt,L as k,M as h,N as br,O as Rn,P as $t,Q as ye,R as c,S as B,T as L,U as qe,V as Fn,W as ae,X as ce,Y as le,Z as Yt,_ as Kt,a as rt,aa as _t,b as ht,ba as ke,c as mt,ca as Xt,d as Sn,da as Me,e as he,ea as vr,f as En,fa as Pr,g as mr,ga as Qt,h as pr,ha as bt,i as ur,ia as kr,j as Dn,ja as Jt,k as In,ka as Mr,l as Ce,la as ge,m as jt,ma as en,n as Ue,na as wr,o as be,oa as Se,p as fr,pa as Ct,q as x,qa as Ee,r as y,ra as Fe,s as Ht,sa as De,t as Et,ta as Ie,u as qt,ua as Or,v as Gt,va as it,w as hr,wa as zn,x as ot,xa as st,y as l,ya as Re,z as Dt,za as tn}from"./chunk-XDF4ABNC.js";var An;function Po(){if(An==null){let r=typeof document<"u"?document.head:null;An=!!(r&&(r.createShadowRoot||r.attachShadow))}return An}function cn(r){if(Po()){let e=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Rt(r){return r.composedPath?r.composedPath()[0]:r.target}function xr(r){return r.buttons===0||r.detail===0}function yr(r){let e=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function ct(r){return r instanceof Gt?r.nativeElement:r}var ln=new WeakMap,Tr=(()=>{class r{_appRef;_injector=be(Ht);_environmentInjector=be(fr);load(t){let n=this._appRef=this._appRef||this._injector.get(_r),o=ln.get(n);o||(o={loaders:new Set,refs:[]},ln.set(n,o),n.onDestroy(()=>{ln.get(n)?.refs.forEach(i=>i.destroy()),ln.delete(n)})),o.loaders.has(t)||(o.loaders.add(t),o.refs.push(Cr(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Nn;try{Nn=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Nn=!1}var Sr=(()=>{class r{_platformId=be(hr);isBrowser=this._platformId?vr(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Nn)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ro=20,Er=(()=>{class r{_platform=be(Sr);_listeners;_viewportSize;_change=new he;_document=be(Et);constructor(){let t=be(It),n=be(Dt).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[n.listen("window","resize",o),n.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,n=this._getWindow(),o=t.documentElement,i=o.getBoundingClientRect(),d=-i.top||t.body.scrollTop||n.scrollY||o.scrollTop||0,m=-i.left||t.body.scrollLeft||n.scrollX||o.scrollLeft||0;return{top:d,left:m}}change(t=Ro){return t>0?this._change.pipe(ur(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Dr=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=Zt({type:r});static \u0275inj=jt({})}return r})();function Vn(r){let e=r.cloneNode(!0),t=e.querySelectorAll("[id]"),n=r.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return n==="canvas"?Fr(r,e):(n==="input"||n==="select"||n==="textarea")&&Rr(r,e),Ir("canvas",r,e,Fr),Ir("input, textarea, select",r,e,Rr),e}function Ir(r,e,t,n){let o=e.querySelectorAll(r);if(o.length){let i=t.querySelectorAll(r);for(let d=0;d<o.length;d++)n(o[d],i[d])}}var Fo=0;function Rr(r,e){e.type!=="file"&&(e.value=r.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${Fo++}`)}function Fr(r,e){let t=e.getContext("2d");if(t)try{t.drawImage(r,0,0)}catch{}}function Gn(r){let e=r.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Un(r,e,t){let{top:n,bottom:o,left:i,right:d}=r;return t>=n&&t<=o&&e>=i&&e<=d}function zo(r,e){let t=e.left<r.left,n=e.left+e.width>r.right,o=e.top<r.top,i=e.top+e.height>r.bottom;return t||n||o||i}function At(r,e,t){r.top+=e,r.bottom=r.top+r.height,r.left+=t,r.right=r.left+r.width}function zr(r,e,t,n){let{top:o,right:i,bottom:d,left:m,width:_,height:b}=r,C=_*e,T=b*e;return n>o-T&&n<d+T&&t>m-C&&t<i+C}var dn=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Gn(t)})})}handleScroll(e){let t=Rt(e),n=this.positions.get(t);if(!n)return null;let o=n.scrollPosition,i,d;if(t===this._document){let b=this.getViewportScrollPosition();i=b.top,d=b.left}else i=t.scrollTop,d=t.scrollLeft;let m=o.top-i,_=o.left-d;return this.positions.forEach((b,C)=>{b.clientRect&&t!==C&&t.contains(C)&&At(b.clientRect,m,_)}),o.top=i,o.left=d,{top:m,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Gr(r,e){let t=r.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let n=e.createElement("div");return t.forEach(o=>n.appendChild(o)),n}function Zn(r,e,t){for(let n in e)if(e.hasOwnProperty(n)){let o=e[n];o?r.setProperty(n,o,t?.has(n)?"important":""):r.removeProperty(n)}return r}function Ot(r,e){let t=e?"":"none";Zn(r.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Ar(r,e,t){Zn(r.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function gn(r,e){return e&&e!="none"?r+" "+e:r}function Nr(r,e){r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.transform=Nt(e.left,e.top)}function Nt(r,e){return`translate3d(${Math.round(r)}px, ${Math.round(e)}px, 0)`}function Lr(r){let e=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*e}function Ao(r){let e=getComputedStyle(r),t=Ln(e,"transition-property"),n=t.find(m=>m==="transform"||m==="all");if(!n)return 0;let o=t.indexOf(n),i=Ln(e,"transition-duration"),d=Ln(e,"transition-delay");return Lr(i[o])+Lr(d[o])}function Ln(r,e){return r.getPropertyValue(e).split(",").map(n=>n.trim())}var No=new Set(["position"]),Bn=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,n,o,i,d,m,_,b,C){this._document=e,this._rootElement=t,this._direction=n,this._initialDomRect=o,this._previewTemplate=i,this._previewClass=d,this._pickupPositionOnPage=m,this._initialTransform=_,this._zIndex=b,this._renderer=C}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),Wr(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return Ao(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,n=e?e.template:null,o;if(n&&e){let i=e.matchSize?this._initialDomRect:null,d=e.viewContainer.createEmbeddedView(n,e.context);d.detectChanges(),o=Gr(d,this._document),this._previewEmbeddedView=d,e.matchSize?Nr(o,i):o.style.transform=Nt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=Vn(this._rootElement),Nr(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return Zn(o.style,{"pointer-events":"none",margin:Wr(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},No),Ot(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(i=>o.classList.add(i)):o.classList.add(t)),o}};function Wr(r){return"showPopover"in r}var Lo={passive:!0},Vr={passive:!1},Wo={passive:!1,capture:!0},Vo=800,Ur="cdk-drag-placeholder",Br=new Set(["position"]),jn=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=qt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new he;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=mt.EMPTY;_pointerUpSubscription=mt.EMPTY;_scrollSubscription=mt.EMPTY;_resizeSubscription=mt.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Ot(t,e)))}_disabled=!1;beforeStarted=new he;started=new he;released=new he;ended=new he;entered=new he;exited=new he;dropped=new he;moved=this._moveEvents;data;constrainPosition;constructor(e,t,n,o,i,d,m){this._config=t,this._document=n,this._ngZone=o,this._viewportRuler=i,this._dragDropRegistry=d,this._renderer=m,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new dn(n),d.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(n=>ct(n)),this._handles.forEach(n=>Ot(n,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ct(e);if(t!==this._rootElement){this._removeRootElementListeners();let n=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[n.listen(t,"mousedown",this._pointerDown,Vr),n.listen(t,"touchstart",this._pointerDown,Lo),n.listen(t,"dragstart",this._nativeDragStart,Vr)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ct(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&zo(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),n=0,o=0;t.left<e.left?n=e.left-t.left:t.right>e.right&&(n=e.right-t.right),t.top<e.top?o=e.top-t.top:t.bottom>e.bottom&&(o=e.bottom-t.bottom);let i=this._activeTransform.x,d=this._activeTransform.y,m=i+n,_=d+o;this._rootElement.style.transform=Nt(m,_),this._activeTransform={x:m,y:_},this._passiveTransform={x:m,y:_}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ot(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ot(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let o=Math.abs(t.x-this._pickupPositionOnPage.x),i=Math.abs(t.y-this._pickupPositionOnPage.y);if(o+i>=this._config.dragStartThreshold){let m=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),_=this._dropContainer;if(!m){this._endDragSequence(e);return}(!_||!_.isDragging()&&!_.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,i=this._activeTransform;i.x=n.x-o.x+this._passiveTransform.x,i.y=n.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(i.x,i.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Ft(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),n=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",Uo,Wo)}),n){let o=this._rootElement,i=o.parentNode,d=this._placeholder=this._createPlaceholderElement(),m=this._marker=this._marker||this._document.createComment("");i.insertBefore(m,o),this._initialTransform=o.style.transform||"",this._preview=new Bn(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(i,t)),Ar(o,!1,Br),this._document.body.appendChild(i.replaceChild(d,o)),this.started.next({source:this,event:e}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let n=this.isDragging(),o=Ft(t),i=!o&&t.button!==0,d=this._rootElement,m=Rt(t),_=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+Vo>Date.now(),b=o?yr(t):xr(t);if(m&&m.draggable&&t.type==="mousedown"&&t.preventDefault(),n||i||_||b)return;if(this._handles.length){let A=d.style;this._rootElementTapHighlight=A.webkitTapHighlightColor||"",A.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(A=>this._updateOnScroll(A)),this._boundaryElement&&(this._boundaryRect=Gn(this._boundaryElement));let C=this._previewTemplate;this._pickupPositionInElement=C&&C.template&&!C.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Ar(this._rootElement,!0,Br),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,n=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),i=this._getDragDistance(o),d=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:i,dropPoint:o,event:e}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:i,dropPoint:o,event:e}),t.drop(this,n,this._initialIndex,this._initialContainer,d,i,o,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:o}){let i=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{let d=this._dropContainer.getItemIndex(this),m=this._dropContainer.getItemAtIndex(d+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(i,this._dropContainer,m),this._dropContainer=i,this._dropContainer.enter(this,e,t,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let o=m=>{(!m||this._preview&&Rt(m)===this._preview.element&&m.propertyName==="transform")&&(d(),n(),clearTimeout(i))},i=setTimeout(o,t*1.5),d=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=Gr(this._placeholderRef,this._document)):n=Vn(this._rootElement),n.style.pointerEvents="none",n.classList.add(Ur),n}_getPointerPositionInElement(e,t,n){let o=t===this._rootElement?null:t,i=o?o.getBoundingClientRect():e,d=Ft(n)?n.targetTouches[0]:n,m=this._getViewportScrollPosition(),_=d.pageX-i.left-m.left,b=d.pageY-i.top-m.top;return{x:i.left-e.left+_,y:i.top-e.top+b}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),n=Ft(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=n.pageX-t.left,i=n.pageY-t.top;if(this._ownerSVGElement){let d=this._ownerSVGElement.getScreenCTM();if(d){let m=this._ownerSVGElement.createSVGPoint();return m.x=o,m.y=i,m.matrixTransform(d.inverse())}}return{x:o,y:i}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:o}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:i,y:d}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,m=this._boundaryRect,{width:_,height:b}=this._getPreviewRect(),C=m.top+d,T=m.bottom-(b-d),A=m.left+i,X=m.right-(_-i);n=jr(n,A,X),o=jr(o,C,T)}return{x:n,y:o}}_updatePointerDirectionDelta(e){let{x:t,y:n}=e,o=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,d=Math.abs(t-i.x),m=Math.abs(n-i.y);return d>this._config.pointerDirectionChangeThreshold&&(o.x=t>i.x?1:-1,i.x=t),m>this._config.pointerDirectionChangeThreshold&&(o.y=n>i.y?1:-1,i.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ot(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let n=1/this.scale,o=Nt(e*n,t*n),i=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=i.transform&&i.transform!="none"?i.transform:""),i.transform=gn(o,this._initialTransform)}_applyPreviewTransform(e,t){let n=this._previewTemplate?.template?void 0:this._initialTransform,o=Nt(e,t);this._preview.setTransform(gn(o,n))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||n.width===0&&n.height===0)return;let i=o.left-n.left,d=n.right-o.right,m=o.top-n.top,_=n.bottom-o.bottom;o.width>n.width?(i>0&&(e+=i),d>0&&(e-=d)):e=0,o.height>n.height?(m>0&&(t+=m),_>0&&(t-=_)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Ft(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let n=Rt(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&At(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=cn(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let n=this._previewContainer||"global";if(n==="parent")return e;if(n==="global"){let o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return ct(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,n){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let o=this._anchor??=Vn(this._placeholder);o.classList.remove(Ur),o.classList.add("cdk-drag-anchor"),o.style.transform="",n?n.before(o):ct(t.element).appendChild(o)}}};function jr(r,e,t){return Math.max(e,Math.min(t,r))}function Ft(r){return r.type[0]==="t"}function Uo(r){r.preventDefault()}function Zr(r,e,t){let n=Hr(e,r.length-1),o=Hr(t,r.length-1);if(n===o)return;let i=r[n],d=o<n?-1:1;for(let m=n;m!==o;m+=d)r[m]=r[m+d];r[o]=i}function Hr(r,e){return Math.max(0,Math.min(e,r))}var mn=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,n,o){let i=this._itemPositions,d=this._getItemIndexFromPointerPosition(e,t,n,o);if(d===-1&&i.length>0)return null;let m=this.orientation==="horizontal",_=i.findIndex(ee=>ee.drag===e),b=i[d],C=i[_].clientRect,T=b.clientRect,A=_>d?1:-1,X=this._getItemOffsetPx(C,T,A),ne=this._getSiblingOffsetPx(_,i,A),Pe=i.slice();return Zr(i,_,d),i.forEach((ee,me)=>{if(Pe[me]===ee)return;let E=ee.drag===e,O=E?X:ne,K=E?e.getPlaceholderElement():ee.drag.getRootElement();ee.offset+=O;let Q=Math.round(ee.offset*(1/ee.drag.scale));m?(K.style.transform=gn(`translate3d(${Q}px, 0, 0)`,ee.initialTransform),At(ee.clientRect,0,O)):(K.style.transform=gn(`translate3d(0, ${Q}px, 0)`,ee.initialTransform),At(ee.clientRect,O,0))}),this._previousSwap.overlaps=Un(T,t,n),this._previousSwap.drag=b.drag,this._previousSwap.delta=m?o.x:o.y,{previousIndex:_,currentIndex:d}}enter(e,t,n,o){let i=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,n):o,d=this._activeDraggables,m=d.indexOf(e),_=e.getPlaceholderElement(),b=d[i];if(b===e&&(b=d[i+1]),!b&&(i==null||i===-1||i<d.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(b=d[0]),m>-1&&d.splice(m,1),b&&!this._dragDropRegistry.isDragging(b)){let C=b.getRootElement();C.parentElement.insertBefore(_,C),d.splice(i,0,e)}else this._element.appendChild(_),d.push(e);_.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let n=this._itemPositions.find(o=>o.drag===e)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:n})=>{At(n,e,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:Gn(n)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,n){let o=this.orientation==="horizontal",i=o?t.left-e.left:t.top-e.top;return n===-1&&(i+=o?t.width-e.width:t.height-e.height),i}_getSiblingOffsetPx(e,t,n){let o=this.orientation==="horizontal",i=t[e].clientRect,d=t[e+n*-1],m=i[o?"width":"height"]*n;if(d){let _=o?"left":"top",b=o?"right":"bottom";n===-1?m-=d.clientRect[_]-i[b]:m+=i[_]-d.clientRect[b]}return m}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,o=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let d=n[n.length-1].clientRect;return o?e>=d.right:t>=d.bottom}else{let d=n[0].clientRect;return o?e<=d.left:t<=d.top}}_getItemIndexFromPointerPosition(e,t,n,o){let i=this.orientation==="horizontal",d=this._itemPositions.findIndex(({drag:m,clientRect:_})=>{if(m===e)return!1;if(o){let b=i?o.x:o.y;if(m===this._previousSwap.drag&&this._previousSwap.overlaps&&b===this._previousSwap.delta)return!1}return i?t>=Math.floor(_.left)&&t<Math.floor(_.right):n>=Math.floor(_.top)&&n<Math.floor(_.bottom)});return d===-1||!this._sortPredicate(d,e)?-1:d}},Hn=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<t.length;n++){let o=t[n];this._relatedNodes.push([o,o.nextSibling])}this.withItems(e)}sort(e,t,n,o){let i=this._getItemIndexFromPointerPosition(e,t,n),d=this._previousSwap;if(i===-1||this._activeItems[i]===e)return null;let m=this._activeItems[i];if(d.drag===m&&d.overlaps&&d.deltaX===o.x&&d.deltaY===o.y)return null;let _=this.getItemIndex(e),b=e.getPlaceholderElement(),C=m.getRootElement();i>_?C.after(b):C.before(b),Zr(this._activeItems,_,i);let T=this._getRootNode().elementFromPoint(t,n);return d.deltaX=o.x,d.deltaY=o.y,d.drag=m,d.overlaps=C===T||C.contains(T),{previousIndex:_,currentIndex:i}}enter(e,t,n,o){let i=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,n):o;i===-1&&(i=this._getClosestItemIndexToPointer(e,t,n));let d=this._activeItems[i],m=this._activeItems.indexOf(e);m>-1&&this._activeItems.splice(m,1),d&&!this._dragDropRegistry.isDragging(d)?(this._activeItems.splice(i,0,e),d.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){let[o,i]=this._relatedNodes[n];o.parentNode===e&&o.nextSibling!==i&&(i===null?e.appendChild(o):i.parentNode===e&&e.insertBefore(o,i))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,n){let o=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(n)),i=o?this._activeItems.findIndex(d=>{let m=d.getRootElement();return o===m||m.contains(o)}):-1;return i===-1||!this._sortPredicate(i,e)?-1:i}_getRootNode(){return this._rootNode||(this._rootNode=cn(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,n){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,i=-1;for(let d=0;d<this._activeItems.length;d++){let m=this._activeItems[d];if(m!==e){let{x:_,y:b}=m.getRootElement().getBoundingClientRect(),C=Math.hypot(t-_,n-b);C<o&&(o=C,i=d)}}return i}},qr=.05,$r=.05,ze=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(ze||{}),Te=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(Te||{}),qn=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new he;entered=new he;exited=new he;dropped=new he;sorted=new he;receivingStarted=new he;receivingStopped=new he;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=mt.EMPTY;_verticalScrollDirection=ze.NONE;_horizontalScrollDirection=Te.NONE;_scrollNode;_stopScrollTimers=new he;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,n,o,i){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=i;let d=this.element=ct(e);this._document=n,this.withOrientation("vertical").withElementContainer(d),t.registerDropContainer(this),this._parentPositions=new dn(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,o,i,d,m,_={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:i,distance:d,dropPoint:m,event:_})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>e.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof mn&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new Hn(this._document,this._dragDropRegistry);else{let t=new mn(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,n)=>this.sortPredicate(t,n,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ct(this.element),n=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(e);return n>-1&&this._scrollableElements.splice(n,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,o){if(this.sortingDisabled||!this._domRect||!zr(this._domRect,qr,t,n))return;let i=this._sortStrategy.sort(e,t,n,o);i&&this.sorted.next({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,o=ze.NONE,i=Te.NONE;if(this._parentPositions.positions.forEach((d,m)=>{m===this._document||!d.clientRect||n||zr(d.clientRect,qr,e,t)&&([o,i]=Bo(m,d.clientRect,this._direction,e,t),(o||i)&&(n=m))}),!o&&!i){let{width:d,height:m}=this._viewportRuler.getViewportSize(),_={width:d,height:m,top:0,right:d,bottom:m,left:0};o=Yr(_,t),i=Kr(_,e),n=window}n&&(o!==this._verticalScrollDirection||i!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=i,this._scrollNode=n,(o||i)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),mr(0,En).pipe(Dn(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===ze.UP?e.scrollBy(0,-t):this._verticalScrollDirection===ze.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Te.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Te.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&Un(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(o=>o._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._domRect||!Un(this._domRect,t,n)||!this.enterPredicate(e,this))return!1;let o=this._getShadowRoot().elementFromPoint(t,n);return o?o===this._container||this._container.contains(o):!1}_startReceiving(e,t){let n=this._activeSiblings;!n.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=cn(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function Yr(r,e){let{top:t,bottom:n,height:o}=r,i=o*$r;return e>=t-i&&e<=t+i?ze.UP:e>=n-i&&e<=n+i?ze.DOWN:ze.NONE}function Kr(r,e){let{left:t,right:n,width:o}=r,i=o*$r;return e>=t-i&&e<=t+i?Te.LEFT:e>=n-i&&e<=n+i?Te.RIGHT:Te.NONE}function Bo(r,e,t,n,o){let i=Yr(e,o),d=Kr(e,n),m=ze.NONE,_=Te.NONE;if(i){let b=r.scrollTop;i===ze.UP?b>0&&(m=ze.UP):r.scrollHeight-b>r.clientHeight&&(m=ze.DOWN)}if(d){let b=r.scrollLeft;t==="rtl"?d===Te.RIGHT?b<0&&(_=Te.RIGHT):r.scrollWidth+b>r.clientWidth&&(_=Te.LEFT):d===Te.LEFT?b>0&&(_=Te.LEFT):r.scrollWidth-b>r.clientWidth&&(_=Te.RIGHT)}return[m,_]}var zt={capture:!0},Wn={passive:!1,capture:!0},jo=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=pe({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(n,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return r})(),Ho=(()=>{class r{_ngZone=be(It);_document=be(Et);_styleLoader=be(Tr);_renderer=be(Dt).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new he;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=qt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new he;pointerUp=new he;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Wn)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,n){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(jo),this._activeDragInstances.update(o=>[...o,t]),this._activeDragInstances().length===1)){let o=n.type.startsWith("touch"),i=m=>this.pointerUp.next(m),d=[["scroll",m=>this._scroll.next(m),zt],["selectstart",this._preventDefaultWhileDragging,Wn]];o?d.push(["touchend",i,zt],["touchcancel",i,zt]):d.push(["mouseup",i,zt]),o||d.push(["mousemove",m=>this.pointerMove.next(m),Wn]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=d.map(([m,_,b])=>this._renderer.listen(this._document,m,_,b))})}}stopDragging(t){this._activeDragInstances.update(n=>{let o=n.indexOf(t);return o>-1?(n.splice(o,1),[...n]):n}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let n=[this._scroll];return t&&t!==this._document&&n.push(new Sn(o=>this._ngZone.runOutsideAngular(()=>{let i=this._renderer.listen(t,"scroll",d=>{this._activeDragInstances().length&&o.next(d)},zt);return()=>{i()}}))),pr(...n)}registerDirectiveNode(t,n){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,n)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),qo={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Go=(()=>{class r{_document=be(Et);_ngZone=be(It);_viewportRuler=be(Er);_dragDropRegistry=be(Ho);_renderer=be(Dt).createRenderer(null,null);constructor(){}createDrag(t,n=qo){return new jn(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new qn(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Xr=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=Zt({type:r});static \u0275inj=jt({providers:[Go],imports:[Dr]})}return r})();var pn=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=pe({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&te(0,"router-outlet")},dependencies:[Se,Mr,Xr],encapsulation:2})};var Oe=class r{constructor(e,t){this.http=e;this.router=t}apiUrl="http://127.0.0.1:8000/api";register(e){return this.http.post(`${this.apiUrl}/register`,e)}isAuthenticated(){let e=localStorage.getItem("token");return console.log("\u{1F510} Verificando autenticaci\xF3n. Token existe:",!!e),!e||e==="null"||e==="undefined"?(console.log("\u{1F510} Token inv\xE1lido o inexistente"),!1):e.length<20?(console.log("\u{1F510} Token demasiado corto, posiblemente inv\xE1lido"),localStorage.removeItem("token"),!1):(console.log("\u{1F510} Token v\xE1lido encontrado:",e.substring(0,20)+"..."),!0)}login(e){return console.log("Auth service - Login called with:",e),this.http.post(`${this.apiUrl}/login`,e).pipe(In(t=>{if(console.log("Auth service - Login response:",t),t&&t.token){console.log("Auth service - Saving token:",t.token),localStorage.setItem("token",t.token);let n=localStorage.getItem("token");console.log("Auth service - Token saved successfully:",n)}else console.error("Auth service - No token in response");t&&t.user&&(console.log("Auth service - Saving user info:",t.user),localStorage.setItem("user",JSON.stringify(t.user)))}))}forgotPassword(e){return this.http.post(`${this.apiUrl}/forgot-password`,e)}resetPassword(e){return this.http.post(`${this.apiUrl}/reset-password`,e)}getUser(){let e=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/user`,{headers:e})}logout(){localStorage.removeItem("token"),this.router.navigate(["/login"],{replaceUrl:!0})}setToken(e){localStorage.setItem("token",e)}getToken(){return localStorage.getItem("token")}removeToken(){localStorage.removeItem("token")}getAuthHeaders(){let e=this.getToken();return new Qt({Authorization:`Bearer ${e}`})}checkAuthGuard(){let e=this.getToken(),t=this.isAuthenticated();return console.log("Auth Guard Check:"),console.log("- Token exists:",!!e),console.log("- Token value:",e),console.log("- Is authenticated:",t),t}static \u0275fac=function(t){return new(t||r)(Ue(bt),Ue(ge))};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})};function Zo(r,e){if(r&1&&(s(0,"div",18)(1,"span",19),c(2,"\u26A0\uFE0F"),a(),s(3,"span",20),c(4),a()()),r&2){let t=h();l(4),B(t.errorMessage)}}function $o(r,e){if(r&1&&(s(0,"div",21)(1,"span",22),c(2,"\u2705"),a(),s(3,"span",23),c(4),a()()),r&2){let t=h();l(4),B(t.successMessage)}}function Yo(r,e){r&1&&(s(0,"span"),c(1,"El correo es obligatorio."),a())}function Ko(r,e){r&1&&(s(0,"span"),c(1,"Correo inv\xE1lido."),a())}function Xo(r,e){if(r&1&&(s(0,"div",24),w(1,Yo,2,0,"span",25)(2,Ko,2,0,"span",25),a()),r&2){let t=h();l(),f("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.required),l(),f("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.email)}}function Qo(r,e){r&1&&(s(0,"span"),c(1,"La contrase\xF1a es obligatoria."),a())}function Jo(r,e){r&1&&(s(0,"span"),c(1,"M\xEDnimo 8 caracteres."),a())}function ei(r,e){if(r&1&&(s(0,"div",24),w(1,Qo,2,0,"span",25)(2,Jo,2,0,"span",25),a()),r&2){let t=h();l(),f("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),l(),f("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength)}}var un=class r{constructor(e,t){this.router=e;this.auth=t}loginForm;errorMessage="";successMessage="";ngOnInit(){this.loginForm=new Or({email:new zn("",[Fe.required,Fe.email]),password:new zn("",[Fe.required,Fe.minLength(8)])})}onSubmit(){if(console.log("=== onSubmit() method called ==="),console.log("Form valid:",this.loginForm.valid),console.log("Form value:",this.loginForm.value),console.log("Form errors:",this.loginForm.errors),event?.preventDefault(),this.loginForm.valid){this.errorMessage="",this.successMessage="";let e=this.loginForm.value;console.log("Sending login request with data:",e),this.auth.login(e).subscribe({next:t=>{console.log("=== Login successful ==="),console.log("Response:",t),console.log("Token guardado:",localStorage.getItem("token")),console.log("Usuario autenticado:",this.auth.isAuthenticated()),console.log("Iniciando redirecci\xF3n..."),this.router.navigate(["/home"]).then(n=>{console.log("Resultado de navegaci\xF3n:",n),n||(console.log("Navegaci\xF3n fall\xF3, intentando window.location..."),window.location.href="/home")}).catch(n=>{console.error("Error en navigate, usando window.location:",n),window.location.href="/home"})},error:t=>{console.error("=== Login error ==="),console.error("Error details:",t),console.error("Error status:",t.status),console.error("Error message:",t.message),t.status===401?this.errorMessage="Credenciales incorrectas. Verifica tu correo y contrase\xF1a.":t.status===422?this.errorMessage="Datos inv\xE1lidos. Revisa la informaci\xF3n ingresada.":t.status===500?this.errorMessage="Error del servidor. Intenta nuevamente m\xE1s tarde.":t.status===0?this.errorMessage="No se pudo conectar con el servidor. Verifica tu conexi\xF3n.":this.errorMessage=t.error?.message||"Error al iniciar sesi\xF3n. Intenta nuevamente.",setTimeout(()=>{this.errorMessage=""},5e3)}})}else console.log("=== Form is invalid ==="),console.log("Email errors:",this.email?.errors),console.log("Password errors:",this.password?.errors),this.errorMessage="Por favor, completa todos los campos correctamente.",this.loginForm.markAllAsTouched(),setTimeout(()=>{this.errorMessage=""},3e3)}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(t){return new(t||r)(G(ge),G(Oe))};static \u0275cmp=pe({type:r,selectors:[["app-login"]],decls:33,vars:8,consts:[[1,"login-page"],[1,"login-left"],[3,"ngSubmit","formGroup"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"input-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","ejemplo@correo.com"],["class","error",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],[1,"options"],["type","checkbox"],[3,"routerLink"],["type","submit",3,"click","disabled"],[1,"register-text"],[1,"login-right"],["src","/img/login1.jpg","alt","Ilustraci\xF3n"],[1,"error-message"],[1,"error-icon"],[1,"error-text"],[1,"success-message"],[1,"success-icon"],[1,"success-text"],[1,"error"],[4,"ngIf"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"form",2),k("ngSubmit",function(){return n.onSubmit()}),s(3,"h2"),c(4,"Bienvenido"),a(),s(5,"p"),c(6,"Inicia sesi\xF3n para continuar"),a(),w(7,Zo,5,1,"div",3)(8,$o,5,1,"div",4),s(9,"div",5)(10,"label",6),c(11,"Correo electr\xF3nico"),a(),te(12,"input",7),w(13,Xo,3,2,"div",8),a(),s(14,"div",5)(15,"label",9),c(16,"Contrase\xF1a"),a(),te(17,"input",10),w(18,ei,3,2,"div",8),a(),s(19,"div",11)(20,"label"),te(21,"input",12),c(22," Recu\xE9rdame"),a(),s(23,"a",13),c(24,"\xBFOlvidaste tu contrase\xF1a?"),a()(),s(25,"button",14),k("click",function(){return n.onSubmit()}),c(26,"Ingresar"),a(),s(27,"div",15),c(28," \xBFNo tienes cuenta? "),s(29,"a",13),c(30,"Reg\xEDstrate"),a()()()(),s(31,"div",16),te(32,"img",17),a()()),t&2&&(l(2),f("formGroup",n.loginForm),l(5),f("ngIf",n.errorMessage),l(),f("ngIf",n.successMessage),l(5),f("ngIf",(n.email==null?null:n.email.touched)&&(n.email==null?null:n.email.invalid)),l(5),f("ngIf",(n.password==null?null:n.password.touched)&&(n.password==null?null:n.password.invalid)),l(5),f("routerLink","/forgot-password"),l(2),f("disabled",n.loginForm.invalid),l(4),f("routerLink","/register"))},dependencies:[Me,ke,Mt,Re,Ee,De,Ie,vt,Pt,Se,en],styles:['@charset "UTF-8";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;overflow:hidden}.login-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100vw;height:100vh;margin:0;padding:0;overflow:hidden;font-family:Inter,sans-serif;background:#f0f4f8}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]{flex:1;background:#fff;padding:4rem 3rem;display:flex;flex-direction:column;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .5s ease}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin:auto}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin-bottom:.5rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:2rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #dce3ea;border-radius:10px;font-size:1rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;font-size:.9rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;text-decoration:none}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.85rem;background-color:#3498db;color:#fff;font-weight:700;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:background .3s ease}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .register-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;font-weight:600;text-decoration:none}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);border:1px solid #f87171;border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out;box-shadow:0 2px 8px #f8717133}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#dc2626;font-weight:500;font-size:.9rem;line-height:1.4}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d1fae5,#a7f3d0);border:1px solid #34d399;border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out;box-shadow:0 2px 8px #34d39933}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   .success-text[_ngcontent-%COMP%]{color:#059669;font-weight:500;font-size:.9rem;line-height:1.4}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{transition:all .3s ease-out}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem;background:#f871711a;border-radius:4px;border-left:3px solid #f87171}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#dc2626;font-size:.85rem;font-weight:500;display:flex;align-items:center;gap:.25rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:.75rem}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f87171;box-shadow:0 0 0 3px #f871711a}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef444433}.login-page[_ngcontent-%COMP%]   .login-right[_ngcontent-%COMP%]{flex:1.2;background-color:#f0f2f5;display:flex;justify-content:center;align-items:center;padding:0;margin:0;overflow:hidden}.login-page[_ngcontent-%COMP%]   .login-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.login-page[_ngcontent-%COMP%]{flex-direction:column}.login-page[_ngcontent-%COMP%]   .login-right[_ngcontent-%COMP%]{display:none}.login-page[_ngcontent-%COMP%]   .login-left[_ngcontent-%COMP%]{width:100%;padding:2rem}}']})};function ti(r,e){r&1&&(s(0,"div",23),c(1," El nombre es requerido. "),a())}function ni(r,e){r&1&&(s(0,"div",23),c(1," El apellido es requerido. "),a())}function ri(r,e){r&1&&(s(0,"div",23),c(1," El tel\xE9fono es requerido. "),a())}function oi(r,e){r&1&&(s(0,"div",23),c(1," El correo electr\xF3nico es requerido. "),a())}function ii(r,e){r&1&&(s(0,"div",23),c(1," La contrase\xF1a es requerida. "),a())}function si(r,e){r&1&&(s(0,"div",23),c(1," La confirmaci\xF3n de contrase\xF1a es requerida. "),a())}function ai(r,e){if(r&1&&(s(0,"div",23),c(1),a()),r&2){let t=h();l(),B(t.error)}}var fn=class r{constructor(e,t){this.router=e;this.auth=t}form={first_name:"",last_name:"",phone:"",email:"",password:"",confirmPassword:"",acceptTerms:!1};error="";onRegister(){if(this.error="",!this.form.acceptTerms){this.error="Debes aceptar los t\xE9rminos y condiciones.";return}if(this.form.password!==this.form.confirmPassword){this.error="Las contrase\xF1as no coinciden.";return}if(!this.form.first_name||!this.form.last_name||!this.form.email||!this.form.password){this.error="Por favor completa todos los campos obligatorios.";return}let e={first_name:this.form.first_name,last_name:this.form.last_name,phone:this.form.phone,email:this.form.email,password:this.form.password,password_confirmation:this.form.confirmPassword};this.auth.register(e).subscribe({next:t=>{t.token?(this.auth.setToken(t.token),alert(`\xA1Registro exitoso de ${this.form.first_name} ${this.form.last_name}!`),this.router.navigate(["/workspace-list"])):alert("Respuesta inesperada del servidor")},error:t=>{this.error=t.error?.message||"Error en el registro"}})}static \u0275fac=function(t){return new(t||r)(G(ge),G(Oe))};static \u0275cmp=pe({type:r,selectors:[["app-register"]],decls:47,vars:16,consts:[["registerForm","ngForm"],[1,"register-container"],[3,"ngSubmit"],[1,"form-row"],[1,"input-group"],["for","first_name"],["id","first_name","name","first_name","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","last_name"],["id","last_name","name","last_name","required","",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","name","phone","type","tel",3,"ngModelChange","ngModel"],["for","email"],["id","email","name","email","type","email","required","",3,"ngModelChange","ngModel"],["for","password"],["id","password","name","password","type","password","required","",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","name","confirmPassword","type","password","required","",3,"ngModelChange","ngModel"],[1,"terms"],["type","checkbox","name","acceptTerms",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"login-text"],[3,"routerLink"],[1,"error"]],template:function(t,n){if(t&1){let o=se();s(0,"div",1)(1,"form",2,0),k("ngSubmit",function(){return x(o),y(n.onRegister())}),s(3,"h2"),c(4,"Crear cuenta"),a(),s(5,"div",3)(6,"div",4)(7,"label",5),c(8,"Nombre"),a(),s(9,"input",6),le("ngModelChange",function(d){return x(o),ce(n.form.first_name,d)||(n.form.first_name=d),y(d)}),a(),w(10,ti,2,0,"div",7),a(),s(11,"div",4)(12,"label",8),c(13,"Apellido"),a(),s(14,"input",9),le("ngModelChange",function(d){return x(o),ce(n.form.last_name,d)||(n.form.last_name=d),y(d)}),a(),w(15,ni,2,0,"div",7),a()(),s(16,"div",4)(17,"label",10),c(18,"Tel\xE9fono"),a(),s(19,"input",11),le("ngModelChange",function(d){return x(o),ce(n.form.phone,d)||(n.form.phone=d),y(d)}),a(),w(20,ri,2,0,"div",7),a(),s(21,"div",4)(22,"label",12),c(23,"Correo electr\xF3nico"),a(),s(24,"input",13),le("ngModelChange",function(d){return x(o),ce(n.form.email,d)||(n.form.email=d),y(d)}),a(),w(25,oi,2,0,"div",7),a(),s(26,"div",4)(27,"label",14),c(28,"Contrase\xF1a"),a(),s(29,"input",15),le("ngModelChange",function(d){return x(o),ce(n.form.password,d)||(n.form.password=d),y(d)}),a(),w(30,ii,2,0,"div",7),a(),s(31,"div",4)(32,"label",16),c(33,"Confirmar contrase\xF1a"),a(),s(34,"input",17),le("ngModelChange",function(d){return x(o),ce(n.form.confirmPassword,d)||(n.form.confirmPassword=d),y(d)}),a(),w(35,si,2,0,"div",7),a(),s(36,"div",18)(37,"label")(38,"input",19),le("ngModelChange",function(d){return x(o),ce(n.form.acceptTerms,d)||(n.form.acceptTerms=d),y(d)}),a(),c(39," Acepto los t\xE9rminos y condiciones "),a()(),w(40,ai,2,1,"div",7),s(41,"button",20),c(42,"Registrarse"),a(),s(43,"div",21),c(44," \xBFYa tienes cuenta? "),s(45,"a",22),c(46,"Inicia sesi\xF3n"),a()()()()}if(t&2){let o=br(2);l(9),ae("ngModel",n.form.first_name),l(),f("ngIf",o.submitted&&!n.form.first_name),l(4),ae("ngModel",n.form.last_name),l(),f("ngIf",o.submitted&&!n.form.last_name),l(4),ae("ngModel",n.form.phone),l(),f("ngIf",o.submitted&&!n.form.phone),l(4),ae("ngModel",n.form.email),l(),f("ngIf",o.submitted&&!n.form.email),l(4),ae("ngModel",n.form.password),l(),f("ngIf",o.submitted&&!n.form.password),l(4),ae("ngModel",n.form.confirmPassword),l(),f("ngIf",o.submitted&&!n.form.confirmPassword),l(3),ae("ngModel",n.form.acceptTerms),l(2),f("ngIf",n.error),l(),f("disabled",!o.form.valid),l(4),f("routerLink","/login")}},dependencies:[Me,ke,at,Re,Ee,Ct,De,Ie,kt,st,it,Se,en],styles:[".register-container[_ngcontent-%COMP%]{max-width:420px;margin:auto;padding:3rem 2rem;background-color:#fff;border-radius:16px;box-shadow:0 20px 60px #00000014;font-family:Inter,sans-serif}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;font-size:1.8rem;color:#2c3e50}.register-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.register-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex:1}.register-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}.register-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;margin-bottom:.3rem;color:#34495e}.register-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #dcdfe3;border-radius:10px;font-size:1rem;transition:border .2s ease}.register-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 2px #3498db1a}.register-container[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:1rem}.register-container[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:.5rem}.register-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e74c3c;margin-bottom:1rem;font-size:.9rem}.register-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:600;background-color:#3498db;color:#fff;border:none;border-radius:10px;cursor:pointer;transition:background .3s ease}.register-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.register-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.register-container[_ngcontent-%COMP%]   .login-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem}.register-container[_ngcontent-%COMP%]   .login-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;font-weight:600;text-decoration:none}.register-container[_ngcontent-%COMP%]   .login-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function ci(r,e){r&1&&(s(0,"span"),c(1,"El correo es obligatorio."),a())}function li(r,e){r&1&&(s(0,"span"),c(1,"Correo inv\xE1lido."),a())}function di(r,e){if(r&1&&(s(0,"div",13),w(1,ci,2,0,"span",14)(2,li,2,0,"span",14),a()),r&2){let t=h();l(),f("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.required),l(),f("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.email)}}function gi(r,e){if(r&1&&(s(0,"div",15),c(1),a()),r&2){let t=h();l(),L(" ",t.message," ")}}function mi(r,e){if(r&1&&(s(0,"div",13),c(1),a()),r&2){let t=h();l(),L(" ",t.error," ")}}var hn=class r{constructor(e,t,n){this.fb=e;this.auth=t;this.router=n;this.forgotPasswordForm=this.fb.group({email:["",[Fe.required,Fe.email]]})}forgotPasswordForm;loading=!1;message="";error="";get email(){return this.forgotPasswordForm.get("email")}onSubmit(){this.forgotPasswordForm.valid?(this.loading=!0,this.error="",this.message="",console.log("Sending forgot password request for email:",this.forgotPasswordForm.value.email),this.auth.forgotPassword(this.forgotPasswordForm.value).subscribe({next:e=>{this.loading=!1,this.message="Se ha enviado un enlace de recuperaci\xF3n a tu correo electr\xF3nico.",console.log("\u2705 Forgot password response:",e),setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:e=>{this.loading=!1,this.error=e.error?.message||"Error al enviar el correo de recuperaci\xF3n.",console.error("\u274C Forgot password error:",e)}})):console.log("Form is invalid:",this.forgotPasswordForm.errors)}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(G(sn),G(Oe),G(ge))};static \u0275cmp=pe({type:r,selectors:[["app-forgot-password"]],decls:21,vars:7,consts:[[1,"forgot-password-page"],[1,"forgot-password-left"],[3,"ngSubmit","formGroup"],[1,"input-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","ejemplo@correo.com",3,"disabled"],["class","error",4,"ngIf"],["class","success",4,"ngIf"],["type","submit",3,"disabled"],[1,"back-to-login"],[2,"cursor","pointer",3,"click"],[1,"forgot-password-right"],["src","/img/login1.jpg","alt","Ilustraci\xF3n"],[1,"error"],[4,"ngIf"],[1,"success"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"form",2),k("ngSubmit",function(){return n.onSubmit()}),s(3,"h2"),c(4,"Recuperar Contrase\xF1a"),a(),s(5,"p"),c(6,"Ingresa tu correo electr\xF3nico y te enviaremos un enlace para restablecer tu contrase\xF1a"),a(),s(7,"div",3)(8,"label",4),c(9,"Correo electr\xF3nico"),a(),te(10,"input",5),w(11,di,3,2,"div",6),a(),w(12,gi,2,1,"div",7)(13,mi,2,1,"div",6),s(14,"button",8),c(15),a(),s(16,"div",9)(17,"a",10),k("click",function(){return n.goToLogin()}),c(18,"\u2190 Volver al inicio de sesi\xF3n"),a()()()(),s(19,"div",11),te(20,"img",12),a()()),t&2&&(l(2),f("formGroup",n.forgotPasswordForm),l(8),f("disabled",n.loading),l(),f("ngIf",(n.email==null?null:n.email.touched)&&(n.email==null?null:n.email.invalid)),l(),f("ngIf",n.message),l(),f("ngIf",n.error),l(),f("disabled",n.forgotPasswordForm.invalid||n.loading),l(),L(" ",n.loading?"Enviando...":"Enviar enlace de recuperaci\xF3n"," "))},dependencies:[Me,ke,Mt,Re,Ee,De,Ie,vt,Pt,Se],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;overflow:hidden}.forgot-password-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100vw;height:100vh;margin:0;padding:0;overflow:hidden;font-family:Inter,sans-serif;background:#f0f4f8}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]{flex:1;background:#fff;padding:4rem 3rem;display:flex;flex-direction:column;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .5s ease}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin:auto}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin-bottom:.5rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:2rem;line-height:1.6}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#2c3e50;font-weight:500}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;font-size:1rem;transition:border-color .3s ease,box-shadow .3s ease}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;cursor:not-allowed;opacity:.7}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;margin-top:.25rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:.75rem;border-radius:8px;margin-bottom:1rem;border:1px solid #c3e6cb;font-size:.9rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:.75rem;border-radius:8px;margin-bottom:1rem;border:1px solid #f5c6cb;font-size:.9rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.875rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:1.5rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]{text-align:center}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;text-decoration:none;font-weight:500;transition:color .3s ease}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2980b9;text-decoration:underline}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-right[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80%;max-height:80%;object-fit:cover;border-radius:12px;box-shadow:0 8px 24px #0000004d;animation:_ngcontent-%COMP%_slideIn .7s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}@media (max-width: 768px){.forgot-password-page[_ngcontent-%COMP%]{flex-direction:column}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-left[_ngcontent-%COMP%]{padding:2rem 1.5rem}.forgot-password-page[_ngcontent-%COMP%]   .forgot-password-right[_ngcontent-%COMP%]{display:none}}"]})};function pi(r,e){r&1&&(s(0,"span"),c(1,"La contrase\xF1a es obligatoria."),a())}function ui(r,e){r&1&&(s(0,"span"),c(1,"M\xEDnimo 8 caracteres."),a())}function fi(r,e){if(r&1&&(s(0,"div",15),w(1,pi,2,0,"span",16)(2,ui,2,0,"span",16),a()),r&2){let t=h();l(),f("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),l(),f("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength)}}function hi(r,e){r&1&&(s(0,"span"),c(1,"Confirma tu contrase\xF1a."),a())}function _i(r,e){if(r&1&&(s(0,"div",15),w(1,hi,2,0,"span",16),a()),r&2){let t=h();l(),f("ngIf",t.passwordConfirmation==null||t.passwordConfirmation.errors==null?null:t.passwordConfirmation.errors.required)}}function bi(r,e){r&1&&(s(0,"div",15)(1,"span"),c(2,"Las contrase\xF1as no coinciden."),a()())}function Ci(r,e){if(r&1&&(s(0,"div",17),c(1),a()),r&2){let t=h();l(),L(" ",t.message," ")}}function vi(r,e){if(r&1&&(s(0,"div",15),c(1),a()),r&2){let t=h();l(),L(" ",t.error," ")}}var _n=class r{constructor(e,t,n,o){this.fb=e;this.auth=t;this.router=n;this.route=o;this.resetPasswordForm=this.fb.group({password:["",[Fe.required,Fe.minLength(8)]],password_confirmation:["",[Fe.required]]},{validators:this.passwordMatchValidator})}resetPasswordForm;loading=!1;message="";error="";token="";email="";ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token,this.email=e.email,(!this.token||!this.email)&&(this.error="Enlace de recuperaci\xF3n inv\xE1lido o expirado.")})}get password(){return this.resetPasswordForm.get("password")}get passwordConfirmation(){return this.resetPasswordForm.get("password_confirmation")}passwordMatchValidator(e){let t=e.get("password"),n=e.get("password_confirmation");return t&&n&&t.value!==n.value?{passwordMismatch:!0}:null}onSubmit(){if(this.resetPasswordForm.valid&&this.token&&this.email){this.loading=!0,this.error="",this.message="";let e={email:this.email,token:this.token,password:this.resetPasswordForm.value.password,password_confirmation:this.resetPasswordForm.value.password_confirmation};this.auth.resetPassword(e).subscribe({next:t=>{this.loading=!1,this.message="Tu contrase\xF1a ha sido restablecida exitosamente.",setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:t=>{this.loading=!1,this.error=t.error?.message||"Error al restablecer la contrase\xF1a."}})}}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(G(sn),G(Oe),G(ge),G(Jt))};static \u0275cmp=pe({type:r,selectors:[["app-reset-password"]],decls:27,vars:10,consts:[[1,"reset-password-page"],[1,"reset-password-left"],[3,"ngSubmit","formGroup"],[1,"input-group"],["for","password"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"disabled"],["class","error",4,"ngIf"],["for","password_confirmation"],["id","password_confirmation","type","password","formControlName","password_confirmation","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"disabled"],["class","success",4,"ngIf"],["type","submit",3,"disabled"],[1,"back-to-login"],[2,"cursor","pointer",3,"click"],[1,"reset-password-right"],["src","/img/login1.jpg","alt","Ilustraci\xF3n"],[1,"error"],[4,"ngIf"],[1,"success"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"form",2),k("ngSubmit",function(){return n.onSubmit()}),s(3,"h2"),c(4,"Nueva Contrase\xF1a"),a(),s(5,"p"),c(6,"Ingresa tu nueva contrase\xF1a para completar el proceso de recuperaci\xF3n"),a(),s(7,"div",3)(8,"label",4),c(9,"Nueva Contrase\xF1a"),a(),te(10,"input",5),w(11,fi,3,2,"div",6),a(),s(12,"div",3)(13,"label",7),c(14,"Confirmar Contrase\xF1a"),a(),te(15,"input",8),w(16,_i,2,1,"div",6)(17,bi,3,0,"div",6),a(),w(18,Ci,2,1,"div",9)(19,vi,2,1,"div",6),s(20,"button",10),c(21),a(),s(22,"div",11)(23,"a",12),k("click",function(){return n.goToLogin()}),c(24,"\u2190 Volver al inicio de sesi\xF3n"),a()()()(),s(25,"div",13),te(26,"img",14),a()()),t&2&&(l(2),f("formGroup",n.resetPasswordForm),l(8),f("disabled",n.loading),l(),f("ngIf",(n.password==null?null:n.password.touched)&&(n.password==null?null:n.password.invalid)),l(4),f("disabled",n.loading),l(),f("ngIf",(n.passwordConfirmation==null?null:n.passwordConfirmation.touched)&&(n.passwordConfirmation==null?null:n.passwordConfirmation.invalid)),l(),f("ngIf",(n.resetPasswordForm.errors==null?null:n.resetPasswordForm.errors.passwordMismatch)&&(n.passwordConfirmation==null?null:n.passwordConfirmation.touched)),l(),f("ngIf",n.message),l(),f("ngIf",n.error),l(),f("disabled",n.resetPasswordForm.invalid||n.loading||!n.token||!n.email),l(),L(" ",n.loading?"Restableciendo...":"Restablecer Contrase\xF1a"," "))},dependencies:[Me,ke,Mt,Re,Ee,De,Ie,vt,Pt,Se],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;overflow:hidden}.reset-password-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100vw;height:100vh;margin:0;padding:0;overflow:hidden;font-family:Inter,sans-serif;background:#f0f4f8}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]{flex:1;background:#fff;padding:4rem 3rem;display:flex;flex-direction:column;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .5s ease}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;margin:auto}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin-bottom:.5rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:2rem;line-height:1.6}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#2c3e50;font-weight:500}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;font-size:1rem;transition:border-color .3s ease,box-shadow .3s ease}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f8f9fa;cursor:not-allowed;opacity:.7}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;margin-top:.25rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:.75rem;border-radius:8px;margin-bottom:1rem;border:1px solid #c3e6cb;font-size:.9rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:.75rem;border-radius:8px;margin-bottom:1rem;border:1px solid #f5c6cb;font-size:.9rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.875rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:1.5rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]{text-align:center}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3498db;text-decoration:none;font-weight:500;transition:color .3s ease}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]   .back-to-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2980b9;text-decoration:underline}.reset-password-page[_ngcontent-%COMP%]   .reset-password-right[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.reset-password-page[_ngcontent-%COMP%]   .reset-password-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80%;max-height:80%;object-fit:cover;border-radius:12px;box-shadow:0 8px 24px #0000004d;animation:_ngcontent-%COMP%_slideIn .7s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}@media (max-width: 768px){.reset-password-page[_ngcontent-%COMP%]{flex-direction:column}.reset-password-page[_ngcontent-%COMP%]   .reset-password-left[_ngcontent-%COMP%]{padding:2rem 1.5rem}.reset-password-page[_ngcontent-%COMP%]   .reset-password-right[_ngcontent-%COMP%]{display:none}}"]})};function Pi(r,e){if(r&1&&(s(0,"span",20),c(1),a()),r&2){let t=h();l(),qe("",t.user.first_name," ",t.user.last_name)}}function ki(r,e){if(r&1&&(s(0,"h1"),c(1),a()),r&2){let t=h();l(),L("\xA1Bienvenido, ",t.user.first_name,"!")}}function Mi(r,e){r&1&&(s(0,"h1"),c(1,"\xA1Bienvenido a KanbanFlow!"),a())}var bn=class r{constructor(e,t){this.authService=e;this.router=t}user=null;ngOnInit(){this.loadUserData()}loadUserData(){this.authService.getUser().subscribe({next:e=>{this.user=e},error:e=>{console.error("Error loading user data:",e)}})}goToDashboard(){this.router.navigate(["/dashboard"])}goToWorkspaces(){this.router.navigate(["/workspace-list"])}onLogout(){this.authService.logout()}navigateTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||r)(G(Oe),G(ge))};static \u0275cmp=pe({type:r,selectors:[["app-home-selector"]],decls:41,vars:4,consts:[[1,"home-selector-page"],[1,"navbar"],[1,"navbar-left"],["src","assets/img/logoPrincipal.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"navbar-right"],[1,"user-menu"],["alt","Usuario",1,"avatar",3,"src"],["class","user-name",4,"ngIf"],[1,"logout-btn",3,"click"],[1,"main-content"],[1,"welcome-section"],[4,"ngIf"],[1,"subtitle"],[1,"options-container"],[1,"option-card",3,"click"],[1,"card-icon"],[1,"quick-access"],[1,"quick-buttons"],[1,"quick-btn",3,"click"],[1,"user-name"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"header",1)(2,"div",2),te(3,"img",3),s(4,"span",4),c(5,"KanbanFlow"),a()(),s(6,"div",5)(7,"div",6),te(8,"img",7),w(9,Pi,2,2,"span",8),s(10,"button",9),k("click",function(){return n.onLogout()}),c(11," \u{1F6AA} Cerrar Sesi\xF3n "),a()()()(),s(12,"main",10)(13,"div",11),w(14,ki,2,1,"h1",12)(15,Mi,2,0,"h1",12),s(16,"p",13),c(17,"\xBFQu\xE9 te gustar\xEDa hacer hoy?"),a()(),s(18,"div",14)(19,"div",15),k("click",function(){return n.navigateTo("/workspace-list")}),s(20,"div",16),c(21,"\u{1F3E2}"),a(),s(22,"h3"),c(23,"Workspaces"),a(),s(24,"p"),c(25,"Gestionar espacios de trabajo y equipos"),a()(),s(26,"div",15),k("click",function(){return n.navigateTo("/dashboard")}),s(27,"div",16),c(28,"\u{1F4CA}"),a(),s(29,"h3"),c(30,"Mis tareas"),a(),s(31,"p"),c(32,"Ver estad\xEDsticas y resumen de actividades"),a()()(),s(33,"div",17)(34,"h3"),c(35,"Accesos R\xE1pidos"),a(),s(36,"div",18)(37,"button",19),k("click",function(){return n.goToDashboard()}),c(38," \u{1F4DD} Mis Tareas "),a(),s(39,"button",19),k("click",function(){return n.goToWorkspaces()}),c(40," \u{1F4C1} Mis Workspaces "),a()()()()()),t&2&&(l(8),f("src",(n.user==null?null:n.user.avatar)||"assets/avatar.svg",ot),l(),f("ngIf",n.user),l(5),f("ngIf",n.user),l(),f("ngIf",!n.user))},dependencies:[Me,ke],styles:['.home-selector-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Inter,Segoe UI,sans-serif}.navbar[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);padding:.75rem 1.5rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:2px solid rgba(255,255,255,.3)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:20px;color:#fff;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.main-content[_ngcontent-%COMP%]{padding:3rem 2rem;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:4rem}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:3rem;font-weight:700;margin:0 0 1rem;text-shadow:0 4px 8px rgba(0,0,0,.3)}.welcome-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.3rem;font-weight:300;margin:0}.options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(450px,1fr));gap:2rem;margin-bottom:3rem}.option-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;padding:2.5rem;border:1px solid rgba(255,255,255,.2);cursor:pointer;transition:all .4s ease;text-align:center;position:relative;overflow:hidden}.option-card[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;transition:all .3s ease}.option-card[_ngcontent-%COMP%]:first-child:before{background:linear-gradient(180deg,#3b82f6,#1d4ed8)}.option-card[_ngcontent-%COMP%]:last-child:before{background:linear-gradient(180deg,#10b981,#059669)}.option-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ffffff0d;opacity:0;transition:opacity .3s ease}.option-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 40px #0000004d}.option-card[_ngcontent-%COMP%]:hover:before{opacity:1}.option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;display:block}.option-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:600;margin:0 0 1rem}.option-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:1rem;line-height:1.6;margin:0 0 2rem}.option-card[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:2rem}.option-card[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.9rem;text-align:left;padding-left:1rem;position:relative}.option-card[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:4px;background:#fff9;border-radius:50%}.option-card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;padding:1rem 2rem;border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;z-index:1}.option-card[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 15px #10b98166}.option-card[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #10b98199}.option-card[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;box-shadow:0 4px 15px #3b82f666}.option-card[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #3b82f699}.dashboard-card[_ngcontent-%COMP%]{border-left:4px solid #10b981}.workspace-card[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.quick-access[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:20px;padding:2rem;border:1px solid rgba(255,255,255,.2);text-align:center}.quick-access[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:600;margin:0 0 1.5rem}.quick-access[_ngcontent-%COMP%]   .quick-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.quick-access[_ngcontent-%COMP%]   .quick-buttons[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;padding:.75rem 1.5rem;font-size:.95rem;font-weight:500;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.quick-access[_ngcontent-%COMP%]   .quick-buttons[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 4px 20px #0003}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:2rem 1rem}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.welcome-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.options-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.option-card[_ngcontent-%COMP%]{padding:2rem}.option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:3rem}.option-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.quick-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.quick-buttons[_ngcontent-%COMP%]   .quick-btn[_ngcontent-%COMP%]{width:200px}}']})};function Oi(r,e){if(r&1&&(s(0,"span",40),c(1),a()),r&2){let t=h();l(),qe("",t.user.first_name," ",t.user.last_name)}}function xi(r,e){r&1&&(s(0,"div",41),c(1,"Cargando tus tareas..."),a())}function yi(r,e){if(r&1&&(s(0,"div",42),c(1),a()),r&2){let t=h();l(),B(t.error)}}function Ti(r,e){r&1&&(s(0,"p"),c(1,"No tienes tareas asignadas a\xFAn."),a())}function Si(r,e){r&1&&(s(0,"p"),c(1,"No hay tareas que coincidan con los filtros seleccionados."),a())}function Ei(r,e){if(r&1&&(s(0,"div",43),w(1,Ti,2,0,"p",44)(2,Si,2,0,"p",44),a()),r&2){let t=h();l(),f("ngIf",t.myTasks.length===0),l(),f("ngIf",t.myTasks.length>0)}}function Di(r,e){if(r&1&&(s(0,"span",63),c(1),a()),r&2){let t=h().$implicit,n=h(2);l(),L("\u{1F465} ",n.getTeamName(t.team_id))}}function Ii(r,e){if(r&1&&(s(0,"div",64)(1,"small"),c(2),Yt(3,"date"),a()()),r&2){let t=h().$implicit;l(2),L("Creado: ",Kt(3,1,t.created_at,"short"))}}function Ri(r,e){if(r&1){let t=se();s(0,"div",47),k("click",function(){let o=x(t).$implicit,i=h(2);return y(i.openTaskModal(o))}),s(1,"div",48)(2,"h4"),c(3),a(),s(4,"span",49),c(5),a()(),s(6,"p",50),c(7),a(),s(8,"div",51)(9,"div",52),te(10,"div",53),a(),s(11,"span",54),c(12),a()(),s(13,"div",55)(14,"div",56)(15,"span",57),c(16),a(),w(17,Di,2,1,"span",58),a(),w(18,Ii,4,4,"div",59),a(),s(19,"div",60)(20,"button",61),k("click",function(o){let i=x(t).$implicit;return h(2).openTaskModal(i),y(o.stopPropagation())}),c(21," \u270F\uFE0F Actualizar Progreso "),a(),s(22,"button",62),k("click",function(o){let i=x(t).$implicit;return h(2).goToWorkspace(i.workspace_id),y(o.stopPropagation())}),c(23," \u{1F3E2} Ir al Workspace "),a()()()}if(r&2){let t=e.$implicit,n=h(2);ye("status-"+n.getTaskStatus(t)),l(3),B(t.title),l(),ye("status-"+n.getTaskStatus(t)),l(),L(" ",n.getTaskStatus(t)==="todo"?"\u{1F4DD} Por Hacer":n.getTaskStatus(t)==="in-progress"?"\u26A1 En Progreso":"\u2705 Completada"," "),l(2),B(t.description||"Sin descripci\xF3n"),l(3),ye(n.getProgressClass(t.progress)),Rn("width",t.progress,"%"),l(2),L("",t.progress,"%"),l(4),L("\u{1F3E2} ",n.getWorkspaceName(t)),l(),f("ngIf",t.team_id),l(),f("ngIf",t.created_at)}}function Fi(r,e){if(r&1&&(s(0,"div",45),w(1,Ri,24,15,"div",46),a()),r&2){let t=h();l(),f("ngForOf",t.getFilteredTasks())}}function zi(r,e){if(r&1&&(s(0,"div",81)(1,"p")(2,"strong"),c(3,"Descripci\xF3n:"),a(),c(4),a(),s(5,"p")(6,"strong"),c(7,"Workspace:"),a(),c(8),a(),s(9,"p")(10,"strong"),c(11,"Equipo:"),a(),c(12),a()()),r&2){let t=h(2);l(4),L(" ",t.selectedTask.description||"Sin descripci\xF3n"),l(4),L(" ",t.getWorkspaceName(t.selectedTask)),l(4),L(" ",t.getTeamName(t.selectedTask.team_id))}}function Ai(r,e){r&1&&(s(0,"small",82),c(1," * Se marcar\xE1 autom\xE1ticamente como completada al llegar al 100% "),a())}function Ni(r,e){if(r&1){let t=se();s(0,"div",65),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),s(1,"div",66),k("click",function(o){return x(t),y(o.stopPropagation())}),s(2,"div",67)(3,"h3"),c(4),a(),s(5,"button",68),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),c(6,"\xD7"),a()(),w(7,zi,13,3,"div",69),s(8,"form",70),k("ngSubmit",function(){x(t);let o=h();return y(o.updateTaskProgress())}),s(9,"div",71)(10,"label",72),c(11),a(),s(12,"input",73),le("ngModelChange",function(o){x(t);let i=h();return ce(i.updatedProgress,o)||(i.updatedProgress=o),y(o)}),a(),s(13,"div",74)(14,"span"),c(15,"0%"),a(),s(16,"span"),c(17,"25%"),a(),s(18,"span"),c(19,"50%"),a(),s(20,"span"),c(21,"75%"),a(),s(22,"span"),c(23,"100%"),a()()(),s(24,"div",71)(25,"label",75)(26,"input",76),le("ngModelChange",function(o){x(t);let i=h();return ce(i.updatedIsDone,o)||(i.updatedIsDone=o),y(o)}),a(),c(27," Marcar como completada "),a(),w(28,Ai,2,0,"small",77),a(),s(29,"div",78)(30,"button",79),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),c(31," Cancelar "),a(),s(32,"button",80),c(33," \u{1F4BE} Actualizar Progreso "),a()()()()()}if(r&2){let t=h();l(4),L("Actualizar Progreso - ",t.selectedTask==null?null:t.selectedTask.title),l(3),f("ngIf",t.selectedTask),l(4),L("Progreso Actual: ",t.updatedProgress,"%"),l(),ae("ngModel",t.updatedProgress),l(14),ae("ngModel",t.updatedIsDone),l(2),f("ngIf",t.updatedProgress===100)}}var Cn=class r{constructor(e,t,n,o){this.taskService=e;this.authService=t;this.router=n;this.teamService=o}user=null;myTasks=[];loading=!0;error=null;showTaskModal=!1;selectedTask=null;updatedProgress=0;updatedIsDone=!1;filterStatus="all";searchTerm="";teams=[];ngOnInit(){this.loadUserData(),this.loadMyTasks(),this.loadTeams()}loadUserData(){this.authService.getUser().subscribe({next:e=>{this.user=e},error:e=>{console.error("Error loading user data:",e)}})}loadMyTasks(){this.loading=!0,this.error=null,this.taskService.getTasks().subscribe({next:e=>{this.myTasks=e,this.loading=!1},error:e=>{console.error("Error loading tasks:",e),this.error="Error al cargar las tareas",this.loading=!1}})}loadTeams(){this.teamService.getTeams().subscribe({next:e=>{this.teams=e},error:e=>{console.error("Error al cargar equipos:",e),this.teams=[]}})}getFilteredTasks(){let e=this.myTasks;return this.searchTerm.trim()&&(e=e.filter(t=>t.title.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description&&t.description.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filterStatus!=="all"&&(e=e.filter(t=>this.getTaskStatus(t)===this.filterStatus)),e}getTaskStatus(e){return e.is_done?"done":e.progress>0?"in-progress":"todo"}getProgressClass(e){return e===0?"progress-none":e<=25?"progress-low":e<=50?"progress-medium":e<=75?"progress-high":"progress-complete"}getWorkspaceName(e){return e.workspace&&e.workspace.name?e.workspace.name:`Workspace ${e.workspace_id}`}getTeamName(e){if(this.teams&&this.teams.length>0){let t=this.teams.find(n=>n.id===e);if(t)return t.name}return`Equipo ${e}`}openTaskModal(e){this.selectedTask=e,this.updatedProgress=e.progress,this.updatedIsDone=e.is_done,this.showTaskModal=!0}closeTaskModal(){this.showTaskModal=!1,this.selectedTask=null,this.updatedProgress=0,this.updatedIsDone=!1}updateTaskProgress(){if(!this.selectedTask)return;this.updatedProgress===100&&(this.updatedIsDone=!0);let e={progress:this.updatedProgress,is_done:this.updatedIsDone};this.taskService.updateTask(this.selectedTask.id,e).subscribe({next:()=>{this.selectedTask.progress=this.updatedProgress,this.selectedTask.is_done=this.updatedIsDone,this.loadMyTasks(),this.closeTaskModal()},error:t=>{console.error("Error al actualizar progreso:",t),this.error="Error al actualizar el progreso de la tarea"}})}goToWorkspace(e){this.router.navigate(["/workspace",e])}goToHome(){this.router.navigate(["/home"])}goToWorkspaces(){this.router.navigate(["/workspace-list"])}refresh(){this.loadMyTasks()}getTodoTasksCount(){return this.myTasks.filter(e=>this.getTaskStatus(e)==="todo").length}getInProgressTasksCount(){return this.myTasks.filter(e=>this.getTaskStatus(e)==="in-progress").length}getDoneTasksCount(){return this.myTasks.filter(e=>this.getTaskStatus(e)==="done").length}onLogout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(G(an),G(Oe),G(ge),G(wt))};static \u0275cmp=pe({type:r,selectors:[["app-dashboard"]],decls:75,vars:13,consts:[[1,"dashboard-page"],[1,"navbar"],[1,"navbar-left"],[1,"back-btn",3,"click"],["src","assets/img/logoPrincipal.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"section-name"],[1,"navbar-center"],["type","text","placeholder","Buscar mis tareas...",1,"search-bar",3,"ngModelChange","ngModel"],[1,"navbar-right"],[1,"user-menu"],["alt","Usuario",1,"avatar",3,"src"],["class","user-name",4,"ngIf"],[1,"dropdown"],["href","#"],["href","#",3,"click"],[1,"main-content"],[1,"content-header"],[1,"dashboard-description"],[1,"action-buttons"],[1,"refresh-btn",3,"click"],[1,"workspaces-btn",3,"click"],[1,"filters-section"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","todo"],["value","in-progress"],["value","done"],[1,"stats-section"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"tasks-section"],[1,"loading-error"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","no-tasks-message",4,"ngIf"],["class","tasks-grid",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"user-name"],[1,"loading"],[1,"error"],[1,"no-tasks-message"],[4,"ngIf"],[1,"tasks-grid"],["class","task-card",3,"class","click",4,"ngFor","ngForOf"],[1,"task-card",3,"click"],[1,"task-header"],[1,"status-badge"],[1,"task-description"],[1,"task-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"task-meta"],[1,"workspace-info"],[1,"workspace-name"],["class","team-name",4,"ngIf"],["class","task-dates",4,"ngIf"],[1,"task-actions"],[1,"edit-btn",3,"click"],[1,"workspace-btn",3,"click"],[1,"team-name"],[1,"task-dates"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","task-details",4,"ngIf"],[1,"progress-form",3,"ngSubmit"],[1,"form-group"],["for","progress"],["type","range","id","progress","name","progress","min","0","max","100","step","5",1,"progress-slider",3,"ngModelChange","ngModel"],[1,"progress-marks"],[1,"checkbox-label"],["type","checkbox","name","isDone",3,"ngModelChange","ngModel"],["class","auto-complete-note",4,"ngIf"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn"],[1,"task-details"],[1,"auto-complete-note"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),k("click",function(){return n.goToHome()}),c(4,"\u2190 Inicio"),a(),te(5,"img",4),s(6,"span",5),c(7,"KanbanFlow"),a(),s(8,"span",6),c(9,"- Mis tareas"),a()(),s(10,"div",7)(11,"input",8),le("ngModelChange",function(i){return ce(n.searchTerm,i)||(n.searchTerm=i),i}),a()(),s(12,"div",9)(13,"div",10),te(14,"img",11),w(15,Oi,2,2,"span",12),s(16,"div",13)(17,"a",14),c(18,"Mi Perfil"),a(),s(19,"a",15),k("click",function(i){return n.goToWorkspaces(),i.preventDefault()}),c(20,"Mis Workspaces"),a(),s(21,"a",15),k("click",function(i){return n.onLogout(),i.preventDefault()}),c(22,"Cerrar Sesi\xF3n"),a()()()()(),s(23,"main",16)(24,"div",17)(25,"h2"),c(26,"Mis tareas"),a(),s(27,"p",18),c(28,"Gestiona tus tareas asignadas y actualiza tu progreso"),a(),s(29,"div",19)(30,"button",20),k("click",function(){return n.refresh()}),c(31,"\u{1F504} Actualizar"),a(),s(32,"button",21),k("click",function(){return n.goToWorkspaces()}),c(33,"\u{1F4C1} Mis Workspaces"),a()()(),s(34,"div",22)(35,"div",23)(36,"label"),c(37,"Filtrar por estado:"),a(),s(38,"select",24),le("ngModelChange",function(i){return ce(n.filterStatus,i)||(n.filterStatus=i),i}),s(39,"option",25),c(40,"Todas las tareas"),a(),s(41,"option",26),c(42,"\u{1F4DD} Por hacer"),a(),s(43,"option",27),c(44,"\u26A1 En progreso"),a(),s(45,"option",28),c(46,"\u2705 Completadas"),a()()()(),s(47,"div",29)(48,"div",30)(49,"div",31),c(50),a(),s(51,"div",32),c(52,"Total de Tareas"),a()(),s(53,"div",30)(54,"div",31),c(55),a(),s(56,"div",32),c(57,"Por Hacer"),a()(),s(58,"div",30)(59,"div",31),c(60),a(),s(61,"div",32),c(62,"En Progreso"),a()(),s(63,"div",30)(64,"div",31),c(65),a(),s(66,"div",32),c(67,"Completadas"),a()()(),s(68,"div",33)(69,"div",34),w(70,xi,2,0,"div",35)(71,yi,2,1,"div",36),a(),w(72,Ei,3,2,"div",37)(73,Fi,2,1,"div",38),a()(),w(74,Ni,34,6,"div",39),a()),t&2&&(l(11),ae("ngModel",n.searchTerm),l(3),f("src",(n.user==null?null:n.user.avatar)||"assets/avatar.svg",ot),l(),f("ngIf",n.user),l(23),ae("ngModel",n.filterStatus),l(12),B(n.myTasks.length),l(5),B(n.getTodoTasksCount()),l(5),B(n.getInProgressTasksCount()),l(5),B(n.getDoneTasksCount()),l(5),f("ngIf",n.loading),l(),f("ngIf",n.error),l(),f("ngIf",!n.loading&&n.getFilteredTasks().length===0),l(),f("ngIf",!n.loading&&n.getFilteredTasks().length>0),l(),f("ngIf",n.showTaskModal))},dependencies:[Me,_t,ke,at,Re,rn,on,Ee,tn,Ct,nn,De,Ie,st,it,Xt],styles:[".dashboard-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Inter,Segoe UI,sans-serif}.navbar[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);padding:.75rem 1.5rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:20px;color:#fff;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .section-name[_ngcontent-%COMP%]{font-size:1rem;color:#fffc}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{flex:1;max-width:400px;margin:0 2rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;font-size:.9rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffffff80;background:#fff3}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;position:relative}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:2px solid rgba(255,255,255,.3)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:12px;padding:.5rem 0;min-width:180px;box-shadow:0 8px 32px #0000004d;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:#333;text-decoration:none;font-size:.9rem;transition:background-color .2s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#677eea1a}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]:hover   .dropdown[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.main-content[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.content-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;margin:0 0 .5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.content-header[_ngcontent-%COMP%]   .dashboard-description[_ngcontent-%COMP%]{color:#fffc;font-size:1.1rem;margin:0 0 2rem}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;font-weight:500;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 4px 20px #0003}.filters-section[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:1.5rem;margin-bottom:2rem;border:1px solid rgba(255,255,255,.2)}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;white-space:nowrap}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;color:#fff;font-size:.9rem;cursor:pointer}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#333;color:#fff}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffffff80}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:2rem;text-align:center;border:1px solid rgba(255,255,255,.2);transition:all .3s ease}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0003}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#fff;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#fffc;font-size:1rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.tasks-section[_ngcontent-%COMP%]{margin-bottom:3rem}.tasks-section[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .tasks-section[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#fff;font-size:1.1rem}.tasks-section[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ff6b6b}.tasks-section[_ngcontent-%COMP%]   .no-tasks-message[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;border:1px solid rgba(255,255,255,.2)}.tasks-section[_ngcontent-%COMP%]   .no-tasks-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:1.2rem;margin:0}.tasks-section[_ngcontent-%COMP%]   .tasks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:1.5rem;border:1px solid rgba(255,255,255,.2);cursor:pointer;transition:all .3s ease}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0003;background:#ffffff26}.tasks-section[_ngcontent-%COMP%]   .task-card.status-todo[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.tasks-section[_ngcontent-%COMP%]   .task-card.status-in-progress[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.tasks-section[_ngcontent-%COMP%]   .task-card.status-done[_ngcontent-%COMP%]{border-left:4px solid #10b981}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-weight:600;margin:0;flex:1}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:500;white-space:nowrap;margin-left:1rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .status-badge.status-todo[_ngcontent-%COMP%]{background:#3b82f633;color:#93c5fd}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .status-badge.status-in-progress[_ngcontent-%COMP%]{background:#f59e0b33;color:#fbbf24}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .status-badge.status-done[_ngcontent-%COMP%]{background:#10b98133;color:#6ee7b7}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem;line-height:1.5;margin-bottom:1rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]{margin-bottom:1rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#fff3;border-radius:4px;overflow:hidden;margin-bottom:.5rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.none[_ngcontent-%COMP%]{background:#6b7280}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.low[_ngcontent-%COMP%]{background:#ef4444}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.medium[_ngcontent-%COMP%]{background:#f59e0b}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.high[_ngcontent-%COMP%]{background:#3b82f6}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.complete[_ngcontent-%COMP%]{background:#10b981}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;font-weight:500}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]{margin-bottom:1rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;margin-bottom:.5rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]   .workspace-name[_ngcontent-%COMP%], .tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.8rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-meta[_ngcontent-%COMP%]   .task-dates[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#fff9;font-size:.75rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;color:#fff;font-size:.8rem;cursor:pointer;transition:all .3s ease;flex:1}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-1px)}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%]   button.edit-btn[_ngcontent-%COMP%]:hover{background:#3b82f64d}.tasks-section[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%]   button.workspace-btn[_ngcontent-%COMP%]:hover{background:#10b9814d}.teams-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:600;margin-bottom:1.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.teams-section[_ngcontent-%COMP%]   .teams-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:1.5rem;border:1px solid rgba(255,255,255,.2);transition:all .3s ease}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0003}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-weight:600;margin:0 0 .5rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .workspace-name[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.9rem;margin-bottom:1rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]{margin-bottom:1rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .workspace-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#10b98133;border:1px solid rgba(16,185,129,.4);border-radius:8px;color:#6ee7b7;font-weight:500;cursor:pointer;transition:all .3s ease}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .workspace-btn[_ngcontent-%COMP%]:hover{background:#10b9814d;transform:translateY(-2px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:20px;padding:2rem;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid rgba(0,0,0,.1)}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:1.5rem;font-weight:600;margin:0}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#0000001a;color:#333}.modal-content[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]{background:#677eea1a;border-radius:12px;padding:1rem;margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#333;font-size:.9rem}.modal-content[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#333;font-weight:500;margin-bottom:.5rem;font-size:1rem}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{width:100%;height:8px;border-radius:4px;background:#e5e7eb;outline:none;margin-bottom:1rem;cursor:pointer}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:#667eea;cursor:pointer;box-shadow:0 2px 6px #0000004d;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#667eea;cursor:pointer;border:none;box-shadow:0 2px 6px #0000004d}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-marks[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#666;font-size:.8rem;margin-top:.5rem}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:400}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   .progress-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .auto-complete-note[_ngcontent-%COMP%]{display:block;color:#667eea;font-size:.8rem;margin-top:.5rem;font-style:italic}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;border:none}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]:hover{background:#d1d5db}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]{background:#667eea;color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-2px);box-shadow:0 4px 20px #667eea66}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{order:3;margin:0;max-width:none}.main-content[_ngcontent-%COMP%]{padding:1rem}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.stats-section[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.tasks-grid[_ngcontent-%COMP%], .teams-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.modal-content[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}}"]})};var gt=class r{constructor(e){this.http=e}baseUrl="http://127.0.0.1:8000/api";createWorkspace(e){let t=this.createAuthHeaders();return this.http.post(`${this.baseUrl}/workspaces`,e,{headers:t})}getWorkspaces(){let e=this.createAuthHeaders();return this.http.get(`${this.baseUrl}/workspaces`,{headers:e})}getWorkspace(e){let t=this.createAuthHeaders();return this.http.get(`${this.baseUrl}/workspaces/${e}`,{headers:t})}updateWorkspace(e,t){let n=this.createAuthHeaders();return this.http.put(`${this.baseUrl}/workspaces/${e}`,t,{headers:n})}deleteWorkspace(e){let t=this.createAuthHeaders();return this.http.delete(`${this.baseUrl}/workspaces/${e}`,{headers:t})}getMemberWorkspaces(){let e=this.createAuthHeaders();return this.http.get(`${this.baseUrl}/member-workspaces`,{headers:e})}getOwnWorkspaces(){let e=this.createAuthHeaders();return this.http.get(`${this.baseUrl}/own-workspaces`,{headers:e})}getWorkspaceTasks(e){let t=this.createAuthHeaders(),n=`${this.baseUrl}/workspaces/${e}/tasks`;return console.log("\u{1F310} Realizando petici\xF3n GET a:",n),console.log("\u{1F510} Con token:",localStorage.getItem("token")?.substring(0,20)+"..."),this.http.get(n,{headers:t})}getAvailableUsersForTeam(e){let t=this.createAuthHeaders();return this.http.get(`${this.baseUrl}/teams/${e}/available-users`,{headers:t})}addMemberToTeam(e,t,n){let o=this.createAuthHeaders();return this.http.post(`${this.baseUrl}/teams/${e}/members`,{user_id:t,role:n},{headers:o})}removeMemberFromTeam(e,t){let n=this.createAuthHeaders();return this.http.delete(`${this.baseUrl}/teams/${e}/members/${t}`,{headers:n})}createAuthHeaders(){let e=localStorage.getItem("token"),t={"Content-Type":"application/json",Accept:"application/json"};return e?(t.Authorization=`Bearer ${e}`,console.log("\u{1F510} Headers con token agregado:",e.substring(0,20)+"...")):console.log("\u26A0\uFE0F No se encontr\xF3 token de autenticaci\xF3n"),t}static \u0275fac=function(t){return new(t||r)(Ue(bt))};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})};var yt=class r{constructor(e){this.http=e}apiUrl="http://127.0.0.1:8000/api";getAuthHeaders(){let e=localStorage.getItem("token");return new Qt({Authorization:`Bearer ${e}`})}createAuthHeaders(){let e=localStorage.getItem("token"),t={"Content-Type":"application/json",Accept:"application/json"};return e?(t.Authorization=`Bearer ${e}`,console.log("\u{1F510} UserService - Headers con token agregado")):console.log("\u26A0\uFE0F UserService - No se encontr\xF3 token de autenticaci\xF3n"),t}getUser(){let e=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/user`,{headers:e})}getUsers(){let e=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/users`,{headers:e})}updateProfile(e){let t=this.getAuthHeaders();return this.http.put(`${this.apiUrl}/user/profile`,e,{headers:t})}static \u0275fac=function(t){return new(t||r)(Ue(bt))};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})};function Li(r,e){if(r&1&&(s(0,"span",33),c(1),a()),r&2){let t=h();l(),qe("",t.user.first_name," ",t.user.last_name)}}function Wi(r,e){r&1&&(s(0,"div",34),c(1,"Cargando workspaces..."),a())}function Vi(r,e){if(r&1&&(s(0,"div",35),c(1),a()),r&2){let t=h();l(),B(t.error)}}function Ui(r,e){if(r&1){let t=se();s(0,"div",36)(1,"div",37)(2,"div",38),c(3,"\u{1F4C2}"),a(),s(4,"h3"),c(5,"No tienes workspaces"),a(),s(6,"p"),c(7,"Crea tu primer workspace o pide a alguien que te agregue a un equipo"),a(),s(8,"button",22),k("click",function(){x(t);let o=h();return y(o.createWorkspace())}),c(9,"+ Crear mi primer Workspace"),a()()()}}function Bi(r,e){if(r&1){let t=se();s(0,"div",39)(1,"div",40)(2,"div",41),c(3,"\u2139\uFE0F"),a(),s(4,"div",42)(5,"h4"),c(6,"\xA1Bienvenido a los workspaces compartidos!"),a(),s(7,"p"),c(8),a()(),s(9,"button",43),k("click",function(){x(t);let o=h();return y(o.createWorkspace())}),c(10,"+ Crear mi Workspace"),a()()()}if(r&2){let t=h();l(8),L("Actualmente no tienes workspaces propios, pero perteneces a ",t.memberWorkspaces.length," workspace(s) compartido(s). Puedes crear tu propio workspace cuando quieras.")}}function ji(r,e){if(r&1){let t=se();s(0,"div",47)(1,"div",48)(2,"h4"),c(3),a(),s(4,"div",49)(5,"button",50),k("click",function(){let o=x(t).$implicit,i=h(2);return y(i.editWorkspace(o.id))}),c(6,"\u270F\uFE0F"),a(),s(7,"button",51),k("click",function(o){let i=x(t).$implicit,d=h(2);return y(d.deleteWorkspace(i.id,o))}),c(8,"\u{1F5D1}\uFE0F"),a()()(),s(9,"p",18),c(10),a(),s(11,"div",52)(12,"span",53),c(13,"\u{1F451} Propietario"),a(),s(14,"span",54),c(15),Yt(16,"date"),a()(),s(17,"button",55),k("click",function(){let o=x(t).$implicit,i=h(2);return y(i.enterWorkspace(o.id))}),c(18," \u{1F680} Gestionar Workspace "),a()()}if(r&2){let t=e.$implicit;l(3),B(t.name),l(7),B(t.description||"Sin descripci\xF3n"),l(5),L("Creado: ",Kt(16,3,t.created_at,"short"))}}function Hi(r,e){if(r&1&&(s(0,"section",44)(1,"h3"),c(2,"\u{1F4C1} Mis Workspaces Creados"),a(),s(3,"div",45),w(4,ji,19,6,"div",46),a()()),r&2){let t=h();l(4),f("ngForOf",t.ownWorkspaces)}}function qi(r,e){r&1&&(s(0,"span"),c(1,"\uFFFD Gestionar Workspace"),a())}function Gi(r,e){r&1&&(s(0,"span"),c(1,"\u{1F440} Ver Mis Tareas"),a())}function Zi(r,e){if(r&1){let t=se();s(0,"div",59)(1,"div",60),k("click",function(){let o=x(t).$implicit,i=h(2);return y(i.enterWorkspace(o.id))}),s(2,"div",48)(3,"div",61)(4,"h4"),c(5),a(),s(6,"span",62),c(7),a()(),s(8,"div",63)(9,"span",64),c(10),a()()(),s(11,"p",18),c(12),a(),s(13,"div",49)(14,"button",55),k("click",function(o){let i=x(t).$implicit;return h(2).enterWorkspace(i.id),y(o.stopPropagation())}),w(15,qi,2,0,"span",65)(16,Gi,2,0,"span",65),a(),s(17,"button",66),k("click",function(o){let i=x(t).$implicit;return h(2).showWorkspaceInfo(i),y(o.stopPropagation())}),c(18," \u2139\uFE0F M\xE1s info "),a()()()()}if(r&2){let t=e.$implicit;ye(t.userRole==="leader"?"leader":"member"),l(5),B(t.name),l(),ye(t.userRole),l(),L(" ",t.userRole==="leader"?"\u{1F464} L\xEDder de Equipo":"\u{1F464} Miembro de Equipo"," "),l(2),ye(t.userRole==="leader"?"management":"readonly"),l(),L(" ",t.userRole==="leader"?"\u26A1 Gesti\xF3n":"\u{1F441}\uFE0F Solo lectura"," "),l(2),B(t.description||"Sin descripci\xF3n"),l(2),ye(t.userRole==="leader"?"management":"view-only"),l(),f("ngIf",t.userRole==="leader"),l(),f("ngIf",t.userRole==="member")}}function $i(r,e){if(r&1&&(s(0,"section",44)(1,"h3"),c(2,"\u{1F465} Workspaces Compartidos"),a(),s(3,"p",56),c(4,"Workspaces donde pertenezco a equipos como l\xEDder o miembro"),a(),s(5,"div",57),w(6,Zi,19,14,"div",58),a()()),r&2){let t=h();l(6),f("ngForOf",t.memberWorkspaces)}}var vn=class r{constructor(e,t,n,o,i){this.workspaceService=e;this.teamService=t;this.router=n;this.auth=o;this.userService=i}workspaces=[];ownWorkspaces=[];memberWorkspaces=[];error="";showDropdown=!1;user=null;loading=!1;ngOnInit(){this.loadUserAndWorkspaces()}loadUserAndWorkspaces(){this.loading=!0,this.error="",this.userService.getUser().subscribe({next:e=>{this.user=e,this.loadWorkspaces()},error:e=>{console.error("Error al cargar usuario:",e),this.user=null,this.error="Error al cargar informaci\xF3n del usuario",this.loading=!1}})}loadWorkspaces(){this.loading=!0,this.error="",this.workspaceService.getWorkspaces().subscribe({next:e=>{this.ownWorkspaces=e||[],console.log("Workspaces propios cargados:",this.ownWorkspaces),this.loadMemberWorkspaces(),this.loading=!1},error:e=>{console.error("Error al cargar workspaces propios:",e),this.ownWorkspaces=[],this.loadMemberWorkspaces(),this.loading=!1,e.status!==404&&(this.error="Error al cargar algunos workspaces")}})}loadMemberWorkspaces(){this.loadMemberWorkspacesFromTeams()}loadMemberWorkspacesFromTeams(){if(!this.user){console.error("Usuario no disponible para verificar membres\xEDa"),this.memberWorkspaces=[];return}this.teamService.getTeams().subscribe({next:e=>{let t=e.filter(o=>o.users?.some(i=>i.id===this.user.id));if(console.log("Equipos donde el usuario es miembro:",t),t.length===0){this.memberWorkspaces=[],console.log("Usuario no pertenece a ning\xFAn equipo");return}let n=[...new Set(t.map(o=>o.workspace_id))];console.log("IDs de workspaces donde es miembro:",n),this.loadWorkspaceDetails(n,t)},error:e=>{console.error("Error al cargar equipos:",e),this.memberWorkspaces=[]}})}loadWorkspaceDetails(e,t){let n=e.map(o=>this.workspaceService.getWorkspace(o).toPromise().catch(i=>(console.error(`Error al cargar workspace ${o}:`,i),null)));Promise.all(n).then(o=>{let i=o.filter(d=>d!==null);this.memberWorkspaces=i.map(d=>{let m=t.filter(b=>b.workspace_id===d.id),_="member";for(let b of m)if(b.users){let C=b.users.find(T=>T.id===this.user.id);if(C&&C.pivot.role==="leader"){_="leader";break}}return ht(rt({},d),{userRole:_})})}).catch(o=>{console.error("Error al cargar detalles de workspaces:",o),this.memberWorkspaces=[]})}createWorkspace(){this.router.navigate(["/workspace-form"])}goToWorkspace(e){this.router.navigate(["/workspace",e])}editWorkspace(e){this.router.navigate(["/workspace-form"],{queryParams:{id:e}})}enterWorkspace(e){console.log("Entrando al workspace:",e);let t=this.memberWorkspaces.find(o=>o.id===e);this.ownWorkspaces.find(o=>o.id===e)?(console.log("\u{1F451} Propietario - Navegando a pizarra completa"),this.router.navigate(["/workspace",e])):t?t.userRole==="leader"?(console.log("\u{1F3C6} L\xEDder - Navegando a pizarra completa"),this.router.navigate(["/workspace",e])):(console.log("\u{1F464} Miembro - Navegando a modo viewer"),this.router.navigate(["/workspace-viewer",e])):console.error("No se encontr\xF3 el workspace o no tienes permisos")}getCreatorName(e){return e?typeof e=="object"&&e.first_name?`${e.first_name} ${e.last_name}`:`Usuario ${e}`:""}deleteWorkspace(e,t){t.stopPropagation(),confirm("\xBFEst\xE1s seguro de que quieres eliminar este workspace?")&&this.workspaceService.deleteWorkspace(e).subscribe({next:()=>{this.ownWorkspaces=this.ownWorkspaces.filter(n=>n.id!==e),this.memberWorkspaces=this.memberWorkspaces.filter(n=>n.id!==e)},error:n=>{console.error("Error al eliminar workspace:",n),this.error="Error al eliminar el workspace"}})}onLogout(){this.auth.logout()}goToHome(){this.router.navigate(["/home"])}goToDashboard(){this.router.navigate(["/dashboard"])}refresh(){this.loadUserAndWorkspaces()}getCreatedByMeCount(){return this.ownWorkspaces.length}getSharedWithMeCount(){return this.memberWorkspaces.length}isOwner(e){return this.ownWorkspaces.some(t=>t.id===e.id)}isMember(e){return this.memberWorkspaces.some(t=>t.id===e.id)}navigateToWorkspace(e){this.enterWorkspace(e.id)}showWorkspaceInfo(e){let t=e.userRole==="leader"?{title:"L\xEDder de Equipo",permissions:`Como l\xEDder de equipo en este workspace, puedes:
\u2022 Crear y gestionar tareas
\u2022 Asignar tareas a miembros del equipo
\u2022 Administrar miembros de tu equipo
\u2022 Ver todas las tareas y su progreso
\u2022 Actualizar el progreso de cualquier tarea

No puedes:
\u2022 Eliminar el workspace (solo el propietario)
\u2022 Crear nuevos equipos
\u2022 Gestionar otros equipos donde no eres l\xEDder`}:{title:"Miembro de Equipo",permissions:`Como miembro de equipo en este workspace, puedes:
\u2022 Ver todas las tareas y su progreso
\u2022 Consultar informaci\xF3n de equipos
\u2022 Actualizar el progreso de tus tareas asignadas
\u2022 Ver miembros de todos los equipos

No puedes:
\u2022 Crear nuevos equipos o tareas
\u2022 Eliminar elementos
\u2022 Gestionar miembros de equipos
\u2022 Asignar tareas a otros usuarios`};alert(`
Informaci\xF3n del Workspace:

\u{1F4C1} Nombre: ${e.name}
\u{1F4DD} Descripci\xF3n: ${e.description||"Sin descripci\xF3n"}
\u{1F464} Tu rol: ${t.title}
\u{1F4C5} Creado: ${e.created_at?new Date(e.created_at).toLocaleDateString():"Fecha no disponible"}

${t.permissions}
    `)}debugAuthToken(){console.log("=== DEBUG TOKEN WORKSPACE-LIST ===");let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(console.log("\u{1F510} Token encontrado:",!!e),console.log("\u{1F464} Usuario encontrado:",!!t),e?(console.log("\u{1F510} Token preview:",e.substring(0,30)+"..."),console.log("\u{1F510} Token length:",e.length),e.includes("|")?console.log("\u2705 Token parece tener formato Sanctum correcto"):console.log("\u26A0\uFE0F Token no parece tener formato Sanctum")):console.log("\u274C No hay token disponible"),t)try{let n=JSON.parse(t);console.log("\u{1F464} Usuario ID:",n.id),console.log("\u{1F464} Usuario email:",n.email)}catch{console.log("\u274C Error al parsear datos del usuario")}console.log("===========================")}static \u0275fac=function(t){return new(t||r)(G(gt),G(wt),G(ge),G(Oe),G(yt))};static \u0275cmp=pe({type:r,selectors:[["app-workspace-list"]],decls:59,vars:11,consts:[[1,"workspace-page"],[1,"navbar"],[1,"navbar-left"],[1,"back-btn",3,"click"],["src","assets/img/logoPrincipal.png","alt","Logo",1,"logo"],[1,"app-name"],[1,"section-name"],[1,"navbar-center"],["type","text","placeholder","Buscar workspaces...",1,"search-bar"],[1,"navbar-right"],[1,"user-menu"],["alt","Usuario",1,"avatar",3,"src"],["class","user-name",4,"ngIf"],[1,"dropdown"],["href","#"],["href","#",3,"click"],[1,"main-content"],[1,"content-header"],[1,"workspace-description"],[1,"action-buttons"],[1,"refresh-btn",3,"click"],[1,"dashboard-btn",3,"click"],[1,"create-btn",3,"click"],[1,"stats-section"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"loading-error"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","no-workspaces-message",4,"ngIf"],["class","info-message",4,"ngIf"],["class","workspaces-section",4,"ngIf"],[1,"user-name"],[1,"loading"],[1,"error"],[1,"no-workspaces-message"],[1,"empty-state"],[1,"empty-icon"],[1,"info-message"],[1,"info-content"],[1,"info-icon"],[1,"info-text"],[1,"create-btn","secondary",3,"click"],[1,"workspaces-section"],[1,"workspaces-grid"],["class","workspace-card owner",4,"ngFor","ngForOf"],[1,"workspace-card","owner"],[1,"workspace-header"],[1,"workspace-actions"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"workspace-meta"],[1,"role-badge","owner"],[1,"created-date"],[1,"enter-btn",3,"click"],[1,"section-description"],[1,"workspaces-list"],["class","workspace-item",3,"class",4,"ngFor","ngForOf"],[1,"workspace-item"],[1,"workspace-content",3,"click"],[1,"workspace-title"],[1,"role-badge"],[1,"workspace-status"],[1,"status-indicator"],[4,"ngIf"],[1,"info-btn",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),k("click",function(){return n.goToHome()}),c(4,"\u2190 Inicio"),a(),te(5,"img",4),s(6,"span",5),c(7,"KanbanFlow"),a(),s(8,"span",6),c(9,"- Gesti\xF3n de Workspaces"),a()(),s(10,"div",7),te(11,"input",8),a(),s(12,"div",9)(13,"div",10),te(14,"img",11),w(15,Li,2,2,"span",12),s(16,"div",13)(17,"a",14),c(18,"Mi Perfil"),a(),s(19,"a",15),k("click",function(i){return n.goToDashboard(),i.preventDefault()}),c(20,"Mi Dashboard"),a(),s(21,"a",15),k("click",function(i){return n.onLogout(),i.preventDefault()}),c(22,"Cerrar Sesi\xF3n"),a()()()()(),s(23,"main",16)(24,"div",17)(25,"h2"),c(26,"Gesti\xF3n de Workspaces"),a(),s(27,"p",18),c(28,"Crea y administra tus espacios de trabajo, equipos y proyectos"),a(),s(29,"div",19)(30,"button",20),k("click",function(){return n.refresh()}),c(31,"\u{1F504} Actualizar"),a(),s(32,"button",21),k("click",function(){return n.goToDashboard()}),c(33,"\u{1F4CA} Mis Tareas"),a(),s(34,"button",22),k("click",function(){return n.createWorkspace()}),c(35,"+ Crear Workspace"),a()()(),s(36,"div",23)(37,"div",24)(38,"div",25),c(39),a(),s(40,"div",26),c(41,"Total Workspaces"),a()(),s(42,"div",24)(43,"div",25),c(44),a(),s(45,"div",26),c(46,"Creados por m\xED"),a()(),s(47,"div",24)(48,"div",25),c(49),a(),s(50,"div",26),c(51,"Compartidos conmigo"),a()()(),s(52,"div",27),w(53,Wi,2,0,"div",28)(54,Vi,2,1,"div",29),a(),w(55,Ui,10,0,"div",30)(56,Bi,11,1,"div",31)(57,Hi,5,1,"section",32)(58,$i,7,1,"section",32),a()()),t&2&&(l(14),f("src",(n.user==null?null:n.user.avatar)||"assets/avatar.svg",ot),l(),f("ngIf",n.user),l(24),B(n.ownWorkspaces.length+n.memberWorkspaces.length),l(5),B(n.getCreatedByMeCount()),l(5),B(n.getSharedWithMeCount()),l(4),f("ngIf",n.loading),l(),f("ngIf",n.error),l(),f("ngIf",!n.loading&&!n.error&&n.ownWorkspaces.length===0&&n.memberWorkspaces.length===0),l(),f("ngIf",!n.loading&&!n.error&&n.ownWorkspaces.length===0&&n.memberWorkspaces.length>0),l(),f("ngIf",n.ownWorkspaces.length>0),l(),f("ngIf",n.memberWorkspaces.length>0))},dependencies:[Me,_t,ke,Se,Xt],styles:[".workspace-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Inter,Segoe UI,sans-serif}.navbar[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);padding:.75rem 1.5rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:20px;color:#fff;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .section-name[_ngcontent-%COMP%]{font-size:1rem;color:#fffc}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{flex:1;max-width:400px;margin:0 2rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;font-size:.9rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffffff80;background:#fff3}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]{background:#ffffff26;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;cursor:pointer;transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:scale(1.05)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;position:relative}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:2px solid rgba(255,255,255,.3)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:12px;padding:.5rem 0;min-width:180px;box-shadow:0 8px 32px #0000004d;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:#333;text-decoration:none;font-size:.9rem;transition:background-color .2s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#677eea1a}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]:hover   .dropdown[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.main-content[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.content-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;margin:0 0 .5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.content-header[_ngcontent-%COMP%]   .workspace-description[_ngcontent-%COMP%]{color:#fffc;font-size:1.1rem;margin:0 0 2rem}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;font-weight:500;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px);box-shadow:0 4px 20px #0003}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button.create-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);border-color:#10b98166;box-shadow:0 4px 15px #10b98166}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button.create-btn[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #10b98199}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button.dashboard-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);border-color:#3b82f666;box-shadow:0 4px 15px #3b82f666}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button.dashboard-btn[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #3b82f699}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:2rem;text-align:center;border:1px solid rgba(255,255,255,.2);transition:all .3s ease}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0003}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#fff;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#fffc;font-size:1rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.loading-error[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#ff6b6b;font-size:1.1rem}.no-workspaces-message[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;border:1px solid rgba(255,255,255,.2)}.no-workspaces-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:1.2rem;margin:0}.workspaces-section[_ngcontent-%COMP%]{margin-bottom:2rem}.workspaces-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem;font-size:1.2rem;display:flex;align-items:center;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspaces-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:1.5rem;border:1px solid rgba(255,255,255,.2);cursor:pointer;transition:all .3s ease;border-left:4px solid #3b82f6}.workspaces-section[_ngcontent-%COMP%]   .workspace-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0003;background:#ffffff26}.workspaces-section[_ngcontent-%COMP%]   .workspace-card.owner[_ngcontent-%COMP%]{border-left:4px solid #10b981}.workspaces-section[_ngcontent-%COMP%]   .workspace-card.owner[_ngcontent-%COMP%]   .role-badge.owner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.workspaces-section[_ngcontent-%COMP%]   .workspace-card.member[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.workspaces-section[_ngcontent-%COMP%]   .workspace-card.member[_ngcontent-%COMP%]   .role-badge.member[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff}.workspaces-section[_ngcontent-%COMP%]   .workspaces-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:1rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease;border-left:4px solid transparent}.workspaces-section[_ngcontent-%COMP%]   .workspace-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.workspaces-section[_ngcontent-%COMP%]   .workspace-item.member[_ngcontent-%COMP%]{border-left-color:#3b82f6}.workspaces-section[_ngcontent-%COMP%]   .workspace-item.leader[_ngcontent-%COMP%]{border-left-color:#10b981}.workspaces-section[_ngcontent-%COMP%]   .workspace-item.leader[_ngcontent-%COMP%]   .role-badge.leader[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.workspaces-section[_ngcontent-%COMP%]   .workspace-content[_ngcontent-%COMP%]{padding:1.5rem;cursor:pointer}.workspaces-section[_ngcontent-%COMP%]   .workspace-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-header[_ngcontent-%COMP%]   .workspace-title[_ngcontent-%COMP%]{flex:1}.workspaces-section[_ngcontent-%COMP%]   .workspace-header[_ngcontent-%COMP%]   .workspace-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#1f2937;font-size:1.25rem;font-weight:600}.workspaces-section[_ngcontent-%COMP%]   .workspace-header[_ngcontent-%COMP%]   .workspace-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .status-indicator.readonly[_ngcontent-%COMP%]{background:#6b72801a;color:#6b7280;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500}.workspaces-section[_ngcontent-%COMP%]   .status-indicator.management[_ngcontent-%COMP%]{background:#10b9811a;color:#059669;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500}.workspaces-section[_ngcontent-%COMP%]   .role-badge.member[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;padding:.25rem .75rem;border-radius:16px;font-size:.75rem;font-weight:600;display:inline-flex;align-items:center;gap:.25rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-description[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:1rem;line-height:1.5}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;padding:1rem;background:#f3f4f680;border-radius:8px}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#6b7280;font-size:.875rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]   .workspace-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]   .workspace-permissions[_ngcontent-%COMP%]{text-align:right}.workspaces-section[_ngcontent-%COMP%]   .workspace-meta[_ngcontent-%COMP%]   .workspace-permissions[_ngcontent-%COMP%]   .permission-note[_ngcontent-%COMP%]{color:#9ca3af;font-size:.75rem;line-height:1.4}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .enter-btn.view-only[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .enter-btn.view-only[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6268,#3d4142);transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .enter-btn.management[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .enter-btn.management[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#17a2b8);transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6;border:1px solid rgba(59,130,246,.2);padding:.75rem 1rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.workspaces-section[_ngcontent-%COMP%]   .workspace-actions[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]:hover{background:#3b82f626;border-color:#3b82f64d}.workspaces-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem;margin-bottom:1rem;font-style:italic}.info-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#2563eb0d);border:1px solid rgba(59,130,246,.2);border-radius:16px;padding:2rem;margin:2rem 0;text-align:center}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:.5rem}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1e40af;font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#3730a3;font-size:1.1rem;line-height:1.6;margin:0;max-width:600px}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .create-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #10b9814d}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .create-btn.secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-2px);box-shadow:0 6px 16px #10b98166}@media (max-width: 768px){.info-message[_ngcontent-%COMP%]{padding:1.5rem}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}.info-message[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{order:3;margin:0;max-width:none}.main-content[_ngcontent-%COMP%]{padding:1rem}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.stats-section[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.workspaces-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.workspace-meta[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.workspace-meta[_ngcontent-%COMP%]   .workspace-permissions[_ngcontent-%COMP%]{text-align:left}.workspace-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.workspace-actions[_ngcontent-%COMP%]   .enter-btn[_ngcontent-%COMP%], .workspace-actions[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};function Yi(r,e){r&1&&(s(0,"div",8),c(1," El nombre del workspace es obligatorio. "),a())}function Ki(r,e){if(r&1&&(s(0,"div",8),c(1),a()),r&2){let t=h();l(),B(t.error)}}var Pn=class r{constructor(e,t){this.workspaceService=e;this.router=t}workspaceId;name="";description="";isEditing=!1;loading=!1;error="";ngOnInit(){this.workspaceId&&(this.isEditing=!0,this.workspaceService.getWorkspace(this.workspaceId).subscribe({next:e=>{this.name=e.name,this.description=e.description},error:()=>this.error="Error al cargar el workspace."}))}saveWorkspace(){if(this.error="",!this.name.trim()){this.error="El nombre del workspace es obligatorio.";return}this.loading=!0;let e={name:this.name,description:this.description};(this.isEditing?this.workspaceService.updateWorkspace(this.workspaceId,e):this.workspaceService.createWorkspace(e)).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/workspace-list"])},error:n=>{this.loading=!1,this.error=n.error?.error||"Error al guardar el workspace."}})}static \u0275fac=function(t){return new(t||r)(G(gt),G(ge))};static \u0275cmp=pe({type:r,selectors:[["app-workspace-form"]],inputs:{workspaceId:"workspaceId"},decls:14,vars:7,consts:[[1,"form-container"],[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"error"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h2"),c(2),a(),s(3,"form",1),k("ngSubmit",function(){return n.saveWorkspace()}),s(4,"label",2),c(5,"Nombre del workspace"),a(),s(6,"input",3),le("ngModelChange",function(i){return ce(n.name,i)||(n.name=i),i}),a(),w(7,Yi,2,0,"div",4),s(8,"label",5),c(9,"Descripci\xF3n"),a(),s(10,"textarea",6),le("ngModelChange",function(i){return ce(n.description,i)||(n.description=i),i}),a(),w(11,Ki,2,1,"div",4),s(12,"button",7),c(13),a()()()),t&2&&(l(2),L("",n.isEditing?"Editar":"Crear"," Workspace"),l(4),ae("ngModel",n.name),l(),f("ngIf",n.error&&!n.name),l(3),ae("ngModel",n.description),l(),f("ngIf",n.error&&n.name),l(),f("disabled",n.loading),l(),L(" ",n.loading?"Guardando...":"Guardar"," "))},dependencies:[Me,ke,at,Re,Ee,De,Ie,kt,st,it],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:auto;padding:2rem;background-color:#f9fafb;border-radius:10px;box-shadow:0 4px 20px #0000001a}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:1rem 0 .3rem}.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem;border:1px solid #ccc;border-radius:6px;font-size:1rem}.form-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;padding:.7rem 1.5rem;background-color:#4f46e5;color:#fff;border:none;border-radius:8px;cursor:pointer}.form-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-top:1rem;color:red}"]})};function Xi(r,e){if(r&1&&(s(0,"span",39),c(1),a()),r&2){let t=h();l(),L("- ",t.workspace.name)}}function Qi(r,e){if(r&1&&(s(0,"span",40),c(1),a()),r&2){let t=h();l(),qe("",t.user.first_name," ",t.user.last_name)}}function Ji(r,e){if(r&1&&(s(0,"h2"),c(1),a()),r&2){let t=h();l(),B(t.workspace.name)}}function es(r,e){if(r&1&&(s(0,"p",41),c(1),a()),r&2){let t=h();l(),B(t.workspace.description)}}function ts(r,e){r&1&&(s(0,"div",42),c(1,"Cargando tareas..."),a())}function ns(r,e){if(r&1&&(s(0,"div",43),c(1),a()),r&2){let t=h();l(),B(t.error)}}function rs(r,e){if(r&1){let t=se();s(0,"button",44),k("click",function(){x(t);let o=h();return y(o.openTeamModal())}),c(1," + Crear Equipo "),a()}}function os(r,e){if(r&1){let t=se();s(0,"button",45),k("click",function(){x(t);let o=h();return y(o.openTaskModal())}),c(1," + Agregar Tarea "),a()}if(r&2){let t=h();f("disabled",!t.canCreateTasks)}}function is(r,e){if(r&1&&(s(0,"div",46)(1,"div",47)(2,"span",48),c(3,"\u{1F441}\uFE0F"),a(),s(4,"span",49),c(5),a()(),s(6,"small",50),c(7," Puedes ver todas las tareas del workspace pero no realizar cambios "),a()()),r&2){let t=h();l(5),B(t.readOnlyMessage)}}function ss(r,e){if(r&1){let t=se();s(0,"button",63),k("click",function(){x(t);let o=h(2).$implicit,i=h(2);return y(i.openMembersModal(o))}),c(1," \u{1F465} Gestionar "),a()}}function as(r,e){if(r&1){let t=se();s(0,"button",64),k("click",function(o){x(t);let i=h(2).$implicit,d=h(2);return y(d.deleteTeam(i,o))}),c(1," \u{1F5D1}\uFE0F "),a()}}function cs(r,e){if(r&1&&(s(0,"div",60),w(1,ss,2,0,"button",61)(2,as,2,0,"button",62),a()),r&2){let t=h().$implicit,n=h(2);l(),f("ngIf",n.isUserLeaderOfTeam(t)),l(),f("ngIf",n.isUserLeaderOfTeam(t))}}function ls(r,e){if(r&1&&(s(0,"span",65),c(1),s(2,"span",66),c(3),a()()),r&2){let t=e.$implicit;l(),qe(" ",t.first_name," ",t.last_name," "),l(),ye(t.pivot.role),l(),B(t.pivot.role==="leader"?"\u{1F451}":"\u{1F464}")}}function ds(r,e){r&1&&(s(0,"span",67),c(1," Sin miembros "),a())}function gs(r,e){if(r&1&&(s(0,"div",54)(1,"div",55)(2,"h4"),c(3),a(),w(4,cs,3,2,"div",56),a(),s(5,"div",57),w(6,ls,4,5,"span",58)(7,ds,2,0,"span",59),a()()),r&2){let t=e.$implicit,n=h(2);l(3),B(t.name),l(),f("ngIf",!n.isReadOnlyMode),l(2),f("ngForOf",t.users),l(),f("ngIf",!t.users||t.users.length===0)}}function ms(r,e){if(r&1&&(s(0,"div",51)(1,"h3"),c(2,"Equipos en este Workspace"),a(),s(3,"div",52),w(4,gs,8,4,"div",53),a()()),r&2){let t=h();l(4),f("ngForOf",t.teams)}}function ps(r,e){r&1&&(s(0,"div",68)(1,"p"),c(2,"No hay equipos en este workspace. Crea un equipo para comenzar a gestionar tareas."),a()())}function us(r,e){if(r&1&&(s(0,"span",77),c(1),a()),r&2){let t=h().$implicit,n=h();l(),L(" \u{1F464} ",n.getAssignedUserName(t)," ")}}function fs(r,e){if(r&1){let t=se();s(0,"div",78)(1,"button",79),k("click",function(o){x(t);let i=h().$implicit;return h().updateTaskStatus(i,"in-progress"),y(o.stopPropagation())}),c(2," \u27A1\uFE0F En Progreso "),a(),s(3,"button",80),k("click",function(o){x(t);let i=h().$implicit;return h().deleteTask(i),y(o.stopPropagation())}),c(4," \u{1F5D1}\uFE0F "),a()()}}function hs(r,e){if(r&1){let t=se();s(0,"div",69),k("click",function(){let o=x(t).$implicit,i=h();return y(i.onTaskClick(o))}),s(1,"div",70)(2,"h4"),c(3),a(),s(4,"span",71),c(5),a()(),s(6,"p",72),c(7),a(),s(8,"div",73),w(9,us,2,1,"span",74),s(10,"span",75),c(11),a()(),w(12,fs,5,0,"div",76),a()}if(r&2){let t=e.$implicit,n=h();l(3),B(t.title),l(),ye(n.getPriorityClass(t.progress)),l(),L(" ",n.getProgressText(t.progress)," "),l(2),B(t.description||"Sin descripci\xF3n"),l(2),f("ngIf",t.assigned_to),l(2),L(" \u270F\uFE0F ",n.getCreatorName(t)," "),l(),f("ngIf",!n.isReadOnlyMode)}}function _s(r,e){if(r&1&&(s(0,"span",77),c(1),a()),r&2){let t=h().$implicit,n=h();l(),L(" \u{1F464} ",n.getAssignedUserName(t)," ")}}function bs(r,e){if(r&1){let t=se();s(0,"div",78)(1,"button",79),k("click",function(o){x(t);let i=h().$implicit;return h().updateTaskStatus(i,"todo"),y(o.stopPropagation())}),c(2," \u2B05\uFE0F Por Hacer "),a(),s(3,"button",79),k("click",function(o){x(t);let i=h().$implicit;return h().updateTaskStatus(i,"done"),y(o.stopPropagation())}),c(4," \u27A1\uFE0F Completado "),a(),s(5,"button",80),k("click",function(o){x(t);let i=h().$implicit;return h().deleteTask(i),y(o.stopPropagation())}),c(6," \u{1F5D1}\uFE0F "),a()()}}function Cs(r,e){if(r&1){let t=se();s(0,"div",69),k("click",function(){let o=x(t).$implicit,i=h();return y(i.onTaskClick(o))}),s(1,"div",70)(2,"h4"),c(3),a(),s(4,"span",71),c(5),a()(),s(6,"p",72),c(7),a(),s(8,"div",73),w(9,_s,2,1,"span",74),s(10,"span",75),c(11),a()(),w(12,bs,7,0,"div",76),a()}if(r&2){let t=e.$implicit,n=h();l(3),B(t.title),l(),ye(n.getPriorityClass(t.progress)),l(),L(" ",n.getProgressText(t.progress)," "),l(2),B(t.description||"Sin descripci\xF3n"),l(2),f("ngIf",t.assigned_to),l(2),L(" \u270F\uFE0F ",n.getCreatorName(t)," "),l(),f("ngIf",!n.isReadOnlyMode)}}function vs(r,e){if(r&1&&(s(0,"span",77),c(1),a()),r&2){let t=h().$implicit,n=h();l(),L(" \u{1F464} ",n.getAssignedUserName(t)," ")}}function Ps(r,e){if(r&1){let t=se();s(0,"div",78)(1,"button",79),k("click",function(o){x(t);let i=h().$implicit;return h().updateTaskStatus(i,"in-progress"),y(o.stopPropagation())}),c(2," \u2B05\uFE0F En Progreso "),a(),s(3,"button",80),k("click",function(o){x(t);let i=h().$implicit;return h().deleteTask(i),y(o.stopPropagation())}),c(4," \u{1F5D1}\uFE0F "),a()()}}function ks(r,e){if(r&1){let t=se();s(0,"div",81),k("click",function(){let o=x(t).$implicit,i=h();return y(i.onTaskClick(o))}),s(1,"div",70)(2,"h4"),c(3),a(),s(4,"span",71),c(5),a()(),s(6,"p",72),c(7),a(),s(8,"div",73),w(9,vs,2,1,"span",74),s(10,"span",75),c(11),a()(),w(12,Ps,5,0,"div",76),a()}if(r&2){let t=e.$implicit,n=h();l(3),B(t.title),l(),ye(n.getPriorityClass(t.progress)),l(),L(" ",n.getProgressText(t.progress)," "),l(2),B(t.description||"Sin descripci\xF3n"),l(2),f("ngIf",t.assigned_to),l(2),L(" \u270F\uFE0F ",n.getCreatorName(t)," "),l(),f("ngIf",!n.isReadOnlyMode)}}function Ms(r,e){if(r&1&&(s(0,"span",111),c(1),a()),r&2){let t,n=h(2);l(),L(" ",(t=n.getLeaderTeam())==null?null:t.name," (Como l\xEDder) ")}}function ws(r,e){r&1&&(s(0,"span",112),c(1," No eres l\xEDder de ning\xFAn equipo "),a())}function Os(r,e){if(r&1&&(s(0,"option",113),c(1),a()),r&2){let t=e.$implicit;f("value",t.id),l(),Fn(" ",t.first_name," ",t.last_name," (",(t.pivot==null?null:t.pivot.role)||"miembro",") ")}}function xs(r,e){if(r&1){let t=se();s(0,"div",82),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),s(1,"div",83),k("click",function(o){return x(t),y(o.stopPropagation())}),s(2,"div",84)(3,"h3"),c(4),a(),s(5,"button",85),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),c(6,"\xD7"),a()(),s(7,"form",86),k("ngSubmit",function(){x(t);let o=h();return y(o.saveTask())}),s(8,"div",87)(9,"label",88),c(10,"T\xEDtulo *"),a(),s(11,"input",89),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTask.title,o)||(i.newTask.title=o),y(o)}),a()(),s(12,"div",87)(13,"label",90),c(14,"Descripci\xF3n"),a(),s(15,"textarea",91),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTask.description,o)||(i.newTask.description=o),y(o)}),c(16,"          "),a()(),s(17,"div",92)(18,"div",87)(19,"label",93),c(20,"Progreso (%)"),a(),s(21,"input",94),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTask.progress,o)||(i.newTask.progress=o),y(o)}),a(),s(22,"span",95),c(23),a()(),s(24,"div",87)(25,"label",96),c(26,"Estado"),a(),s(27,"label",97)(28,"input",98),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTask.is_done,o)||(i.newTask.is_done=o),y(o)}),a(),c(29," Tarea completada "),a()()(),s(30,"div",87)(31,"label",99),c(32,"Equipo"),a(),s(33,"div",100),w(34,Ms,2,1,"span",101)(35,ws,2,0,"span",102),a(),s(36,"small",103),c(37," Las tareas se crean desde el equipo donde eres l\xEDder "),a()(),s(38,"div",87)(39,"label",104),c(40,"Asignar a *"),a(),s(41,"select",105),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTask.assigned_to,o)||(i.newTask.assigned_to=o),y(o)}),s(42,"option",106),c(43,"Selecciona un usuario"),a(),w(44,Os,2,4,"option",107),a()(),s(45,"div",108)(46,"button",109),k("click",function(){x(t);let o=h();return y(o.closeTaskModal())}),c(47," Cancelar "),a(),s(48,"button",110),c(49),a()()()()()}if(r&2){let t=h();l(4),B(t.editingTask?"Editar Tarea":"Nueva Tarea"),l(7),ae("ngModel",t.newTask.title),l(4),ae("ngModel",t.newTask.description),l(6),ae("ngModel",t.newTask.progress),l(2),L("",t.newTask.progress||0,"%"),l(5),ae("ngModel",t.newTask.is_done),l(6),f("ngIf",t.getLeaderTeam()),l(),f("ngIf",!t.getLeaderTeam()),l(6),ae("ngModel",t.newTask.assigned_to),l(3),f("ngForOf",t.getLeaderTeamUsers()),l(4),f("disabled",!(t.newTask.title!=null&&t.newTask.title.trim())||!t.newTask.assigned_to),l(),L(" ",t.editingTask?"Actualizar":"Crear"," ")}}function ys(r,e){if(r&1){let t=se();s(0,"div",82),k("click",function(){x(t);let o=h();return y(o.closeTeamModal())}),s(1,"div",83),k("click",function(o){return x(t),y(o.stopPropagation())}),s(2,"div",84)(3,"h3"),c(4,"Crear Nuevo Equipo"),a(),s(5,"button",85),k("click",function(){x(t);let o=h();return y(o.closeTeamModal())}),c(6,"\xD7"),a()(),s(7,"form",86),k("ngSubmit",function(){x(t);let o=h();return y(o.saveTeam())}),s(8,"div",87)(9,"label",114),c(10,"Nombre del Equipo *"),a(),s(11,"input",115),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newTeam.name,o)||(i.newTeam.name=o),y(o)}),a()(),s(12,"div",108)(13,"button",109),k("click",function(){x(t);let o=h();return y(o.closeTeamModal())}),c(14," Cancelar "),a(),s(15,"button",110),c(16," Crear Equipo "),a()()()()()}if(r&2){let t=h();l(11),ae("ngModel",t.newTeam.name),l(4),f("disabled",!t.newTeam.name.trim())}}function Ts(r,e){if(r&1){let t=se();s(0,"button",135),k("click",function(){x(t);let o=h().$implicit,i=h(3);return y(i.removeMemberFromTeam(o.id))}),c(1," \u{1F5D1}\uFE0F Remover "),a()}}function Ss(r,e){if(r&1&&(s(0,"div",130)(1,"div",131)(2,"span",132),c(3),a(),s(4,"span",133),c(5),a()(),w(6,Ts,2,0,"button",134),a()),r&2){let t=e.$implicit;l(3),qe("",t.first_name," ",t.last_name),l(),ye(t.pivot.role),l(),L(" ",t.pivot.role==="leader"?"\u{1F451} L\xEDder":"\u{1F464} Miembro"," "),l(),f("ngIf",t.pivot.role!=="leader")}}function Es(r,e){if(r&1&&(s(0,"div",127)(1,"h4"),c(2,"Miembros Actuales"),a(),s(3,"div",128),w(4,Ss,7,6,"div",129),a()()),r&2){let t=h(2);l(4),f("ngForOf",t.selectedTeam.users)}}function Ds(r,e){if(r&1&&(s(0,"option",113),c(1),a()),r&2){let t=e.$implicit;f("value",t.id),l(),Fn(" ",t.first_name," ",t.last_name," (",t.email,") ")}}function Is(r,e){r&1&&(s(0,"small",136),c(1," No hay usuarios disponibles para agregar al equipo "),a())}function Rs(r,e){if(r&1){let t=se();s(0,"div",82),k("click",function(){x(t);let o=h();return y(o.closeMembersModal())}),s(1,"div",116),k("click",function(o){return x(t),y(o.stopPropagation())}),s(2,"div",84)(3,"h3"),c(4),a(),s(5,"button",85),k("click",function(){x(t);let o=h();return y(o.closeMembersModal())}),c(6,"\xD7"),a()(),w(7,Es,5,1,"div",117),s(8,"div",118)(9,"h4"),c(10,"Agregar Nuevo Miembro"),a(),s(11,"form",86),k("ngSubmit",function(){x(t);let o=h();return y(o.addMemberToTeam())}),s(12,"div",87)(13,"label",119),c(14,"Usuario *"),a(),s(15,"select",120),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newMember.user_id,o)||(i.newMember.user_id=o),y(o)}),s(16,"option",121),c(17),a(),w(18,Ds,2,4,"option",107),a(),w(19,Is,2,0,"small",122),a(),s(20,"div",87)(21,"label",123),c(22,"Rol *"),a(),s(23,"select",124),le("ngModelChange",function(o){x(t);let i=h();return ce(i.newMember.role,o)||(i.newMember.role=o),y(o)}),s(24,"option",125),c(25,"\u{1F464} Miembro"),a(),s(26,"option",126),c(27,"\u{1F451} L\xEDder"),a()()(),s(28,"div",108)(29,"button",109),k("click",function(){x(t);let o=h();return y(o.closeMembersModal())}),c(30," Cerrar "),a(),s(31,"button",110),c(32),a()()()()()()}if(r&2){let t=h();l(4),L("Gestionar Miembros - ",t.selectedTeam==null?null:t.selectedTeam.name),l(3),f("ngIf",t.selectedTeam&&t.selectedTeam.users&&t.selectedTeam.users.length>0),l(8),ae("ngModel",t.newMember.user_id),f("disabled",t.loadingUsers),l(2),B(t.loadingUsers?"Cargando usuarios...":"Selecciona un usuario"),l(),f("ngForOf",t.availableUsersForTeam),l(),f("ngIf",!t.loadingUsers&&t.availableUsersForTeam.length===0),l(4),ae("ngModel",t.newMember.role),l(8),f("disabled",!t.newMember.user_id||t.loadingUsers||t.availableUsersForTeam.length===0),l(),L(" ",t.loadingUsers?"Cargando...":"Agregar Miembro"," ")}}var kn=class r{constructor(e,t,n,o,i,d,m){this.route=e;this.router=t;this.taskService=n;this.workspaceService=o;this.teamService=i;this.auth=d;this.userService=m}workspaceId=0;workspace=null;tasks=[];teams=[];availableUsers=[];user=null;showTaskModal=!1;showTeamModal=!1;showMembersModal=!1;editingTask=null;selectedTeam=null;availableUsersForTeam=[];loadingUsers=!1;error="";loading=!1;userRole="member";canCreateTasks=!1;canManageTeams=!1;newTask={title:"",description:"",progress:0,is_done:!1,workspace_id:0,assigned_to:void 0};newTeam={name:"",workspace_id:0};newMember={user_id:0,role:"member"};isReadOnlyMode=!1;readOnlyMessage="";showTeamDetailsModal=!1;selectedUserId=null;selectedRole="member";ngOnInit(){this.route.params.subscribe(e=>{this.workspaceId=+e.id,this.newTask.workspace_id=this.workspaceId,this.newTeam.workspace_id=this.workspaceId,this.loadUserAndInitialize()})}loadUserAndInitialize(){this.userService.getUser().subscribe({next:e=>{this.user=e,this.initializeWorkspaceAccess()},error:()=>{this.user=null,this.error="Error al cargar informaci\xF3n del usuario"}})}initializeWorkspaceAccess(){if(!this.user){this.error="Usuario no autenticado";return}this.checkWorkspaceAccess()}checkWorkspaceAccess(){console.log("Verificando acceso al workspace (m\xE9todo temporal)..."),this.checkTeamMembership()}checkTeamMembership(){this.teamService.getTeams().subscribe({next:e=>{let t=e.filter(o=>o.workspace_id===this.workspaceId&&o.users?.some(i=>i.id===this.user.id));if(t.length===0){this.handleNoAccess();return}this.teams=t,t.some(o=>o.users?.some(i=>i.id===this.user.id&&i.pivot.role==="leader"))?(this.isReadOnlyMode=!1,this.canCreateTasks=!0,this.canManageTeams=!0,this.readOnlyMessage="",console.log("Usuario es L\xCDDER - Permisos completos de gesti\xF3n"),this.loadAllData()):(this.isReadOnlyMode=!0,this.canCreateTasks=!1,this.canManageTeams=!1,this.readOnlyMessage="\u{1F441}\uFE0F Modo solo lectura - Solo puedes ver las tareas",console.log("Usuario es MIEMBRO - Solo lectura"),this.loadTasksBasedOnRole())},error:e=>{console.error("Error al verificar membres\xEDa:",e),this.handleNoAccess()}})}loadAllData(){console.log("Cargando todos los datos (propietario o l\xEDder)"),this.loadTeams(),this.loadAllWorkspaceTasks()}loadTasksWithPermissionCheck(){this.readOnlyMessage.includes("\u274C")||this.loadTasks()}handleWorkspaceAccessError(e){e.status===403?(this.isReadOnlyMode=!0,this.readOnlyMessage="\u274C No tienes permisos para acceder a este workspace",this.canCreateTasks=!1,this.canManageTeams=!1,this.error=""):this.error="Error al cargar el workspace"}handleNoAccess(){this.isReadOnlyMode=!0,this.readOnlyMessage="\u274C No tienes acceso a este workspace",this.canCreateTasks=!1,this.canManageTeams=!1,this.error="",this.tasks=[],this.teams=[]}loadWorkspace(){this.canManageTeams&&console.log("Informaci\xF3n del workspace ser\xE1 cargada cuando sea necesario...")}loadTeams(){console.log("Cargando equipos del workspace..."),this.teamService.getTeams().subscribe({next:e=>{this.teams=e.filter(t=>t.workspace_id===this.workspaceId),console.log("Equipos cargados:",this.teams.length),this.loadAvailableUsers(),this.loadTeamDetails()},error:e=>{console.error("Error al cargar equipos:",e),e.status!==403&&(this.error="Error al cargar los equipos")}})}loadTeamDetails(){this.teams.forEach((e,t)=>{this.teamService.getTeam(e.id).subscribe({next:n=>{this.teams[t]=n,this.checkCanCreateTasks()},error:n=>{console.error(`Error al cargar detalles del equipo ${e.id}:`,n),this.loadTeamMembersOnly(e.id,t)}})})}loadTeamMembersOnly(e,t){this.teamService.getTeamMembers(e).subscribe({next:n=>{this.teams[t].users=n,this.checkCanCreateTasks(),console.log(`Miembros cargados para equipo ${e}:`,n)},error:n=>{console.error(`Error al cargar miembros del equipo ${e}:`,n)}})}loadAvailableUsers(){this.availableUsers=[],this.teams.forEach(e=>{e.users&&e.users.forEach(t=>{this.availableUsers.find(n=>n.id===t.id)||this.availableUsers.push(t)})})}openMembersModal(e){this.selectedTeam=e,this.showMembersModal=!0,this.newMember={user_id:0,role:"member"},this.loadAvailableUsersForTeam(e.id)}loadAvailableUsersForTeam(e){this.loadingUsers=!0,this.workspaceService.getAvailableUsersForTeam(e).subscribe({next:t=>{this.availableUsersForTeam=t,this.loadingUsers=!1},error:t=>{console.error("Error al cargar usuarios disponibles:",t),this.availableUsersForTeam=[],this.loadingUsers=!1,this.loadAvailableUsersForTeamTemp(e)}})}loadAvailableUsersForTeamTemp(e){console.log("Cargando usuarios disponibles (temporal)..."),this.availableUsersForTeam=this.availableUsers.filter(t=>!this.selectedTeam?.users?.some(n=>n.id===t.id))}addMemberToTeamTemp(){console.log("Agregando miembro al equipo (temporal)..."),this.closeTeamModal()}removeMemberFromTeamTemp(e){console.log("Removiendo miembro del equipo (temporal)..."),this.selectedTeam?.users&&(this.selectedTeam.users=this.selectedTeam.users.filter(t=>t.id!==e))}addMemberToTeam(){this.selectedTeam&&this.newMember.user_id&&this.newMember.role&&this.workspaceService.addMemberToTeam(this.selectedTeam.id,this.newMember.user_id,this.newMember.role).subscribe({next:()=>{this.loadTeams(),this.loadAvailableUsersForTeam(this.selectedTeam.id),this.newMember={user_id:0,role:"member"}},error:e=>{console.error("Error al agregar miembro:",e),this.error="Error al agregar el miembro al equipo",this.addMemberToTeamTemp()}})}removeMemberFromTeam(e){this.selectedTeam&&confirm("\xBFEst\xE1s seguro de que quieres remover este miembro?")&&this.workspaceService.removeMemberFromTeam(this.selectedTeam.id,e).subscribe({next:()=>{this.loadTeams(),this.loadAvailableUsersForTeam(this.selectedTeam.id)},error:t=>{console.error("Error al remover miembro:",t),this.error="Error al remover el miembro del equipo",this.removeMemberFromTeamTemp(e)}})}updateTaskStatus(e,t){let n={};switch(t){case"todo":n={progress:0,is_done:!1};break;case"in-progress":n={progress:Math.max(e.progress,1),is_done:!1};break;case"done":n={progress:100,is_done:!0};break}e.id&&this.taskService.updateTask(e.id,n).subscribe({next:()=>{this.loadTasks()},error:o=>{console.error("Error al actualizar estado:",o),this.error="Error al actualizar el estado de la tarea"}})}goBack(){this.router.navigate(["/workspace-list"])}onLogout(){this.auth.logout()}getPriorityClass(e){return e<=25?"low":e<=50?"medium":e<=75?"high":"very-high"}getProgressText(e){return e===0?"Sin iniciar":e<=25?"Bajo":e<=50?"Medio":e<=75?"Alto":"Muy alto"}getAssignedUserName(e){for(let t of this.teams)if(t.users){let n=t.users.find(o=>o.id===e.assigned_to);if(n)return`${n.first_name} ${n.last_name}`}return"Usuario no encontrado"}getCreatorName(e){for(let t of this.teams)if(t.users){let n=t.users.find(o=>o.id===e.created_by);if(n)return`${n.first_name} ${n.last_name}`}return"Creador no encontrado"}getUserTeams(){return this.user?this.teams.filter(e=>e.users?.some(t=>t.id===this.user.id)):[]}isUserLeaderOfTeam(e){return!this.user||!e.users?!1:e.users.some(t=>t.id===this.user.id&&t.pivot.role==="leader")}checkUserPermissions(){this.workspace&&this.user&&this.workspace.created_by===this.user.id?(this.userRole="owner",this.canCreateTasks=!0,this.canManageTeams=!0):this.teams.some(t=>t.users?.some(n=>n.id===this.user?.id&&n.pivot.role==="leader"))?(this.canCreateTasks=!0,this.canManageTeams=!0):(this.canCreateTasks=!1,this.canManageTeams=!1),this.checkWorkspacePermissions()}checkWorkspacePermissions(){if(!this.workspace||!this.user)return;if(this.workspace.created_by===this.user.id){this.isReadOnlyMode=!1,this.canCreateTasks=!0,this.canManageTeams=!0;return}let e=this.teams.filter(n=>n.users?.some(o=>o.id===this.user.id));if(e.length===0){this.isReadOnlyMode=!0,this.readOnlyMessage="\u274C No tienes acceso a este workspace",this.canCreateTasks=!1,this.canManageTeams=!1;return}let t=e.some(n=>n.users?.some(o=>o.id===this.user.id&&o.pivot.role==="leader"));console.log("Verificaci\xF3n de permisos:"),console.log("- Es propietario:",this.workspace.created_by===this.user.id),console.log("- Equipos del usuario:",e.length),console.log("- Es l\xEDder en alg\xFAn equipo:",t),t?(this.isReadOnlyMode=!1,this.canCreateTasks=!0,this.canManageTeams=!0,this.readOnlyMessage="",console.log("\u2705 L\xCDDER: Permisos completos asignados")):(this.isReadOnlyMode=!0,this.canCreateTasks=!1,this.canManageTeams=!1,this.readOnlyMessage="\u{1F441}\uFE0F Modo solo lectura - Solo puedes ver las tareas",console.log("\u{1F441}\uFE0F MIEMBRO: Modo solo lectura asignado"))}loadTasks(){if(this.readOnlyMessage.includes("\u274C")){this.tasks=[],this.loading=!1;return}this.loading=!0,this.error="",this.loadAllWorkspaceTasks()}loadTasksAlternativeForMembers(){this.taskService.getTasks().subscribe({next:e=>{this.tasks=e.filter(t=>t.workspace_id===this.workspaceId),this.loading=!1,console.log("Tareas cargadas usando m\xE9todo alternativo (todas las del workspace):",this.tasks),this.tasks.length===0&&(console.log("No se encontraron tareas, intentando m\xE9todo de respaldo..."),this.loadTasksAlternative())},error:e=>{console.error("Error al cargar tareas con m\xE9todo alternativo:",e),this.loadTasksAlternative()}})}loadTasksFromTeams(){this.taskService.getTasks().subscribe({next:e=>{let t=this.teams.filter(n=>n.workspace_id===this.workspaceId).map(n=>n.id);this.tasks=e.filter(n=>n.workspace_id===this.workspaceId||n.team_id&&t.includes(n.team_id)),this.loading=!1,console.log("Tareas cargadas y filtradas por equipos del workspace:",this.tasks)},error:e=>{console.error("Error al cargar tareas filtradas por equipos:",e),this.tasks=[],this.loading=!1,e.status!==403&&(this.error="Error al cargar las tareas")}})}loadTasksAlternative(){console.log("Intentando cargar tareas con m\xE9todo alternativo..."),this.loadAllTasksAndFilter()}loadAllTasksAndFilter(){console.log("Cargando todas las tareas y filtrando localmente..."),this.taskService.getTasks().subscribe({next:e=>{this.tasks=e.filter(t=>t.workspace_id===this.workspaceId),this.loading=!1,console.log("Tareas filtradas localmente:",this.tasks)},error:e=>{console.error("Error al cargar todas las tareas:",e),this.error="Error al cargar las tareas. Verifica que la ruta /api/workspaces/{id}/tasks est\xE9 configurada en tu backend.",this.loading=!1,this.tasks=[]}})}getTasksByStatus(e){switch(e){case"todo":return this.tasks.filter(t=>!t.is_done&&t.progress===0);case"in-progress":return this.tasks.filter(t=>!t.is_done&&t.progress>0);case"done":return this.tasks.filter(t=>t.is_done);default:return[]}}checkCanCreateTasks(){this.checkUserPermissions()}openTaskModal(e){this.preventUnauthorizedAction("gestionar tareas")&&(this.showTaskModal=!0,e?(this.editingTask=e,this.newTask=rt({},e)):(this.editingTask=null,this.resetTaskForm()))}openTeamModal(){this.preventUnauthorizedAction("crear equipos")&&(this.showTeamModal=!0,this.resetTeamForm())}closeTaskModal(){this.showTaskModal=!1,this.editingTask=null,this.resetTaskForm()}closeTeamModal(){this.showTeamModal=!1,this.resetTeamForm()}closeMembersModal(){this.showMembersModal=!1,this.selectedTeam=null,this.newMember={user_id:0,role:"member"}}resetTaskForm(){this.newTask={title:"",description:"",progress:0,is_done:!1,workspace_id:this.workspaceId,assigned_to:void 0}}resetTeamForm(){this.newTeam={name:"",workspace_id:this.workspaceId}}saveTask(){if(!this.preventUnauthorizedAction("guardar tareas"))return;if(!this.newTask.title?.trim()||!this.newTask.assigned_to){this.error="El t\xEDtulo y el usuario asignado son obligatorios",setTimeout(()=>{this.error=""},3e3);return}let e=this.teams.find(n=>n.users?.some(o=>o.id===this.user.id&&o.pivot.role==="leader"));if(!e){this.error="Debes ser l\xEDder de un equipo para crear tareas";return}let t={title:this.newTask.title.trim(),description:this.newTask.description?.trim()||"",workspace_id:Number(this.workspaceId),team_id:Number(e.id),assigned_to:Number(this.newTask.assigned_to),progress:Number(this.newTask.progress)||0,is_done:!!this.newTask.is_done||!1};if(console.log("Guardando tarea con datos:",t),console.log("Equipo del l\xEDder:",e),!this.validateTaskData(t)){this.error="Datos de tarea inv\xE1lidos";return}this.validateTaskData(t),this.editingTask?this.taskService.updateTask(this.editingTask.id,t).subscribe({next:()=>{console.log("Tarea actualizada exitosamente"),this.loadTasksBasedOnRole(),this.closeTaskModal()},error:n=>{console.error("Error al actualizar tarea:",n),this.error=`Error al actualizar la tarea: ${n.error?.message||n.message}`}}):this.taskService.createTask(t).subscribe({next:n=>{console.log("Tarea creada exitosamente:",n),this.loadTasksBasedOnRole(),this.closeTaskModal()},error:n=>{console.error("Error al crear tarea:",n),console.error("Detalles del error:",n.error),this.error=`Error al crear la tarea: ${n.error?.message||n.message}`,n.error?.errors&&console.error("Errores de validaci\xF3n:",n.error.errors)}})}saveTeam(){this.newTeam.name.trim()&&this.teamService.createTeam(this.newTeam).subscribe({next:()=>{this.loadTeams(),this.closeTeamModal()},error:e=>{console.error("Error al crear equipo:",e),this.error="Error al crear el equipo"}})}deleteTask(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta tarea?")&&this.taskService.deleteTask(e.id).subscribe({next:()=>{this.loadTasks()},error:t=>{console.error("Error al eliminar tarea:",t),this.error="Error al eliminar la tarea"}})}deleteTeam(e,t){t.stopPropagation(),confirm(`\xBFEst\xE1s seguro de que quieres eliminar el equipo "${e.name}"?`)&&this.teamService.deleteTeam(e.id).subscribe({next:()=>{this.loadTeams()},error:n=>{console.error("Error al eliminar equipo:",n),this.error="Error al eliminar el equipo"}})}getTeamUsers(e){return e?this.teams.find(n=>n.id===e)?.users||[]:this.availableUsers}hasWorkspaceAccess(){return!this.readOnlyMessage.includes("\u274C")}canViewTasks(){return this.hasWorkspaceAccess()&&(this.canCreateTasks||this.isReadOnlyMode)}preventUnauthorizedAction(e){return this.hasWorkspaceAccess()?this.isReadOnlyMode&&!this.canCreateTasks?(alert(`\u{1F441}\uFE0F Est\xE1s en modo solo lectura. No puedes ${e}.`),!1):!0:(alert(`\u274C No tienes permisos para ${e} en este workspace.`),!1)}shouldShowTaskActions(){return!this.isReadOnlyMode&&this.hasWorkspaceAccess()}canEditTask(e){return this.isReadOnlyMode||!this.hasWorkspaceAccess()?!1:this.canCreateTasks}getTaskVisualState(e){return this.isReadOnlyMode?"read-only":this.canEditTask(e)?"editable":"view-only"}loadAllWorkspaceTasks(){console.log("\u{1F451} Cargando todas las tareas del workspace como l\xEDder/propietario...");let e=localStorage.getItem("token");if(!e){console.error("\u{1F510} No hay token disponible"),this.error="No est\xE1s autenticado. Por favor, inicia sesi\xF3n nuevamente.";return}console.log("\u{1F510} Token encontrado:",e.substring(0,20)+"..."),console.log("\u{1F4CD} Workspace ID:",this.workspaceId),console.log("\u{1F504} Usando endpoint: /api/workspaces/"+this.workspaceId+"/tasks"),this.workspaceService.getWorkspaceTasks(this.workspaceId).subscribe({next:t=>{this.tasks=t,this.loading=!1,console.log("\u2705 Todas las tareas del workspace cargadas:",this.tasks.length),console.log("\u{1F4CB} Tareas:",this.tasks)},error:t=>{console.error("\u274C Error al cargar tareas del workspace:",t),console.error("\u274C Status:",t.status),console.error("\u274C Message:",t.message),t.status===401?(console.error("\u{1F510} Error de autenticaci\xF3n - Token inv\xE1lido o expirado"),this.error="Sesi\xF3n expirada. Por favor, inicia sesi\xF3n nuevamente."):t.status===403?(console.error("\u{1F6AB} Sin permisos para ver tareas del workspace"),this.error="No tienes permisos para ver las tareas de este workspace"):(console.error("\u{1F4A5} Fallback: usando m\xE9todo alternativo..."),this.loadAllTasksAndFilter())}})}onTaskClick(e){this.isReadOnlyMode?this.showTaskInfo(e):this.openTaskModal(e)}showTaskInfo(e){let t=this.getAssignedUserName(e),n=this.getCreatorName(e),o=e.progress||0,i=e.is_done?"Completada":o===0?"Por hacer":"En progreso";alert(`
\u{1F4CB} Informaci\xF3n de la Tarea:

\u{1F4DD} T\xEDtulo: ${e.title}
\u{1F4C4} Descripci\xF3n: ${e.description||"Sin descripci\xF3n"}
\u{1F464} Asignado a: ${t}
\u{1F468}\u200D\u{1F4BB} Creado por: ${n}
\u{1F4CA} Progreso: ${o}%
\u26A1 Estado: ${i}
\u{1F4C5} Creado: ${e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}

\u{1F441}\uFE0F Est\xE1s en modo solo lectura - No puedes realizar cambios
    `)}getTaskStatus(e){return e.is_done?"done":e.progress>0?"in-progress":"todo"}validateTaskData(e){return console.log("=== Validando datos de tarea ==="),console.log("title:",e.title,"type:",typeof e.title),console.log("description:",e.description,"type:",typeof e.description),console.log("workspace_id:",e.workspace_id,"type:",typeof e.workspace_id),console.log("team_id:",e.team_id,"type:",typeof e.team_id),console.log("assigned_to:",e.assigned_to,"type:",typeof e.assigned_to),console.log("progress:",e.progress,"type:",typeof e.progress),console.log("is_done:",e.is_done,"type:",typeof e.is_done),!e.title||e.title.trim()===""?(console.error("\u274C T\xEDtulo vac\xEDo"),!1):!e.workspace_id||isNaN(e.workspace_id)?(console.error("\u274C workspace_id inv\xE1lido"),!1):!e.team_id||isNaN(e.team_id)?(console.error("\u274C team_id inv\xE1lido"),!1):!e.assigned_to||isNaN(e.assigned_to)?(console.error("\u274C assigned_to inv\xE1lido"),!1):(console.log("\u2705 Datos v\xE1lidos"),!0)}getLeaderTeam(){return this.teams.find(e=>e.users?.some(t=>t.id===this.user.id&&t.pivot.role==="leader"))}getLeaderTeamUsers(){return this.getLeaderTeam()?.users||[]}loadTasksBasedOnRole(){console.log("\u{1F3AF} Cargando tareas basado en rol del usuario..."),console.log("\u{1F4CA} Modo solo lectura:",this.isReadOnlyMode),console.log("\u{1F528} Puede crear tareas:",this.canCreateTasks),console.log("\u{1F465} Puede gestionar equipos:",this.canManageTeams),this.loading=!0,this.error="",this.loadTasksWithCorrectEndpoint()}debugAuthentication(){console.log("=== DEBUG AUTENTICACI\xD3N ==="),console.log("\u{1F510} Token en localStorage:",localStorage.getItem("token")),console.log("\u{1F510} Usuario en localStorage:",localStorage.getItem("user")),console.log("\u{1F510} isAuthenticated():",this.auth?.isAuthenticated()),console.log("\u{1F464} Usuario actual:",this.user),console.log("\u{1F3E2} Workspace ID:",this.workspaceId),console.log("========================")}openTeamDetailsSimplified(e){this.selectedTeam=e,this.showTeamDetailsModal=!0,this.availableUsersForTeam=this.availableUsers.filter(t=>!e.users?.some(n=>n.id===t.id)),console.log("Team details abierto (modo simplificado):",e)}addMemberSimplified(){if(!this.selectedUserId||!this.selectedTeam)return;console.log("Agregando miembro (modo simplificado)");let e=this.availableUsers.find(t=>t.id===this.selectedUserId);e&&this.selectedTeam.users&&this.selectedTeam.users.push(ht(rt({},e),{pivot:{role:this.selectedRole}})),this.closeTeamModal()}removeMemberSimplified(e){this.selectedTeam?.users&&(this.selectedTeam.users=this.selectedTeam.users.filter(t=>t.id!==e),console.log("Miembro removido (modo simplificado)"))}loadTasksWithCorrectEndpoint(){console.log("\u{1F3AF} Determinando endpoint correcto seg\xFAn permisos del usuario..."),this.isReadOnlyMode?(console.log("\u{1F464} MIEMBRO: Usando endpoint /api/tasks para tareas asignadas"),this.loadUserAssignedTasks()):(console.log("\u{1F451} L\xCDDER/PROPIETARIO: Usando endpoint /api/workspaces/"+this.workspaceId+"/tasks"),this.loadAllWorkspaceTasks())}loadUserAssignedTasks(){console.log("\u{1F464} Cargando tareas asignadas al usuario (miembro)..."),this.taskService.getTasks().subscribe({next:e=>{this.tasks=e.filter(t=>t.workspace_id===this.workspaceId),this.loading=!1,console.log("\u2705 Tareas asignadas cargadas:",this.tasks.length),console.log("\u{1F4CB} Tareas del miembro:",this.tasks)},error:e=>{console.error("\u274C Error al cargar tareas asignadas:",e),this.error="Error al cargar las tareas asignadas",this.loading=!1}})}static \u0275fac=function(t){return new(t||r)(G(Jt),G(ge),G(an),G(gt),G(wt),G(Oe),G(yt))};static \u0275cmp=pe({type:r,selectors:[["app-pizarra"]],decls:63,vars:23,consts:[[1,"pizarra-page"],[1,"navbar"],[1,"navbar-left"],[1,"back-btn",3,"click"],["src","assets/img/logoPrincipal.png","alt","Logo",1,"logo"],[1,"app-name"],["class","section-name",4,"ngIf"],[1,"navbar-center"],["type","text","placeholder","Buscar tareas...",1,"search-bar"],[1,"navbar-right"],[1,"user-menu"],["alt","Usuario",1,"avatar",3,"src"],["class","user-name",4,"ngIf"],[1,"dropdown"],["href","#"],["href","#",3,"click"],[1,"main-content"],[1,"content-header"],[4,"ngIf"],["class","workspace-description",4,"ngIf"],[1,"loading-error"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"action-buttons"],["class","create-team-btn",3,"click",4,"ngIf"],["class","create-task-btn",3,"disabled","click",4,"ngIf"],["class","read-only-banner",4,"ngIf"],["class","teams-section",4,"ngIf"],["class","no-teams-message",4,"ngIf"],[1,"kanban-board"],[1,"column"],[1,"column-header","todo-header"],[1,"task-count"],[1,"task-list"],["class","task-card",3,"click",4,"ngFor","ngForOf"],[1,"column-header","progress-header"],[1,"column-header","done-header"],["class","task-card completed",3,"click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"section-name"],[1,"user-name"],[1,"workspace-description"],[1,"loading"],[1,"error"],[1,"create-team-btn",3,"click"],[1,"create-task-btn",3,"click","disabled"],[1,"read-only-banner"],[1,"read-only-content"],[1,"read-only-icon"],[1,"read-only-text"],[1,"read-only-note"],[1,"teams-section"],[1,"teams-grid"],["class","team-card",4,"ngFor","ngForOf"],[1,"team-card"],[1,"team-header"],["class","team-actions",4,"ngIf"],[1,"team-members"],["class","member",4,"ngFor","ngForOf"],["class","no-members",4,"ngIf"],[1,"team-actions"],["class","manage-members-btn",3,"click",4,"ngIf"],["class","delete-team-btn",3,"click",4,"ngIf"],[1,"manage-members-btn",3,"click"],[1,"delete-team-btn",3,"click"],[1,"member"],[1,"role"],[1,"no-members"],[1,"no-teams-message"],[1,"task-card",3,"click"],[1,"task-header"],[1,"progress-badge"],[1,"task-description"],[1,"task-meta"],["class","assigned-to",4,"ngIf"],[1,"created-by"],["class","task-actions",4,"ngIf"],[1,"assigned-to"],[1,"task-actions"],[1,"move-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"task-card","completed",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"task-form",3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","","placeholder","Ingresa el t\xEDtulo de la tarea",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","3","placeholder","Describe la tarea (opcional)",3,"ngModelChange","ngModel"],[1,"form-row"],["for","progress"],["type","range","id","progress","name","progress","min","0","max","100",1,"progress-slider",3,"ngModelChange","ngModel"],[1,"progress-value"],["for","is_done"],[1,"checkbox-label"],["type","checkbox","id","is_done","name","is_done",3,"ngModelChange","ngModel"],["for","team_info"],[1,"team-info-display"],["class","team-name",4,"ngIf"],["class","no-team",4,"ngIf"],[1,"form-help"],["for","assigned_to"],["id","assigned_to","name","assigned_to","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"save-btn",3,"disabled"],[1,"team-name"],[1,"no-team"],[3,"value"],["for","team-name"],["type","text","id","team-name","name","teamName","required","","placeholder","Ingresa el nombre del equipo",3,"ngModelChange","ngModel"],[1,"modal-content","members-modal",3,"click"],["class","current-members",4,"ngIf"],[1,"add-member-section"],["for","user-select"],["id","user-select","name","userId","required","",3,"ngModelChange","ngModel","disabled"],["value","0"],["class","no-users-message",4,"ngIf"],["for","role-select"],["id","role-select","name","role","required","",3,"ngModelChange","ngModel"],["value","member"],["value","leader"],[1,"current-members"],[1,"members-list"],["class","member-item",4,"ngFor","ngForOf"],[1,"member-item"],[1,"member-info"],[1,"member-name"],[1,"member-role"],["class","remove-member-btn",3,"click",4,"ngIf"],[1,"remove-member-btn",3,"click"],[1,"no-users-message"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),k("click",function(){return n.goBack()}),c(4,"\u2190 Volver"),a(),te(5,"img",4),s(6,"span",5),c(7,"KanbanFlow"),a(),w(8,Xi,2,1,"span",6),a(),s(9,"div",7),te(10,"input",8),a(),s(11,"div",9)(12,"div",10),te(13,"img",11),w(14,Qi,2,2,"span",12),s(15,"div",13)(16,"a",14),c(17,"Mi Perfil"),a(),s(18,"a",15),k("click",function(i){return n.goBack(),i.preventDefault()}),c(19,"Mis Workspaces"),a(),s(20,"a",15),k("click",function(i){return n.onLogout(),i.preventDefault()}),c(21,"Cerrar Sesi\xF3n"),a()()()()(),s(22,"main",16)(23,"div",17),w(24,Ji,2,1,"h2",18)(25,es,2,1,"p",19),s(26,"div",20),w(27,ts,2,0,"div",21)(28,ns,2,1,"div",22),a(),s(29,"div",23),w(30,rs,2,0,"button",24)(31,os,2,1,"button",25)(32,is,8,1,"div",26),a()(),w(33,ms,5,1,"div",27)(34,ps,3,0,"div",28),s(35,"div",29)(36,"div",30)(37,"div",31)(38,"h3"),c(39,"\u{1F4DD} Por Hacer"),a(),s(40,"span",32),c(41),a()(),s(42,"div",33),w(43,hs,13,8,"div",34),a()(),s(44,"div",30)(45,"div",35)(46,"h3"),c(47,"\u26A1 En Progreso"),a(),s(48,"span",32),c(49),a()(),s(50,"div",33),w(51,Cs,13,8,"div",34),a()(),s(52,"div",30)(53,"div",36)(54,"h3"),c(55,"\u2705 Completado"),a(),s(56,"span",32),c(57),a()(),s(58,"div",33),w(59,ks,13,8,"div",37),a()()()(),w(60,xs,50,12,"div",38)(61,ys,17,2,"div",38),a(),w(62,Rs,33,10,"div",38)),t&2&&($t("read-only-mode",n.isReadOnlyMode),l(8),f("ngIf",n.workspace),l(5),f("src",(n.user==null?null:n.user.avatar)||"assets/avatar.svg",ot),l(),f("ngIf",n.user),l(10),f("ngIf",n.workspace),l(),f("ngIf",n.workspace),l(2),f("ngIf",n.loading),l(),f("ngIf",n.error),l(2),f("ngIf",n.canManageTeams),l(),f("ngIf",n.canCreateTasks),l(),f("ngIf",n.isReadOnlyMode&&!n.readOnlyMessage.includes("\u274C")),l(),f("ngIf",n.teams.length>0),l(),f("ngIf",n.teams.length===0&&!n.loading),l(7),B(n.getTasksByStatus("todo").length),l(2),f("ngForOf",n.getTasksByStatus("todo")),l(6),B(n.getTasksByStatus("in-progress").length),l(2),f("ngForOf",n.getTasksByStatus("in-progress")),l(6),B(n.getTasksByStatus("done").length),l(2),f("ngForOf",n.getTasksByStatus("done")),l(),f("ngIf",n.showTaskModal),l(),f("ngIf",n.showTeamModal),l(),f("ngIf",n.showMembersModal))},dependencies:[Me,_t,ke,Se,at,Re,rn,on,Ee,tn,Ct,nn,De,Ie,kt,st,it],styles:['@charset "UTF-8";.pizarra-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Inter,Segoe UI,sans-serif}.navbar[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.2);padding:.75rem 1.5rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:20px;color:#fff;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]   .section-name[_ngcontent-%COMP%]{font-size:1rem;color:#fffc}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{flex:1;max-width:400px;margin:0 2rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:25px;color:#fff;font-size:.9rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffffff80;background:#fff3}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;position:relative}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:2px solid rgba(255,255,255,.3)}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9rem}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:12px;padding:.5rem 0;min-width:180px;box-shadow:0 8px 32px #0000004d;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:#333;text-decoration:none;font-size:.9rem;transition:background-color .2s ease}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#6366f11a;color:#6366f1}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]:hover   .dropdown[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.main-content[_ngcontent-%COMP%]{padding:2rem}.teams-section[_ngcontent-%COMP%]{margin-bottom:2rem;background:#ffffff1a;border-radius:16px;padding:1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.teams-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:1rem;font-size:1.5rem}.teams-section[_ngcontent-%COMP%]   .teams-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:12px;padding:1rem;box-shadow:0 4px 12px #0000001a}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:1.1rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   .delete-team-btn[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;padding:.5rem;border-radius:6px;cursor:pointer;transition:all .2s ease}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   .delete-team-btn[_ngcontent-%COMP%]:hover{background:#fecaca}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]{background:#f3f4f6;padding:.25rem .75rem;border-radius:20px;font-size:.85rem;color:#374151;display:flex;align-items:center;gap:.25rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.75rem}.teams-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .team-members[_ngcontent-%COMP%]   .no-members[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;font-size:.9rem}.no-teams-message[_ngcontent-%COMP%]{text-align:center;color:#fffc;background:#ffffff1a;border-radius:12px;padding:2rem;margin-bottom:2rem}.no-teams-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.content-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.1)}.content-header[_ngcontent-%COMP%]   .workspace-description[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem;margin-bottom:1.5rem}.content-header[_ngcontent-%COMP%]   .create-task-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #10b9814d}.content-header[_ngcontent-%COMP%]   .create-task-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669;transform:translateY(-2px);box-shadow:0 6px 16px #10b98166}.content-header[_ngcontent-%COMP%]   .create-task-btn[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed;transform:none;box-shadow:none}.content-header[_ngcontent-%COMP%]   .create-team-btn[_ngcontent-%COMP%]{background:#6366f1;color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #6366f14d}.content-header[_ngcontent-%COMP%]   .create-team-btn[_ngcontent-%COMP%]:hover{background:#5855eb;transform:translateY(-2px);box-shadow:0 6px 16px #6366f166}.content-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.kanban-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;max-width:1400px;margin:0 auto}.column[_ngcontent-%COMP%]{background:#fffffff2;border-radius:16px;padding:1.5rem;box-shadow:0 8px 32px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);min-height:600px}.column-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid #f3f4f6}.column-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin:0}.column-header[_ngcontent-%COMP%]   .task-count[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;padding:.25rem .75rem;border-radius:12px;font-size:.85rem;font-weight:600}.column-header.todo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3b82f6}.column-header.progress-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f59e0b}.column-header.done-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#10b981}.task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.task-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;cursor:pointer;transition:all .3s ease;border:2px solid transparent;box-shadow:0 2px 8px #0000000d}.task-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001a;border-color:#6366f1}.task-card.completed[_ngcontent-%COMP%]{opacity:.8}.task-card.completed[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-decoration:line-through;color:#6b7280}.task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.task-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:#1f2937;line-height:1.4}.task-header[_ngcontent-%COMP%]   .priority-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:8px;font-size:.75rem;font-weight:600;text-transform:uppercase}.task-header[_ngcontent-%COMP%]   .priority-badge.priority-low[_ngcontent-%COMP%]{background:#dbeafe;color:#3b82f6}.task-header[_ngcontent-%COMP%]   .priority-badge.priority-medium[_ngcontent-%COMP%]{background:#fef3c7;color:#f59e0b}.task-header[_ngcontent-%COMP%]   .priority-badge.priority-high[_ngcontent-%COMP%]{background:#fee2e2;color:#ef4444}.task-header[_ngcontent-%COMP%]   .progress-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:8px;font-size:.75rem;font-weight:600;background:#f3f4f6;color:#374151}.task-header[_ngcontent-%COMP%]   .progress-badge.priority-low[_ngcontent-%COMP%]{background:#dbeafe;color:#3b82f6}.task-header[_ngcontent-%COMP%]   .progress-badge.priority-medium[_ngcontent-%COMP%]{background:#fef3c7;color:#f59e0b}.task-header[_ngcontent-%COMP%]   .progress-badge.priority-high[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.task-description[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;line-height:1.5;margin-bottom:1rem}.task-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;margin-bottom:1rem;font-size:.8rem;color:#6b7280}.task-meta[_ngcontent-%COMP%]   .assigned-to[_ngcontent-%COMP%], .task-meta[_ngcontent-%COMP%]   .created-by[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.task-meta[_ngcontent-%COMP%]   .read-only-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:#6b72801a;color:#6b7280;padding:.125rem .5rem;border-radius:8px;font-size:.75rem;font-weight:500;margin-left:.5rem}.loading-error[_ngcontent-%COMP%]{margin:1rem 0;text-align:center}.loading-error[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{color:#fffc;font-style:italic}.loading-error[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ef4444;background:#ef44441a;padding:.5rem 1rem;border-radius:8px;display:inline-block}.task-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.task-actions[_ngcontent-%COMP%]   .move-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:none;padding:.5rem .75rem;border-radius:8px;font-size:.8rem;cursor:pointer;transition:all .3s ease}.task-actions[_ngcontent-%COMP%]   .move-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.task-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:#fee2e2;color:#ef4444;border:none;padding:.5rem .75rem;border-radius:8px;font-size:.8rem;cursor:pointer;transition:all .3s ease}.task-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background:#fecaca}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#1f2937}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#6b7280;padding:.5rem;border-radius:8px;transition:all .3s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.task-form[_ngcontent-%COMP%]{padding:1.5rem}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#374151}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all .3s ease}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{width:100%;height:6px;background:#e5e7eb;border-radius:3px;outline:none}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;background:#6366f1;border-radius:50%;cursor:pointer}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;background:#6366f1;border-radius:50%;cursor:pointer;border:none}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%]{display:block;text-align:center;font-weight:600;color:#6366f1;margin-top:.5rem}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:400;cursor:pointer}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.task-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.task-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;padding-top:1rem;border-top:1px solid #e5e7eb}.modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#6366f1;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#5855eb}.modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}.form-help[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.75rem;color:#6b7280;font-style:italic;line-height:1.3}.read-only-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf241a,#f59e0b1a);border:1px solid rgba(245,158,11,.3);border-radius:12px;padding:1rem 1.5rem;margin:1rem 0}.read-only-banner[_ngcontent-%COMP%]   .read-only-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem}.read-only-banner[_ngcontent-%COMP%]   .read-only-content[_ngcontent-%COMP%]   .read-only-icon[_ngcontent-%COMP%]{font-size:1.5rem}.read-only-banner[_ngcontent-%COMP%]   .read-only-content[_ngcontent-%COMP%]   .read-only-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#92400e}.read-only-banner[_ngcontent-%COMP%]   .read-only-note[_ngcontent-%COMP%]{color:#a16207;font-size:.875rem;font-style:italic;margin-left:2.25rem}.read-only-mode[_ngcontent-%COMP%]   .task-actions[_ngcontent-%COMP%], .read-only-mode[_ngcontent-%COMP%]   .team-actions[_ngcontent-%COMP%]{display:none!important}.read-only-mode[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%], .read-only-mode[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{cursor:default!important}.read-only-mode[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]:hover, .read-only-mode[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{transform:none!important}.read-only-indicator[_ngcontent-%COMP%]{padding:.5rem;text-align:center;background:#6b72801a;border-top:1px solid rgba(107,114,128,.2);border-radius:0 0 12px 12px;margin-top:.5rem}.read-only-indicator[_ngcontent-%COMP%]   .read-only-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;font-weight:500;font-style:italic}.read-only-mode[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{position:relative}.read-only-mode[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]:after{content:"\\1f441\\fe0f";position:absolute;top:.5rem;right:.5rem;background:#6b72801a;color:#6b7280;padding:.25rem .5rem;border-radius:12px;font-size:.75rem;pointer-events:none}.read-only-mode[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000000d!important;border-color:#6b728033!important}.read-only-mode[_ngcontent-%COMP%]   .read-only-banner[_ngcontent-%COMP%]{position:sticky;top:0;z-index:50;margin-bottom:1.5rem}.access-denied-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#dc26261a);border:1px solid rgba(220,38,38,.3);border-radius:12px;padding:2rem;text-align:center;margin:2rem 0}.access-denied-banner[_ngcontent-%COMP%]   .denied-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.access-denied-banner[_ngcontent-%COMP%]   .denied-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#dc2626;margin-bottom:.5rem}.access-denied-banner[_ngcontent-%COMP%]   .denied-message[_ngcontent-%COMP%]{color:#991b1b;font-size:1rem;margin-bottom:1.5rem}.access-denied-banner[_ngcontent-%COMP%]   .back-to-workspaces[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.access-denied-banner[_ngcontent-%COMP%]   .back-to-workspaces[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-1px)}.denied-explanation[_ngcontent-%COMP%]{background:#dc26260d;border-left:4px solid #dc2626;padding:1rem;margin:1rem 0;border-radius:0 8px 8px 0;color:#991b1b;font-size:.95rem;line-height:1.6}.access-controls-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#2563eb0d);border:1px solid rgba(59,130,246,.2);border-radius:12px;padding:1.5rem;margin:1.5rem 0}.access-controls-info[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1e40af;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}.access-controls-info[_ngcontent-%COMP%]   .permission-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.access-controls-info[_ngcontent-%COMP%]   .permission-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;color:#3730a3;display:flex;align-items:center;gap:.5rem}.access-controls-info[_ngcontent-%COMP%]   .permission-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";color:#059669;font-weight:700}.access-controls-info[_ngcontent-%COMP%]   .permission-list[_ngcontent-%COMP%]   li.restricted[_ngcontent-%COMP%]:before{content:"\\2717";color:#dc2626}@media (max-width: 1024px){.kanban-board[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.navbar[_ngcontent-%COMP%]{padding:1rem}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{margin:0 1rem}.main-content[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.navbar[_ngcontent-%COMP%]   .navbar-left[_ngcontent-%COMP%]{justify-content:center}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{margin:0;width:100%}.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]{justify-content:center}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.modal-content[_ngcontent-%COMP%]{width:95%;margin:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.members-modal[_ngcontent-%COMP%]{max-width:600px;max-height:80vh;overflow-y:auto}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(0,0,0,.1)}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#374151;font-size:1.1rem}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f9fafbcc;border-radius:8px;border:1px solid rgba(0,0,0,.05)}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-weight:500;color:#111827}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem .5rem;border-radius:4px;width:fit-content}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-role.leader[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-role.member[_ngcontent-%COMP%]{background:#e0e7ff;color:#4338ca}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .remove-member-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:none;padding:.5rem .75rem;border-radius:6px;cursor:pointer;font-size:.875rem;transition:background .2s ease}.members-modal[_ngcontent-%COMP%]   .current-members[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .remove-member-btn[_ngcontent-%COMP%]:hover{background:#dc2626}.members-modal[_ngcontent-%COMP%]   .add-member-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#374151;font-size:1.1rem}.members-modal[_ngcontent-%COMP%]   .add-member-section[_ngcontent-%COMP%]   .no-users-message[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;margin-top:.5rem;padding:.5rem;background:#9ca3af1a;border-radius:4px;text-align:center}.team-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.manage-members-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:none;padding:.375rem .75rem;border-radius:6px;cursor:pointer;font-size:.875rem;font-weight:500;transition:all .2s ease}.manage-members-btn[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}.loading-users[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;text-align:center;padding:1rem}.member-workspace-indicator[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6;padding:.25rem .5rem;border-radius:12px;font-size:.75rem;font-weight:500;margin-left:.5rem}.team-info-display[_ngcontent-%COMP%]{padding:.75rem;background:#f3f4f6;border-radius:6px;border:1px solid #d1d5db}.team-info-display[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]{color:#059669;font-weight:500;display:flex;align-items:center;gap:.5rem}.team-info-display[_ngcontent-%COMP%]   .team-name[_ngcontent-%COMP%]:before{content:"\\1f451";font-size:1rem}.team-info-display[_ngcontent-%COMP%]   .no-team[_ngcontent-%COMP%]{color:#dc2626;font-style:italic;display:flex;align-items:center;gap:.5rem}.team-info-display[_ngcontent-%COMP%]   .no-team[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:1rem}']})};var Ke=class r{constructor(e){this.router=e}canActivate(){return(typeof window<"u"&&typeof localStorage<"u"?localStorage.getItem("token"):null)?!0:this.router.createUrlTree(["/login"])}static \u0275fac=function(t){return new(t||r)(Ue(ge))};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})};var pt=class r{constructor(e){this.router=e}canActivate(){return(typeof window<"u"&&typeof localStorage<"u"?localStorage.getItem("token"):null)?this.router.createUrlTree(["/workspace-list"]):!0}static \u0275fac=function(t){return new(t||r)(Ue(ge))};static \u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"})};var to=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:un,canActivate:[pt]},{path:"register",component:fn,canActivate:[pt]},{path:"forgot-password",component:hn,canActivate:[pt]},{path:"reset-password",component:_n,canActivate:[pt]},{path:"home",component:bn,canActivate:[Ke]},{path:"dashboard",component:Cn,canActivate:[Ke]},{path:"workspace-list",component:vn,canActivate:[Ke]},{path:"workspace-form",component:Pn,canActivate:[Ke]},{path:"workspace/:id",component:kn,canActivate:[Ke]},{path:"workspace-viewer/:id",loadComponent:()=>import("./chunk-JINDKJ7N.js").then(r=>r.WorkspaceViewerComponent),canActivate:[Ke]}];var Ge=globalThis;function Ne(r){return(Ge.__Zone_symbol_prefix||"__zone_symbol__")+r}function Fs(){let r=Ge.performance;function e(H){r&&r.mark&&r.mark(H)}function t(H,S){r&&r.measure&&r.measure(H,S)}e("Zone");let n=(()=>{class H{static __symbol__=Ne;static assertZonePatched(){if(Ge.Promise!==j.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let g=H.current;for(;g.parent;)g=g.parent;return g}static get current(){return z.zone}static get currentTask(){return U}static __load_patch(g,p,R=!1){if(j.hasOwnProperty(g)){let N=Ge[Ne("forceDuplicateZoneCheck")]===!0;if(!R&&N)throw Error("Already loaded patch: "+g)}else if(!Ge["__Zone_disable_"+g]){let N="Zone:"+g;e(N),j[g]=p(Ge,H,W),t(N,N)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(g,p){this._parent=g,this._name=p?p.name||"unnamed":"<root>",this._properties=p&&p.properties||{},this._zoneDelegate=new i(this,this._parent&&this._parent._zoneDelegate,p)}get(g){let p=this.getZoneWith(g);if(p)return p._properties[g]}getZoneWith(g){let p=this;for(;p;){if(p._properties.hasOwnProperty(g))return p;p=p._parent}return null}fork(g){if(!g)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,g)}wrap(g,p){if(typeof g!="function")throw new Error("Expecting function got: "+g);let R=this._zoneDelegate.intercept(this,g,p),N=this;return function(){return N.runGuarded(R,this,arguments,p)}}run(g,p,R,N){z={parent:z,zone:this};try{return this._zoneDelegate.invoke(this,g,p,R,N)}finally{z=z.parent}}runGuarded(g,p=null,R,N){z={parent:z,zone:this};try{try{return this._zoneDelegate.invoke(this,g,p,R,N)}catch(fe){if(this._zoneDelegate.handleError(this,fe))throw fe}}finally{z=z.parent}}runTask(g,p,R){if(g.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(g.zone||ee).name+"; Execution: "+this.name+")");let N=g,{type:fe,data:{isPeriodic:Y=!1,isRefreshable:tt=!1}={}}=g;if(g.state===me&&(fe===de||fe===D))return;let Ze=g.state!=K;Ze&&N._transitionTo(K,O);let $e=U;U=N,z={parent:z,zone:this};try{fe==D&&g.data&&!Y&&!tt&&(g.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,N,p,R)}catch(We){if(this._zoneDelegate.handleError(this,We))throw We}}finally{let We=g.state;if(We!==me&&We!==_e)if(fe==de||Y||tt&&We===E)Ze&&N._transitionTo(O,K,E);else{let M=N._zoneDelegates;this._updateTaskCount(N,-1),Ze&&N._transitionTo(me,K,me),tt&&(N._zoneDelegates=M)}z=z.parent,U=$e}}scheduleTask(g){if(g.zone&&g.zone!==this){let R=this;for(;R;){if(R===g.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${g.zone.name}`);R=R.parent}}g._transitionTo(E,me);let p=[];g._zoneDelegates=p,g._zone=this;try{g=this._zoneDelegate.scheduleTask(this,g)}catch(R){throw g._transitionTo(_e,E,me),this._zoneDelegate.handleError(this,R),R}return g._zoneDelegates===p&&this._updateTaskCount(g,1),g.state==E&&g._transitionTo(O,E),g}scheduleMicroTask(g,p,R,N){return this.scheduleTask(new d(re,g,p,R,N,void 0))}scheduleMacroTask(g,p,R,N,fe){return this.scheduleTask(new d(D,g,p,R,N,fe))}scheduleEventTask(g,p,R,N,fe){return this.scheduleTask(new d(de,g,p,R,N,fe))}cancelTask(g){if(g.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(g.zone||ee).name+"; Execution: "+this.name+")");if(!(g.state!==O&&g.state!==K)){g._transitionTo(Q,O,K);try{this._zoneDelegate.cancelTask(this,g)}catch(p){throw g._transitionTo(_e,Q),this._zoneDelegate.handleError(this,p),p}return this._updateTaskCount(g,-1),g._transitionTo(me,Q),g.runCount=-1,g}}_updateTaskCount(g,p){let R=g._zoneDelegates;p==-1&&(g._zoneDelegates=null);for(let N=0;N<R.length;N++)R[N]._updateTaskCount(g.type,p)}}return H})(),o={name:"",onHasTask:(H,S,g,p)=>H.hasTask(g,p),onScheduleTask:(H,S,g,p)=>H.scheduleTask(g,p),onInvokeTask:(H,S,g,p,R,N)=>H.invokeTask(g,p,R,N),onCancelTask:(H,S,g,p)=>H.cancelTask(g,p)};class i{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(S,g,p){this._zone=S,this._parentDelegate=g,this._forkZS=p&&(p&&p.onFork?p:g._forkZS),this._forkDlgt=p&&(p.onFork?g:g._forkDlgt),this._forkCurrZone=p&&(p.onFork?this._zone:g._forkCurrZone),this._interceptZS=p&&(p.onIntercept?p:g._interceptZS),this._interceptDlgt=p&&(p.onIntercept?g:g._interceptDlgt),this._interceptCurrZone=p&&(p.onIntercept?this._zone:g._interceptCurrZone),this._invokeZS=p&&(p.onInvoke?p:g._invokeZS),this._invokeDlgt=p&&(p.onInvoke?g:g._invokeDlgt),this._invokeCurrZone=p&&(p.onInvoke?this._zone:g._invokeCurrZone),this._handleErrorZS=p&&(p.onHandleError?p:g._handleErrorZS),this._handleErrorDlgt=p&&(p.onHandleError?g:g._handleErrorDlgt),this._handleErrorCurrZone=p&&(p.onHandleError?this._zone:g._handleErrorCurrZone),this._scheduleTaskZS=p&&(p.onScheduleTask?p:g._scheduleTaskZS),this._scheduleTaskDlgt=p&&(p.onScheduleTask?g:g._scheduleTaskDlgt),this._scheduleTaskCurrZone=p&&(p.onScheduleTask?this._zone:g._scheduleTaskCurrZone),this._invokeTaskZS=p&&(p.onInvokeTask?p:g._invokeTaskZS),this._invokeTaskDlgt=p&&(p.onInvokeTask?g:g._invokeTaskDlgt),this._invokeTaskCurrZone=p&&(p.onInvokeTask?this._zone:g._invokeTaskCurrZone),this._cancelTaskZS=p&&(p.onCancelTask?p:g._cancelTaskZS),this._cancelTaskDlgt=p&&(p.onCancelTask?g:g._cancelTaskDlgt),this._cancelTaskCurrZone=p&&(p.onCancelTask?this._zone:g._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let R=p&&p.onHasTask,N=g&&g._hasTaskZS;(R||N)&&(this._hasTaskZS=R?p:o,this._hasTaskDlgt=g,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,p.onScheduleTask||(this._scheduleTaskZS=o,this._scheduleTaskDlgt=g,this._scheduleTaskCurrZone=this._zone),p.onInvokeTask||(this._invokeTaskZS=o,this._invokeTaskDlgt=g,this._invokeTaskCurrZone=this._zone),p.onCancelTask||(this._cancelTaskZS=o,this._cancelTaskDlgt=g,this._cancelTaskCurrZone=this._zone))}fork(S,g){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,S,g):new n(S,g)}intercept(S,g,p){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,S,g,p):g}invoke(S,g,p,R,N){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,S,g,p,R,N):g.apply(p,R)}handleError(S,g){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,S,g):!0}scheduleTask(S,g){let p=g;if(this._scheduleTaskZS)this._hasTaskZS&&p._zoneDelegates.push(this._hasTaskDlgtOwner),p=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,S,g),p||(p=g);else if(g.scheduleFn)g.scheduleFn(g);else if(g.type==re)ne(g);else throw new Error("Task is missing scheduleFn.");return p}invokeTask(S,g,p,R){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,S,g,p,R):g.callback.apply(p,R)}cancelTask(S,g){let p;if(this._cancelTaskZS)p=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,S,g);else{if(!g.cancelFn)throw Error("Task is not cancelable");p=g.cancelFn(g)}return p}hasTask(S,g){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,S,g)}catch(p){this.handleError(S,p)}}_updateTaskCount(S,g){let p=this._taskCounts,R=p[S],N=p[S]=R+g;if(N<0)throw new Error("More tasks executed then were scheduled.");if(R==0||N==0){let fe={microTask:p.microTask>0,macroTask:p.macroTask>0,eventTask:p.eventTask>0,change:S};this.hasTask(this._zone,fe)}}}class d{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(S,g,p,R,N,fe){if(this.type=S,this.source=g,this.data=R,this.scheduleFn=N,this.cancelFn=fe,!p)throw new Error("callback is not defined");this.callback=p;let Y=this;S===de&&R&&R.useG?this.invoke=d.invokeTask:this.invoke=function(){return d.invokeTask.call(Ge,Y,this,arguments)}}static invokeTask(S,g,p){S||(S=this),xe++;try{return S.runCount++,S.zone.runTask(S,g,p)}finally{xe==1&&Pe(),xe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(me,E)}_transitionTo(S,g,p){if(this._state===g||this._state===p)this._state=S,S==me&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${S}', expecting state '${g}'${p?" or '"+p+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let m=Ne("setTimeout"),_=Ne("Promise"),b=Ne("then"),C=[],T=!1,A;function X(H){if(A||Ge[_]&&(A=Ge[_].resolve(0)),A){let S=A[b];S||(S=A.then),S.call(A,H)}else Ge[m](H,0)}function ne(H){xe===0&&C.length===0&&X(Pe),H&&C.push(H)}function Pe(){if(!T){for(T=!0;C.length;){let H=C;C=[];for(let S=0;S<H.length;S++){let g=H[S];try{g.zone.runTask(g,null,null)}catch(p){W.onUnhandledError(p)}}}W.microtaskDrainDone(),T=!1}}let ee={name:"NO ZONE"},me="notScheduled",E="scheduling",O="scheduled",K="running",Q="canceling",_e="unknown",re="microTask",D="macroTask",de="eventTask",j={},W={symbol:Ne,currentZoneFrame:()=>z,onUnhandledError:ue,microtaskDrainDone:ue,scheduleMicroTask:ne,showUncaughtError:()=>!n[Ne("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:ue,patchMethod:()=>ue,bindArguments:()=>[],patchThen:()=>ue,patchMacroTask:()=>ue,patchEventPrototype:()=>ue,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>ue,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>ue,wrapWithCurrentZone:()=>ue,filterProperties:()=>[],attachOriginToPatched:()=>ue,_redefineProperty:()=>ue,patchCallbacks:()=>ue,nativeScheduleMicroTask:X},z={parent:null,zone:new n(null,null)},U=null,xe=0;function ue(){}return t("Zone","Zone"),n}function zs(){let r=globalThis,e=r[Ne("forceDuplicateZoneCheck")]===!0;if(r.Zone&&(e||typeof r.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return r.Zone??=Fs(),r.Zone}var Wt=Object.getOwnPropertyDescriptor,Jn=Object.defineProperty,er=Object.getPrototypeOf,As=Object.create,Ns=Array.prototype.slice,tr="addEventListener",nr="removeEventListener",Yn=Ne(tr),Kn=Ne(nr),Xe="true",Qe="false",Vt=Ne("");function rr(r,e){return Zone.current.wrap(r,e)}function or(r,e,t,n,o){return Zone.current.scheduleMacroTask(r,e,t,n,o)}var J=Ne,On=typeof window<"u",Ut=On?window:void 0,ve=On&&Ut||globalThis,Ls="removeAttribute";function ir(r,e){for(let t=r.length-1;t>=0;t--)typeof r[t]=="function"&&(r[t]=rr(r[t],e+"_"+t));return r}function Ws(r,e){let t=r.constructor.name;for(let n=0;n<e.length;n++){let o=e[n],i=r[o];if(i){let d=Wt(r,o);if(!co(d))continue;r[o]=(m=>{let _=function(){return m.apply(this,ir(arguments,t+"."+o))};return et(_,m),_})(i)}}}function co(r){return r?r.writable===!1?!1:!(typeof r.get=="function"&&typeof r.set>"u"):!0}var lo=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,xn=!("nw"in ve)&&typeof ve.process<"u"&&ve.process.toString()==="[object process]",sr=!xn&&!lo&&!!(On&&Ut.HTMLElement),go=typeof ve.process<"u"&&ve.process.toString()==="[object process]"&&!lo&&!!(On&&Ut.HTMLElement),wn={},Vs=J("enable_beforeunload"),no=function(r){if(r=r||ve.event,!r)return;let e=wn[r.type];e||(e=wn[r.type]=J("ON_PROPERTY"+r.type));let t=this||r.target||ve,n=t[e],o;if(sr&&t===Ut&&r.type==="error"){let i=r;o=n&&n.call(this,i.message,i.filename,i.lineno,i.colno,i.error),o===!0&&r.preventDefault()}else o=n&&n.apply(this,arguments),r.type==="beforeunload"&&ve[Vs]&&typeof o=="string"?r.returnValue=o:o!=null&&!o&&r.preventDefault();return o};function ro(r,e,t){let n=Wt(r,e);if(!n&&t&&Wt(t,e)&&(n={enumerable:!0,configurable:!0}),!n||!n.configurable)return;let o=J("on"+e+"patched");if(r.hasOwnProperty(o)&&r[o])return;delete n.writable,delete n.value;let i=n.get,d=n.set,m=e.slice(2),_=wn[m];_||(_=wn[m]=J("ON_PROPERTY"+m)),n.set=function(b){let C=this;if(!C&&r===ve&&(C=ve),!C)return;typeof C[_]=="function"&&C.removeEventListener(m,no),d?.call(C,null),C[_]=b,typeof b=="function"&&C.addEventListener(m,no,!1)},n.get=function(){let b=this;if(!b&&r===ve&&(b=ve),!b)return null;let C=b[_];if(C)return C;if(i){let T=i.call(this);if(T)return n.set.call(this,T),typeof b[Ls]=="function"&&b.removeAttribute(e),T}return null},Jn(r,e,n),r[o]=!0}function mo(r,e,t){if(e)for(let n=0;n<e.length;n++)ro(r,"on"+e[n],t);else{let n=[];for(let o in r)o.slice(0,2)=="on"&&n.push(o);for(let o=0;o<n.length;o++)ro(r,n[o],t)}}var Be=J("originalInstance");function Lt(r){let e=ve[r];if(!e)return;ve[J(r)]=e,ve[r]=function(){let o=ir(arguments,r);switch(o.length){case 0:this[Be]=new e;break;case 1:this[Be]=new e(o[0]);break;case 2:this[Be]=new e(o[0],o[1]);break;case 3:this[Be]=new e(o[0],o[1],o[2]);break;case 4:this[Be]=new e(o[0],o[1],o[2],o[3]);break;default:throw new Error("Arg list too long.")}},et(ve[r],e);let t=new e(function(){}),n;for(n in t)r==="XMLHttpRequest"&&n==="responseBlob"||function(o){typeof t[o]=="function"?ve[r].prototype[o]=function(){return this[Be][o].apply(this[Be],arguments)}:Jn(ve[r].prototype,o,{set:function(i){typeof i=="function"?(this[Be][o]=rr(i,r+"."+o),et(this[Be][o],i)):this[Be][o]=i},get:function(){return this[Be][o]}})}(n);for(n in e)n!=="prototype"&&e.hasOwnProperty(n)&&(ve[r][n]=e[n])}function Je(r,e,t){let n=r;for(;n&&!n.hasOwnProperty(e);)n=er(n);!n&&r[e]&&(n=r);let o=J(e),i=null;if(n&&(!(i=n[o])||!n.hasOwnProperty(o))){i=n[o]=n[e];let d=n&&Wt(n,e);if(co(d)){let m=t(i,o,e);n[e]=function(){return m(this,arguments)},et(n[e],i)}}return i}function Us(r,e,t){let n=null;function o(i){let d=i.data;return d.args[d.cbIdx]=function(){i.invoke.apply(this,arguments)},n.apply(d.target,d.args),i}n=Je(r,e,i=>function(d,m){let _=t(d,m);return _.cbIdx>=0&&typeof m[_.cbIdx]=="function"?or(_.name,m[_.cbIdx],_,o):i.apply(d,m)})}function et(r,e){r[J("OriginalDelegate")]=e}var oo=!1,Xn=!1;function Bs(){if(oo)return Xn;oo=!0;try{let r=Ut.navigator.userAgent;(r.indexOf("MSIE ")!==-1||r.indexOf("Trident/")!==-1||r.indexOf("Edge/")!==-1)&&(Xn=!0)}catch{}return Xn}function io(r){return typeof r=="function"}function so(r){return typeof r=="number"}var js={useG:!0},Le={},po={},uo=new RegExp("^"+Vt+"(\\w+)(true|false)$"),fo=J("propagationStopped");function ho(r,e){let t=(e?e(r):r)+Qe,n=(e?e(r):r)+Xe,o=Vt+t,i=Vt+n;Le[r]={},Le[r][Qe]=o,Le[r][Xe]=i}function Hs(r,e,t,n){let o=n&&n.add||tr,i=n&&n.rm||nr,d=n&&n.listeners||"eventListeners",m=n&&n.rmAll||"removeAllListeners",_=J(o),b="."+o+":",C="prependListener",T="."+C+":",A=function(E,O,K){if(E.isRemoved)return;let Q=E.callback;typeof Q=="object"&&Q.handleEvent&&(E.callback=D=>Q.handleEvent(D),E.originalDelegate=Q);let _e;try{E.invoke(E,O,[K])}catch(D){_e=D}let re=E.options;if(re&&typeof re=="object"&&re.once){let D=E.originalDelegate?E.originalDelegate:E.callback;O[i].call(O,K.type,D,re)}return _e};function X(E,O,K){if(O=O||r.event,!O)return;let Q=E||O.target||r,_e=Q[Le[O.type][K?Xe:Qe]];if(_e){let re=[];if(_e.length===1){let D=A(_e[0],Q,O);D&&re.push(D)}else{let D=_e.slice();for(let de=0;de<D.length&&!(O&&O[fo]===!0);de++){let j=A(D[de],Q,O);j&&re.push(j)}}if(re.length===1)throw re[0];for(let D=0;D<re.length;D++){let de=re[D];e.nativeScheduleMicroTask(()=>{throw de})}}}let ne=function(E){return X(this,E,!1)},Pe=function(E){return X(this,E,!0)};function ee(E,O){if(!E)return!1;let K=!0;O&&O.useG!==void 0&&(K=O.useG);let Q=O&&O.vh,_e=!0;O&&O.chkDup!==void 0&&(_e=O.chkDup);let re=!1;O&&O.rt!==void 0&&(re=O.rt);let D=E;for(;D&&!D.hasOwnProperty(o);)D=er(D);if(!D&&E[o]&&(D=E),!D||D[_])return!1;let de=O&&O.eventNameToString,j={},W=D[_]=D[o],z=D[J(i)]=D[i],U=D[J(d)]=D[d],xe=D[J(m)]=D[m],ue;O&&O.prepend&&(ue=D[J(O.prepend)]=D[O.prepend]);function H(u,P){return P?typeof u=="boolean"?{capture:u,passive:!0}:u?typeof u=="object"&&u.passive!==!1?ht(rt({},u),{passive:!0}):u:{passive:!0}:u}let S=function(u){if(!j.isExisting)return W.call(j.target,j.eventName,j.capture?Pe:ne,j.options)},g=function(u){if(!u.isRemoved){let P=Le[u.eventName],F;P&&(F=P[u.capture?Xe:Qe]);let V=F&&u.target[F];if(V){for(let I=0;I<V.length;I++)if(V[I]===u){V.splice(I,1),u.isRemoved=!0,u.removeAbortListener&&(u.removeAbortListener(),u.removeAbortListener=null),V.length===0&&(u.allRemoved=!0,u.target[F]=null);break}}}if(u.allRemoved)return z.call(u.target,u.eventName,u.capture?Pe:ne,u.options)},p=function(u){return W.call(j.target,j.eventName,u.invoke,j.options)},R=function(u){return ue.call(j.target,j.eventName,u.invoke,j.options)},N=function(u){return z.call(u.target,u.eventName,u.invoke,u.options)},fe=K?S:p,Y=K?g:N,tt=function(u,P){let F=typeof P;return F==="function"&&u.callback===P||F==="object"&&u.originalDelegate===P},Ze=O?.diff||tt,$e=Zone[J("UNPATCHED_EVENTS")],We=r[J("PASSIVE_EVENTS")];function M(u){if(typeof u=="object"&&u!==null){let P=rt({},u);return u.signal&&(P.signal=u.signal),P}return u}let v=function(u,P,F,V,I=!1,q=!1){return function(){let Z=this||r,$=arguments[0];O&&O.transferEventName&&($=O.transferEventName($));let oe=arguments[1];if(!oe)return u.apply(this,arguments);if(xn&&$==="uncaughtException")return u.apply(this,arguments);let ie=!1;if(typeof oe!="function"){if(!oe.handleEvent)return u.apply(this,arguments);ie=!0}if(Q&&!Q(u,oe,Z,arguments))return;let nt=!!We&&We.indexOf($)!==-1,je=M(H(arguments[2],nt)),ut=je?.signal;if(ut?.aborted)return;if($e){for(let He=0;He<$e.length;He++)if($===$e[He])return nt?u.call(Z,$,oe,je):u.apply(this,arguments)}let yn=je?typeof je=="boolean"?!0:je.capture:!1,ar=je&&typeof je=="object"?je.once:!1,vo=Zone.current,Tn=Le[$];Tn||(ho($,de),Tn=Le[$]);let cr=Tn[yn?Xe:Qe],ft=Z[cr],lr=!1;if(ft){if(lr=!0,_e){for(let He=0;He<ft.length;He++)if(Ze(ft[He],oe))return}}else ft=Z[cr]=[];let Bt,dr=Z.constructor.name,gr=po[dr];gr&&(Bt=gr[$]),Bt||(Bt=dr+P+(de?de($):$)),j.options=je,ar&&(j.options.once=!1),j.target=Z,j.capture=yn,j.eventName=$,j.isExisting=lr;let St=K?js:void 0;St&&(St.taskData=j),ut&&(j.options.signal=void 0);let Ve=vo.scheduleEventTask(Bt,oe,St,F,V);if(ut){j.options.signal=ut;let He=()=>Ve.zone.cancelTask(Ve);u.call(ut,"abort",He,{once:!0}),Ve.removeAbortListener=()=>ut.removeEventListener("abort",He)}if(j.target=null,St&&(St.taskData=null),ar&&(j.options.once=!0),typeof Ve.options!="boolean"&&(Ve.options=je),Ve.target=Z,Ve.capture=yn,Ve.eventName=$,ie&&(Ve.originalDelegate=oe),q?ft.unshift(Ve):ft.push(Ve),I)return Z}};return D[o]=v(W,b,fe,Y,re),ue&&(D[C]=v(ue,T,R,Y,re,!0)),D[i]=function(){let u=this||r,P=arguments[0];O&&O.transferEventName&&(P=O.transferEventName(P));let F=arguments[2],V=F?typeof F=="boolean"?!0:F.capture:!1,I=arguments[1];if(!I)return z.apply(this,arguments);if(Q&&!Q(z,I,u,arguments))return;let q=Le[P],Z;q&&(Z=q[V?Xe:Qe]);let $=Z&&u[Z];if($)for(let oe=0;oe<$.length;oe++){let ie=$[oe];if(Ze(ie,I)){if($.splice(oe,1),ie.isRemoved=!0,$.length===0&&(ie.allRemoved=!0,u[Z]=null,!V&&typeof P=="string")){let nt=Vt+"ON_PROPERTY"+P;u[nt]=null}return ie.zone.cancelTask(ie),re?u:void 0}}return z.apply(this,arguments)},D[d]=function(){let u=this||r,P=arguments[0];O&&O.transferEventName&&(P=O.transferEventName(P));let F=[],V=_o(u,de?de(P):P);for(let I=0;I<V.length;I++){let q=V[I],Z=q.originalDelegate?q.originalDelegate:q.callback;F.push(Z)}return F},D[m]=function(){let u=this||r,P=arguments[0];if(P){O&&O.transferEventName&&(P=O.transferEventName(P));let F=Le[P];if(F){let V=F[Qe],I=F[Xe],q=u[V],Z=u[I];if(q){let $=q.slice();for(let oe=0;oe<$.length;oe++){let ie=$[oe],nt=ie.originalDelegate?ie.originalDelegate:ie.callback;this[i].call(this,P,nt,ie.options)}}if(Z){let $=Z.slice();for(let oe=0;oe<$.length;oe++){let ie=$[oe],nt=ie.originalDelegate?ie.originalDelegate:ie.callback;this[i].call(this,P,nt,ie.options)}}}}else{let F=Object.keys(u);for(let V=0;V<F.length;V++){let I=F[V],q=uo.exec(I),Z=q&&q[1];Z&&Z!=="removeListener"&&this[m].call(this,Z)}this[m].call(this,"removeListener")}if(re)return this},et(D[o],W),et(D[i],z),xe&&et(D[m],xe),U&&et(D[d],U),!0}let me=[];for(let E=0;E<t.length;E++)me[E]=ee(t[E],n);return me}function _o(r,e){if(!e){let i=[];for(let d in r){let m=uo.exec(d),_=m&&m[1];if(_&&(!e||_===e)){let b=r[d];if(b)for(let C=0;C<b.length;C++)i.push(b[C])}}return i}let t=Le[e];t||(ho(e),t=Le[e]);let n=r[t[Qe]],o=r[t[Xe]];return n?o?n.concat(o):n.slice():o?o.slice():[]}function qs(r,e){let t=r.Event;t&&t.prototype&&e.patchMethod(t.prototype,"stopImmediatePropagation",n=>function(o,i){o[fo]=!0,n&&n.apply(o,i)})}function Gs(r,e){e.patchMethod(r,"queueMicrotask",t=>function(n,o){Zone.current.scheduleMicroTask("queueMicrotask",o[0])})}var Mn=J("zoneTask");function Tt(r,e,t,n){let o=null,i=null;e+=n,t+=n;let d={};function m(b){let C=b.data;C.args[0]=function(){return b.invoke.apply(this,arguments)};let T=o.apply(r,C.args);return so(T)?C.handleId=T:(C.handle=T,C.isRefreshable=io(T.refresh)),b}function _(b){let{handle:C,handleId:T}=b.data;return i.call(r,C??T)}o=Je(r,e,b=>function(C,T){if(io(T[0])){let A={isRefreshable:!1,isPeriodic:n==="Interval",delay:n==="Timeout"||n==="Interval"?T[1]||0:void 0,args:T},X=T[0];T[0]=function(){try{return X.apply(this,arguments)}finally{let{handle:K,handleId:Q,isPeriodic:_e,isRefreshable:re}=A;!_e&&!re&&(Q?delete d[Q]:K&&(K[Mn]=null))}};let ne=or(e,T[0],A,m,_);if(!ne)return ne;let{handleId:Pe,handle:ee,isRefreshable:me,isPeriodic:E}=ne.data;if(Pe)d[Pe]=ne;else if(ee&&(ee[Mn]=ne,me&&!E)){let O=ee.refresh;ee.refresh=function(){let{zone:K,state:Q}=ne;return Q==="notScheduled"?(ne._state="scheduled",K._updateTaskCount(ne,1)):Q==="running"&&(ne._state="scheduling"),O.call(this)}}return ee??Pe??ne}else return b.apply(r,T)}),i=Je(r,t,b=>function(C,T){let A=T[0],X;so(A)?(X=d[A],delete d[A]):(X=A?.[Mn],X?A[Mn]=null:X=A),X?.type?X.cancelFn&&X.zone.cancelTask(X):b.apply(r,T)})}function Zs(r,e){let{isBrowser:t,isMix:n}=e.getGlobalObjects();if(!t&&!n||!r.customElements||!("customElements"in r))return;let o=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,r.customElements,"customElements","define",o)}function $s(r,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:t,zoneSymbolEventNames:n,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:d}=e.getGlobalObjects();for(let _=0;_<t.length;_++){let b=t[_],C=b+i,T=b+o,A=d+C,X=d+T;n[b]={},n[b][i]=A,n[b][o]=X}let m=r.EventTarget;if(!(!m||!m.prototype))return e.patchEventTarget(r,e,[m&&m.prototype]),!0}function Ys(r,e){e.patchEventPrototype(r,e)}function bo(r,e,t){if(!t||t.length===0)return e;let n=t.filter(i=>i.target===r);if(n.length===0)return e;let o=n[0].ignoreProperties;return e.filter(i=>o.indexOf(i)===-1)}function ao(r,e,t,n){if(!r)return;let o=bo(r,e,t);mo(r,o,n)}function Qn(r){return Object.getOwnPropertyNames(r).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Ks(r,e){if(xn&&!go||Zone[r.symbol("patchEvents")])return;let t=e.__Zone_ignore_on_properties,n=[];if(sr){let o=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let i=[];ao(o,Qn(o),t&&t.concat(i),er(o))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let o=0;o<n.length;o++){let i=e[n[o]];i?.prototype&&ao(i.prototype,Qn(i.prototype),t)}}function Xs(r){r.__load_patch("legacy",e=>{let t=e[r.__symbol__("legacyPatch")];t&&t()}),r.__load_patch("timers",e=>{let t="set",n="clear";Tt(e,t,n,"Timeout"),Tt(e,t,n,"Interval"),Tt(e,t,n,"Immediate")}),r.__load_patch("requestAnimationFrame",e=>{Tt(e,"request","cancel","AnimationFrame"),Tt(e,"mozRequest","mozCancel","AnimationFrame"),Tt(e,"webkitRequest","webkitCancel","AnimationFrame")}),r.__load_patch("blocking",(e,t)=>{let n=["alert","prompt","confirm"];for(let o=0;o<n.length;o++){let i=n[o];Je(e,i,(d,m,_)=>function(b,C){return t.current.run(d,e,C,_)})}}),r.__load_patch("EventTarget",(e,t,n)=>{Ys(e,n),$s(e,n);let o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,n,[o.prototype])}),r.__load_patch("MutationObserver",(e,t,n)=>{Lt("MutationObserver"),Lt("WebKitMutationObserver")}),r.__load_patch("IntersectionObserver",(e,t,n)=>{Lt("IntersectionObserver")}),r.__load_patch("FileReader",(e,t,n)=>{Lt("FileReader")}),r.__load_patch("on_property",(e,t,n)=>{Ks(n,e)}),r.__load_patch("customElements",(e,t,n)=>{Zs(e,n)}),r.__load_patch("XHR",(e,t)=>{b(e);let n=J("xhrTask"),o=J("xhrSync"),i=J("xhrListener"),d=J("xhrScheduled"),m=J("xhrURL"),_=J("xhrErrorBeforeScheduled");function b(C){let T=C.XMLHttpRequest;if(!T)return;let A=T.prototype;function X(W){return W[n]}let ne=A[Yn],Pe=A[Kn];if(!ne){let W=C.XMLHttpRequestEventTarget;if(W){let z=W.prototype;ne=z[Yn],Pe=z[Kn]}}let ee="readystatechange",me="scheduled";function E(W){let z=W.data,U=z.target;U[d]=!1,U[_]=!1;let xe=U[i];ne||(ne=U[Yn],Pe=U[Kn]),xe&&Pe.call(U,ee,xe);let ue=U[i]=()=>{if(U.readyState===U.DONE)if(!z.aborted&&U[d]&&W.state===me){let S=U[t.__symbol__("loadfalse")];if(U.status!==0&&S&&S.length>0){let g=W.invoke;W.invoke=function(){let p=U[t.__symbol__("loadfalse")];for(let R=0;R<p.length;R++)p[R]===W&&p.splice(R,1);!z.aborted&&W.state===me&&g.call(W)},S.push(W)}else W.invoke()}else!z.aborted&&U[d]===!1&&(U[_]=!0)};return ne.call(U,ee,ue),U[n]||(U[n]=W),de.apply(U,z.args),U[d]=!0,W}function O(){}function K(W){let z=W.data;return z.aborted=!0,j.apply(z.target,z.args)}let Q=Je(A,"open",()=>function(W,z){return W[o]=z[2]==!1,W[m]=z[1],Q.apply(W,z)}),_e="XMLHttpRequest.send",re=J("fetchTaskAborting"),D=J("fetchTaskScheduling"),de=Je(A,"send",()=>function(W,z){if(t.current[D]===!0||W[o])return de.apply(W,z);{let U={target:W,url:W[m],isPeriodic:!1,args:z,aborted:!1},xe=or(_e,O,U,E,K);W&&W[_]===!0&&!U.aborted&&xe.state===me&&xe.invoke()}}),j=Je(A,"abort",()=>function(W,z){let U=X(W);if(U&&typeof U.type=="string"){if(U.cancelFn==null||U.data&&U.data.aborted)return;U.zone.cancelTask(U)}else if(t.current[re]===!0)return j.apply(W,z)})}}),r.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Ws(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),r.__load_patch("PromiseRejectionEvent",(e,t)=>{function n(o){return function(i){_o(e,o).forEach(m=>{let _=e.PromiseRejectionEvent;if(_){let b=new _(o,{promise:i.promise,reason:i.rejection});m.invoke(b)}})}}e.PromiseRejectionEvent&&(t[J("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[J("rejectionHandledHandler")]=n("rejectionhandled"))}),r.__load_patch("queueMicrotask",(e,t,n)=>{Gs(e,n)})}function Qs(r){r.__load_patch("ZoneAwarePromise",(e,t,n)=>{let o=Object.getOwnPropertyDescriptor,i=Object.defineProperty;function d(M){if(M&&M.toString===Object.prototype.toString){let v=M.constructor&&M.constructor.name;return(v||"")+": "+JSON.stringify(M)}return M?M.toString():Object.prototype.toString.call(M)}let m=n.symbol,_=[],b=e[m("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,C=m("Promise"),T=m("then"),A="__creationTrace__";n.onUnhandledError=M=>{if(n.showUncaughtError()){let v=M&&M.rejection;v?console.error("Unhandled Promise rejection:",v instanceof Error?v.message:v,"; Zone:",M.zone.name,"; Task:",M.task&&M.task.source,"; Value:",v,v instanceof Error?v.stack:void 0):console.error(M)}},n.microtaskDrainDone=()=>{for(;_.length;){let M=_.shift();try{M.zone.runGuarded(()=>{throw M.throwOriginal?M.rejection:M})}catch(v){ne(v)}}};let X=m("unhandledPromiseRejectionHandler");function ne(M){n.onUnhandledError(M);try{let v=t[X];typeof v=="function"&&v.call(this,M)}catch{}}function Pe(M){return M&&typeof M.then=="function"}function ee(M){return M}function me(M){return Y.reject(M)}let E=m("state"),O=m("value"),K=m("finally"),Q=m("parentPromiseValue"),_e=m("parentPromiseState"),re="Promise.then",D=null,de=!0,j=!1,W=0;function z(M,v){return u=>{try{H(M,v,u)}catch(P){H(M,!1,P)}}}let U=function(){let M=!1;return function(u){return function(){M||(M=!0,u.apply(null,arguments))}}},xe="Promise resolved with itself",ue=m("currentTaskTrace");function H(M,v,u){let P=U();if(M===u)throw new TypeError(xe);if(M[E]===D){let F=null;try{(typeof u=="object"||typeof u=="function")&&(F=u&&u.then)}catch(V){return P(()=>{H(M,!1,V)})(),M}if(v!==j&&u instanceof Y&&u.hasOwnProperty(E)&&u.hasOwnProperty(O)&&u[E]!==D)g(u),H(M,u[E],u[O]);else if(v!==j&&typeof F=="function")try{F.call(u,P(z(M,v)),P(z(M,!1)))}catch(V){P(()=>{H(M,!1,V)})()}else{M[E]=v;let V=M[O];if(M[O]=u,M[K]===K&&v===de&&(M[E]=M[_e],M[O]=M[Q]),v===j&&u instanceof Error){let I=t.currentTask&&t.currentTask.data&&t.currentTask.data[A];I&&i(u,ue,{configurable:!0,enumerable:!1,writable:!0,value:I})}for(let I=0;I<V.length;)p(M,V[I++],V[I++],V[I++],V[I++]);if(V.length==0&&v==j){M[E]=W;let I=u;try{throw new Error("Uncaught (in promise): "+d(u)+(u&&u.stack?`
`+u.stack:""))}catch(q){I=q}b&&(I.throwOriginal=!0),I.rejection=u,I.promise=M,I.zone=t.current,I.task=t.currentTask,_.push(I),n.scheduleMicroTask()}}}return M}let S=m("rejectionHandledHandler");function g(M){if(M[E]===W){try{let v=t[S];v&&typeof v=="function"&&v.call(this,{rejection:M[O],promise:M})}catch{}M[E]=j;for(let v=0;v<_.length;v++)M===_[v].promise&&_.splice(v,1)}}function p(M,v,u,P,F){g(M);let V=M[E],I=V?typeof P=="function"?P:ee:typeof F=="function"?F:me;v.scheduleMicroTask(re,()=>{try{let q=M[O],Z=!!u&&K===u[K];Z&&(u[Q]=q,u[_e]=V);let $=v.run(I,void 0,Z&&I!==me&&I!==ee?[]:[q]);H(u,!0,$)}catch(q){H(u,!1,q)}},u)}let R="function ZoneAwarePromise() { [native code] }",N=function(){},fe=e.AggregateError;class Y{static toString(){return R}static resolve(v){return v instanceof Y?v:H(new this(null),de,v)}static reject(v){return H(new this(null),j,v)}static withResolvers(){let v={};return v.promise=new Y((u,P)=>{v.resolve=u,v.reject=P}),v}static any(v){if(!v||typeof v[Symbol.iterator]!="function")return Promise.reject(new fe([],"All promises were rejected"));let u=[],P=0;try{for(let I of v)P++,u.push(Y.resolve(I))}catch{return Promise.reject(new fe([],"All promises were rejected"))}if(P===0)return Promise.reject(new fe([],"All promises were rejected"));let F=!1,V=[];return new Y((I,q)=>{for(let Z=0;Z<u.length;Z++)u[Z].then($=>{F||(F=!0,I($))},$=>{V.push($),P--,P===0&&(F=!0,q(new fe(V,"All promises were rejected")))})})}static race(v){let u,P,F=new this((q,Z)=>{u=q,P=Z});function V(q){u(q)}function I(q){P(q)}for(let q of v)Pe(q)||(q=this.resolve(q)),q.then(V,I);return F}static all(v){return Y.allWithCallback(v)}static allSettled(v){return(this&&this.prototype instanceof Y?this:Y).allWithCallback(v,{thenCallback:P=>({status:"fulfilled",value:P}),errorCallback:P=>({status:"rejected",reason:P})})}static allWithCallback(v,u){let P,F,V=new this(($,oe)=>{P=$,F=oe}),I=2,q=0,Z=[];for(let $ of v){Pe($)||($=this.resolve($));let oe=q;try{$.then(ie=>{Z[oe]=u?u.thenCallback(ie):ie,I--,I===0&&P(Z)},ie=>{u?(Z[oe]=u.errorCallback(ie),I--,I===0&&P(Z)):F(ie)})}catch(ie){F(ie)}I++,q++}return I-=2,I===0&&P(Z),V}constructor(v){let u=this;if(!(u instanceof Y))throw new Error("Must be an instanceof Promise.");u[E]=D,u[O]=[];try{let P=U();v&&v(P(z(u,de)),P(z(u,j)))}catch(P){H(u,!1,P)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Y}then(v,u){let P=this.constructor?.[Symbol.species];(!P||typeof P!="function")&&(P=this.constructor||Y);let F=new P(N),V=t.current;return this[E]==D?this[O].push(V,F,v,u):p(this,V,F,v,u),F}catch(v){return this.then(null,v)}finally(v){let u=this.constructor?.[Symbol.species];(!u||typeof u!="function")&&(u=Y);let P=new u(N);P[K]=K;let F=t.current;return this[E]==D?this[O].push(F,P,v,v):p(this,F,P,v,v),P}}Y.resolve=Y.resolve,Y.reject=Y.reject,Y.race=Y.race,Y.all=Y.all;let tt=e[C]=e.Promise;e.Promise=Y;let Ze=m("thenPatched");function $e(M){let v=M.prototype,u=o(v,"then");if(u&&(u.writable===!1||!u.configurable))return;let P=v.then;v[T]=P,M.prototype.then=function(F,V){return new Y((q,Z)=>{P.call(this,q,Z)}).then(F,V)},M[Ze]=!0}n.patchThen=$e;function We(M){return function(v,u){let P=M.apply(v,u);if(P instanceof Y)return P;let F=P.constructor;return F[Ze]||$e(F),P}}return tt&&($e(tt),Je(e,"fetch",M=>We(M))),Promise[t.__symbol__("uncaughtPromiseErrors")]=_,Y})}function Js(r){r.__load_patch("toString",e=>{let t=Function.prototype.toString,n=J("OriginalDelegate"),o=J("Promise"),i=J("Error"),d=function(){if(typeof this=="function"){let C=this[n];if(C)return typeof C=="function"?t.call(C):Object.prototype.toString.call(C);if(this===Promise){let T=e[o];if(T)return t.call(T)}if(this===Error){let T=e[i];if(T)return t.call(T)}}return t.call(this)};d[n]=t,Function.prototype.toString=d;let m=Object.prototype.toString,_="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?_:m.call(this)}})}function ea(r,e,t,n,o){let i=Zone.__symbol__(n);if(e[i])return;let d=e[i]=e[n];e[n]=function(m,_,b){return _&&_.prototype&&o.forEach(function(C){let T=`${t}.${n}::`+C,A=_.prototype;try{if(A.hasOwnProperty(C)){let X=r.ObjectGetOwnPropertyDescriptor(A,C);X&&X.value?(X.value=r.wrapWithCurrentZone(X.value,T),r._redefineProperty(_.prototype,C,X)):A[C]&&(A[C]=r.wrapWithCurrentZone(A[C],T))}else A[C]&&(A[C]=r.wrapWithCurrentZone(A[C],T))}catch{}}),d.call(e,m,_,b)},r.attachOriginToPatched(e[n],d)}function ta(r){r.__load_patch("util",(e,t,n)=>{let o=Qn(e);n.patchOnProperties=mo,n.patchMethod=Je,n.bindArguments=ir,n.patchMacroTask=Us;let i=t.__symbol__("BLACK_LISTED_EVENTS"),d=t.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[i]=e[d]),e[i]&&(t[i]=t[d]=e[i]),n.patchEventPrototype=qs,n.patchEventTarget=Hs,n.isIEOrEdge=Bs,n.ObjectDefineProperty=Jn,n.ObjectGetOwnPropertyDescriptor=Wt,n.ObjectCreate=As,n.ArraySlice=Ns,n.patchClass=Lt,n.wrapWithCurrentZone=rr,n.filterProperties=bo,n.attachOriginToPatched=et,n._redefineProperty=Object.defineProperty,n.patchCallbacks=ea,n.getGlobalObjects=()=>({globalSources:po,zoneSymbolEventNames:Le,eventNames:o,isBrowser:sr,isMix:go,isNode:xn,TRUE_STR:Xe,FALSE_STR:Qe,ZONE_SYMBOL_PREFIX:Vt,ADD_EVENT_LISTENER_STR:tr,REMOVE_EVENT_LISTENER_STR:nr})})}function na(r){Qs(r),Js(r),ta(r)}var Co=zs();na(Co);Xs(Co);Pr(pn,{providers:[kr(),wr(to)]});
